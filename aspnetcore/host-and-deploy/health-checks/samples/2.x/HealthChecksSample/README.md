# <a name="aspnet-core-health-check-sample"></a><span data-ttu-id="3dcef-101">ASP.NET Core 正常性チェック サンプル</span><span class="sxs-lookup"><span data-stu-id="3dcef-101">ASP.NET Core Health Check Sample</span></span>

<span data-ttu-id="3dcef-102">このサンプルでは、正常性チェック ミドルウェアと各種サービスの使用方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-102">This sample illustrates the use of Health Check Middleware and services.</span></span> <span data-ttu-id="3dcef-103">このサンプルでは、「[Health checks in ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)」(ASP.NET Core の正常性チェック) というトピックで説明されているシナリオを実際に確認できます。</span><span class="sxs-lookup"><span data-stu-id="3dcef-103">This sample demonstrates the scenario described in the [Health checks in ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic.</span></span>

<span data-ttu-id="3dcef-104">そのトピックで説明しているシナリオに対してサンプル アプリを実行するには、コマンド シェルでプロジェクトのフォルダーから [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) コマンドを使用します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-104">To run the sample app for a scenario described in the topic, use the [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) command from the project's folder in a command shell.</span></span> <span data-ttu-id="3dcef-105">これから試すシナリオのスイッチを渡します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-105">Pass a switch for the scenario that you're exploring.</span></span> <span data-ttu-id="3dcef-106">スイッチが `basic` に指定されない場合、アプリの設定は既定で `dotnet run` になります。</span><span class="sxs-lookup"><span data-stu-id="3dcef-106">The app defaults to the `basic` configuration when a switch isn't provided to `dotnet run`.</span></span>

| <span data-ttu-id="3dcef-107">シナリオ</span><span class="sxs-lookup"><span data-stu-id="3dcef-107">Scenario</span></span>                                               | <span data-ttu-id="3dcef-108">サンプル アプリ コマンド</span><span class="sxs-lookup"><span data-stu-id="3dcef-108">Sample app command</span></span>               | <span data-ttu-id="3dcef-109">説明</span><span class="sxs-lookup"><span data-stu-id="3dcef-109">Description</span></span> |
| ------------------------------------------------------ | -------------------------------- | ----------- |
| <span data-ttu-id="3dcef-110">基本的な正常性プローブ (既定)</span><span class="sxs-lookup"><span data-stu-id="3dcef-110">Basic health probe (default)</span></span>                           | `dotnet run --scenario basic`    | <span data-ttu-id="3dcef-111">アプリで HTTP 要求を処理できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-111">Confirms that the app can process HTTP requests.</span></span> |
| <span data-ttu-id="3dcef-112">データベース プローブ</span><span class="sxs-lookup"><span data-stu-id="3dcef-112">Database probe</span></span>                                         | `dotnet run --scenario db`       | <span data-ttu-id="3dcef-113">SQL Server データベース接続を確認します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-113">Checks a SQL Server database connection.</span></span> <span data-ttu-id="3dcef-114">手順については、同トピックの「[Database probe](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe)」(データベース プローブ) セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3dcef-114">See the [Database probe](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe) section of the topic for instructions.</span></span> |
| <span data-ttu-id="3dcef-115">対応性/活動性プローブ</span><span class="sxs-lookup"><span data-stu-id="3dcef-115">Readiness/liveness probes</span></span>                              | `dotnet run --scenario liveness` | <span data-ttu-id="3dcef-116">アプリの状態が稼働中 (*活動性*) か稼働準備中 (*対応性*) かを確認します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-116">Performs checks for a live app status (*liveness*) versus the app preparing to become live (*readiness*).</span></span> |
| <span data-ttu-id="3dcef-117">メトリックベースのプローブ (メモリ)/</span><span class="sxs-lookup"><span data-stu-id="3dcef-117">Metric-based probe (memory)/</span></span><br><span data-ttu-id="3dcef-118">カスタム応答ライター</span><span class="sxs-lookup"><span data-stu-id="3dcef-118">custom response writer</span></span> | `dotnet run --scenario writer`   | <span data-ttu-id="3dcef-119">メモリ使用を確認し、正常性エンドポイントの確認時にカスタム JSON を書き出します。</span><span class="sxs-lookup"><span data-stu-id="3dcef-119">Checks against memory use and writes out custom JSON when the health endpoint is checked.</span></span> |
| <span data-ttu-id="3dcef-120">ポート別のフィルター処理</span><span class="sxs-lookup"><span data-stu-id="3dcef-120">Filter by port</span></span>                                         | `dotnet run --scenario port`     | <span data-ttu-id="3dcef-121">正常性チェックを指定のポートに絞り込みます。</span><span class="sxs-lookup"><span data-stu-id="3dcef-121">Filters health checks to a given port.</span></span> <span data-ttu-id="3dcef-122">手順については、同トピックの「[ポート別のフィルター処理](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port)」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3dcef-122">See the [Filter by port](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port) section of the topic for instructions.</span></span> |

<span data-ttu-id="3dcef-123">データベース プローブとポート フィルターのシナリオでは、追加設定が必要です。</span><span class="sxs-lookup"><span data-stu-id="3dcef-123">The database probe and port filter scenarios require additional configuration.</span></span> <span data-ttu-id="3dcef-124">詳細については、「[Health checks](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)」(正常性チェック) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3dcef-124">See the [Health checks](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic for details.</span></span>
