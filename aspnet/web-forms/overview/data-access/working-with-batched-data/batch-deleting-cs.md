---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: バッチを削除する (c#) |Microsoft Docs
author: rick-anderson
description: 1 回の操作で複数のデータベース レコードを削除する方法について説明します。 ユーザー インターフェイス層では、作成された以前 tut 拡張の GridView に構築します.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2007
ms.topic: article
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: c6d792519d4a9c30f8d28497a74bc45b00197169
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2018
ms.locfileid: "37365306"
---
<a name="batch-deleting-c"></a><span data-ttu-id="7fd21-104">バッチを削除する (c#)</span><span class="sxs-lookup"><span data-stu-id="7fd21-104">Batch Deleting (C#)</span></span>
====================
<span data-ttu-id="7fd21-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7fd21-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7fd21-106">[コードのダウンロード](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip)または[PDF のダウンロード](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7fd21-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="7fd21-107">1 回の操作で複数のデータベース レコードを削除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="7fd21-108">ユーザー インターフェイス層では、前のチュートリアルで作成された拡張の GridView に構築します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="7fd21-109">データ アクセス層は、すべての削除の成功に、すべての削除はロールバック、トランザクション内で複数の削除操作をラップします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="7fd21-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="7fd21-110">Introduction</span></span>

<span data-ttu-id="7fd21-111">[前のチュートリアル](batch-updating-cs.md)編集インターフェイスが完全に編集可能な GridView を使用してバッチを作成する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="7fd21-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="7fd21-112">ポストバックとキーボードのマウスのコンテキストをはるかに少ない状況は、ユーザーがよくレコードの編集多く一度に、インターフェイスの編集のバッチは、スイッチ、エンドユーザーの効率が向上します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="7fd21-113">この手法は通常、1 つの go の多くのレコードを削除するユーザーがページで同様に便利です。</span><span class="sxs-lookup"><span data-stu-id="7fd21-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="7fd21-114">使い慣れたインターフェイスを削除する最も一般的なバッチのいずれかがオンラインの電子メール クライアントを使用するすべてのユーザーが既に: 対応する削除すべてチェック項目を含むグリッドの各行のチェック ボックス ボタン (図 1 参照)。</span><span class="sxs-lookup"><span data-stu-id="7fd21-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="7fd21-115">このチュートリアルではなく短いため既にすべての web ベースのインターフェイスと 1 つのアトミック操作として一連のレコードを削除するメソッドの両方を作成する前のチュートリアルで困難な作業を完了しました。</span><span class="sxs-lookup"><span data-stu-id="7fd21-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="7fd21-116">[のチェック ボックスの GridView 列を追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)チュートリアルで、チェック ボックスの列を含む GridView を作成した、[トランザクション内のデータベース変更のラッピング](wrapping-database-modifications-within-a-transaction-cs.md)チュートリアル内のメソッドを作成しましたトランザクションを使用して、削除は BLL、`List<T>`の`ProductID`値。</span><span class="sxs-lookup"><span data-stu-id="7fd21-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="7fd21-117">このチュートリアルではに基づいて進められますし例を削除する作業バッチを作成する過去の経験をマージします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>


<span data-ttu-id="7fd21-118">[![各行には、チェック ボックスが含まれています。](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7fd21-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="7fd21-119">**図 1**: 各行には、チェック ボックスが含まれています ([フルサイズの画像を表示する をクリックします](batch-deleting-cs/_static/image2.png))。</span><span class="sxs-lookup"><span data-stu-id="7fd21-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>


## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="7fd21-120">手順 1: インターフェイスの削除バッチを作成します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="7fd21-121">インターフェイスの削除バッチを既に作成したので、[のチェック ボックスの GridView 列を追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)チュートリアルでは単にコピーできます`BatchDelete.aspx`ゼロから作成するのではなく。</span><span class="sxs-lookup"><span data-stu-id="7fd21-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="7fd21-122">開いて開始、`BatchDelete.aspx`ページで、`BatchData`フォルダーと`CheckBoxField.aspx`ページで、`EnhancedGridView`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="7fd21-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="7fd21-123">`CheckBoxField.aspx`  ページで、ソース ビューに移動して、マークアップ間のコピー、`<asp:Content>`図 2 に示すようにタグを付けます。</span><span class="sxs-lookup"><span data-stu-id="7fd21-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>


<span data-ttu-id="7fd21-124">[![CheckBoxField.aspx の宣言型マークアップをクリップボードにコピーします。](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7fd21-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="7fd21-125">**図 2**: コピーの宣言型マークアップ`CheckBoxField.aspx`をクリップボードに ([フルサイズの画像を表示する をクリックします](batch-deleting-cs/_static/image4.png))。</span><span class="sxs-lookup"><span data-stu-id="7fd21-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>


<span data-ttu-id="7fd21-126">次に、ソース ビューに移動`BatchDelete.aspx`内でのクリップボードの内容を貼り付けると、`<asp:Content>`タグ。</span><span class="sxs-lookup"><span data-stu-id="7fd21-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="7fd21-127">コピーしてからの分離コード クラス内のコードを貼り付けます`CheckBoxField.aspx.cs`をで分離コード クラス内で`BatchDelete.aspx.cs`(、`DeleteSelectedProducts`ボタン s`Click`イベント ハンドラー、`ToggleCheckState`メソッド、および`Click`イベント ハンドラー`CheckAll`と`UncheckAll`ボタン)。</span><span class="sxs-lookup"><span data-stu-id="7fd21-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="7fd21-128">このコンテンツでは、経由でコピーした後、`BatchDelete.aspx`ページ分離コード クラスは、次のコードを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fd21-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="7fd21-129">宣言型マークアップとソース コードをコピー後をテストするのには少し`BatchDelete.aspx`ブラウザーで表示することによって。</span><span class="sxs-lookup"><span data-stu-id="7fd21-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="7fd21-130">製品の名前、カテゴリ、およびチェック ボックスと共に価格を一覧表示する行ごとに GridView で最初の 10 個の製品を一覧表示する GridView が表示されます。</span><span class="sxs-lookup"><span data-stu-id="7fd21-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="7fd21-131">3 つのボタンがあります。 すべて、すべてオフにして、および選択した製品を削除します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="7fd21-132">すべてをオフにしてすべてのチェック ボックスをクリア中に、すべてのチェック ボックスを選択すべてチェック ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="7fd21-133">選択した製品の削除 をクリックしてには、一覧表示するメッセージが表示されます、 `ProductID` 、選択した製品の値は、製品を実際に削除されません。</span><span class="sxs-lookup"><span data-stu-id="7fd21-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>


<span data-ttu-id="7fd21-134">[![CheckBoxField.aspx からインターフェイス BatchDeleting.aspx に移動しました](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7fd21-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="7fd21-135">**図 3**: The インターフェイスから`CheckBoxField.aspx`に移動しました`BatchDeleting.aspx`([フルサイズの画像を表示する をクリックします](batch-deleting-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="7fd21-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>


## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="7fd21-136">手順 2: トランザクションを使用してチェックされている製品を削除します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="7fd21-137">インターフェイスに正常にコピーを削除するバッチに`BatchDeleting.aspx`、すべてのままですが選択されている製品の削除 ボタンを使用してチェックされている製品を削除するように、コードを更新すること、`DeleteProductsWithTransaction`メソッドで、`ProductsBLL`クラス。</span><span class="sxs-lookup"><span data-stu-id="7fd21-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="7fd21-138">このメソッドで追加、[トランザクション内でのデータベース変更をラップ](wrapping-database-modifications-within-a-transaction-cs.md)チュートリアルでは、その入力として受け取ります、`List<T>`の`ProductID`値し、対応する各を削除します`ProductID`のスコープ内、トランザクションです。</span><span class="sxs-lookup"><span data-stu-id="7fd21-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="7fd21-139">`DeleteSelectedProducts`ボタン s`Click`イベント ハンドラーは現在、次を使用して`foreach`GridView の各行を反復処理するループ。</span><span class="sxs-lookup"><span data-stu-id="7fd21-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="7fd21-140">行ごとに、 `ProductSelector` CheckBox Web コントロールがプログラムで参照されています。</span><span class="sxs-lookup"><span data-stu-id="7fd21-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="7fd21-141">オンの場合行 s`ProductID`から取得されます、`DataKeys`コレクションと`DeleteResults`ラベルの`Text`プロパティを更新して、削除、行が選択されていることを示すメッセージが含まれます。</span><span class="sxs-lookup"><span data-stu-id="7fd21-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="7fd21-142">上記のコードですべてのレコードが実際にへの呼び出しとして削除されません、`ProductsBLL`クラスの`Delete`メソッドをコメント アウトします。この削除ロジックを適用するが、コードは、製品を削除するアトミック操作内ではありません。</span><span class="sxs-lookup"><span data-stu-id="7fd21-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="7fd21-143">つまり、シーケンス内の最初のいくつか削除に成功した場合は、以降は、(外部キー制約の違反) のため失敗しました例外がスローされますは既に削除されてこれらの製品が削除されたままとします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="7fd21-144">代わりに使用する原子性を確保するために、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッド。</span><span class="sxs-lookup"><span data-stu-id="7fd21-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="7fd21-145">このメソッドのリストを受け入れるため`ProductID`値を最初、グリッドからには、この一覧をコンパイルして、パラメーターとして渡します必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fd21-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="7fd21-146">最初のインスタンスを作成、`List<T>`型の`int`します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="7fd21-147">内で、`foreach`ループが選択されている製品を追加する必要があります`ProductID`値をこの`List<T>`します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="7fd21-148">ループの後にこの`List<T>`に渡される必要があります、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッド。</span><span class="sxs-lookup"><span data-stu-id="7fd21-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="7fd21-149">更新プログラム、`DeleteSelectedProducts`ボタンの`Click`イベント ハンドラーを次のコード。</span><span class="sxs-lookup"><span data-stu-id="7fd21-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="7fd21-150">更新されたコードを作成、`List<T>`型の`int`(`productIDsToDelete`) 設定されると、`ProductID`を削除する値。</span><span class="sxs-lookup"><span data-stu-id="7fd21-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="7fd21-151">後に、`foreach`ループで選択すると、少なくとも 1 つの製品がある場合、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッドが呼び出され、この一覧に渡されます。</span><span class="sxs-lookup"><span data-stu-id="7fd21-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="7fd21-152">`DeleteResults`ラベルが表示もされ (その新しく削除レコードが、グリッド内の行として表示されなく) にデータが GridView にバインドします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="7fd21-153">図 4 は、削除の行の数を選択して、GridView を示します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="7fd21-154">図 5 は、選択した製品の削除 ボタンがクリックしてされた後すぐに画面を示しています。</span><span class="sxs-lookup"><span data-stu-id="7fd21-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="7fd21-155">図 5 に注意してください、`ProductID`削除されたレコードの値は、GridView の下のラベルに表示され、これらの行が GridView ではなくなりました。</span><span class="sxs-lookup"><span data-stu-id="7fd21-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>


<span data-ttu-id="7fd21-156">[![選択した製品は削除されます。](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7fd21-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="7fd21-157">**図 4**: [選択した製品は削除されます ([フルサイズの画像を表示する] をクリックします](batch-deleting-cs/_static/image8.png))。</span><span class="sxs-lookup"><span data-stu-id="7fd21-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>


<span data-ttu-id="7fd21-158">[![削除された製品の ProductID 値は、GridView の下に一覧表示](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7fd21-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="7fd21-159">**図 5**:、削除された製品`ProductID`値は、GridView の下に表示されている ([フルサイズの画像を表示する をクリックします](batch-deleting-cs/_static/image10.png))。</span><span class="sxs-lookup"><span data-stu-id="7fd21-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7fd21-160">テストする、`DeleteProductsWithTransaction`メソッド s 原子性で製品のエントリを手動で追加、`Order Details`の表に、(とその他) には、その製品を削除しようとします。</span><span class="sxs-lookup"><span data-stu-id="7fd21-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="7fd21-161">関連付けられている注文の製品を削除するが、他に、選択した製品の削除がロールバックする方法に注意してください。 しようとしています。 外部キー制約違反を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="7fd21-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>


## <a name="summary"></a><span data-ttu-id="7fd21-162">まとめ</span><span class="sxs-lookup"><span data-stu-id="7fd21-162">Summary</span></span>

<span data-ttu-id="7fd21-163">チェック ボックスの列を含む GridView を追加するには、インターフェイスの削除バッチを作成し、ボタン Web ときを制御するには、クリックされると、単一のアトミック操作として選択された行のすべてが削除されます。</span><span class="sxs-lookup"><span data-stu-id="7fd21-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="7fd21-164">このチュートリアルで前の 2 つのチュートリアルでの作業をつなぎ合わせたによってこのようなインターフェイスを構築しました[のチェック ボックスの GridView 列を追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)と[トランザクション内のデータベース変更のラッピング](wrapping-database-modifications-within-a-transaction-cs.md)します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="7fd21-165">チェック ボックスの列を含む GridView で作成した最初のチュートリアルでは、後者の場合、BLL のメソッドを実装しました、渡されたときに、`List<T>`の`ProductID`値では、すべてのトランザクションのスコープ内で削除します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="7fd21-166">次のチュートリアルでは、バッチ挿入操作を実行するためのインターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="7fd21-167">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="7fd21-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7fd21-168">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="7fd21-168">About the Author</span></span>

<span data-ttu-id="7fd21-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="7fd21-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7fd21-170">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7fd21-171">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7fd21-172">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7fd21-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7fd21-173">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="7fd21-174">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="7fd21-174">Special Thanks To</span></span>

<span data-ttu-id="7fd21-175">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="7fd21-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="7fd21-176">このチュートリアルでは、潜在顧客レビュー担当者では、Hilton Giesenow Teresa Murphy はでした。</span><span class="sxs-lookup"><span data-stu-id="7fd21-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="7fd21-177">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="7fd21-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7fd21-178">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7fd21-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7fd21-179">[前へ](batch-updating-cs.md)
> [次へ](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7fd21-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
