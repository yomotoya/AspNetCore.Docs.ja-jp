---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: 検証コントロールを追加、編集および挿入インターフェイス (c#) |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、詳細を提供するには、後とデータ Web コントロールの後に検証コントロールを追加するがいかに簡単か見て.
ms.author: aspnetcontent
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: fedcad6265e7247d59a74a2dcaccb71fabfe0b4c
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37834204"
---
<a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="1c65a-103">検証コントロールを追加、編集および挿入インターフェイス (c#)</span><span class="sxs-lookup"><span data-stu-id="1c65a-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>
====================
<span data-ttu-id="1c65a-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1c65a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1c65a-105">[サンプル アプリをダウンロード](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe)または[PDF のダウンロード](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1c65a-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="1c65a-106">このチュートリアルではより安全な方法でユーザー インターフェイスを提供するには、後とデータ Web コントロールの後に検証コントロールを追加するがいかに簡単か見ていきます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="1c65a-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="1c65a-107">Introduction</span></span>

<span data-ttu-id="1c65a-108">例で GridView および DetailsView コントロールしました、過去、3 つのチュートリアルがすべてされてから成る BoundFields CheckBoxFields (フィールドの種類、GridView や DetailsView をデータ ソースにバインドするときに、Visual Studio によって自動的に追加コントロールのスマート タグ経由)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="1c65a-109">GridView、DetailsView 内の行を編集するには、読み取り専用ではないこれら BoundFields は、テキスト ボックスに変換されます、エンドユーザーが、既存のデータを変更できます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="1c65a-110">同様に、ときに挿入する新しいレコードに DetailsView コントロール、その BoundFields を`InsertVisible`プロパティに設定されて`true`(既定)、ユーザーが新しいレコードのフィールドの値を指定できる空のテキスト ボックスとしてレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="1c65a-111">同様に、CheckBoxFields で、標準的な読み取り専用のインターフェイスは無効になっては、有効になっているチェック ボックスを編集および挿入インターフェイスに変換されます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="1c65a-112">編集および挿入 BoundField と CheckBoxField インターフェイスの既定値は便利ですが、インターフェイスには、あらゆる種類の検証が不足しています。</span><span class="sxs-lookup"><span data-stu-id="1c65a-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="1c65a-113">省略することなどのデータ エントリ ミスを行うかどうか、`ProductName`フィールドまたはに対して無効な値を入力する`UnitsInStock`(-50) など、例外が発生しますからのアプリケーション アーキテクチャ内で。</span><span class="sxs-lookup"><span data-stu-id="1c65a-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="1c65a-114">中で説明するよう、この例外を適切に処理することができます、[前のチュートリアル](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)、編集、またはユーザー インターフェイスの挿入をユーザーがこのような無効なデータを入力するを防ぐために検証コントロールを含める理想的には、最初に配置します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="1c65a-115">カスタマイズされた編集または挿入のインターフェイスを提供するためには、BoundField または CheckBoxField TemplateField に置き換える必要があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="1c65a-116">TemplateFields、された説明のトピックで、 [GridView コントロールで TemplateFields を使用して](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md)と[DetailsView コントロールで TemplateFields を使用して](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md)のチュートリアルでは、複数ので構成できますテンプレートを定義するインターフェイスを異なる行の状態を分離します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="1c65a-117">TemplateField の`ItemTemplate`を使用するか GridView、DetailsView コントロールで行または読み取り専用フィールドを表示するときに対し、`EditItemTemplate`と`InsertItemTemplate`編集モードをそれぞれ挿入に使用するインターフェイスを示します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="1c65a-118">このチュートリアルでは見てに TemplateField の検証コントロールを追加するがいかに簡単か`EditItemTemplate`と`InsertItemTemplate`より安全な方法でユーザー インターフェイスを提供します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="1c65a-119">具体的には、このチュートリアルでは、例で作成した、 [、イベントに関連付けられている挿入、更新、および削除の確認](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)適切な検証をインクルードするインターフェイスのチュートリアルと編集および挿入を強化します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deletingexamining-the-events-associated-with-inserting-updating-and-deleting-csmd"></a><span data-ttu-id="1c65a-120">手順 1: レプリケーションの例では、[挿入、更新、および削除に関連付けられているイベントを調べる](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1c65a-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="1c65a-121">[、イベントに関連付けられている挿入、更新、および削除の確認](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)チュートリアルの名前と、編集可能な GridView では、製品の価格を一覧表示するページを作成しました。</span><span class="sxs-lookup"><span data-stu-id="1c65a-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="1c65a-122">さらに、ページには、DetailsView が含まれますが`DefaultMode`プロパティに設定されました`Insert`、それによって、常に、挿入モードでレンダリングします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="1c65a-123">この DetailsView からのユーザーでした新製品の価格と名前を入力、挿入 をクリックしておよびシステムに加えることが (図 1 参照)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>


<span data-ttu-id="1c65a-124">[![前の例では、新しい製品を追加および編集する既存のユーザーには、します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="1c65a-125">**図 1**:、前の例により、ユーザーに新しい製品の追加と編集の既存の ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>


<span data-ttu-id="1c65a-126">このチュートリアルの目標は、検証コントロールを提供するには、DetailsView と GridView を拡張します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="1c65a-127">具体的には、この検証ロジックを行います。</span><span class="sxs-lookup"><span data-stu-id="1c65a-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="1c65a-128">挿入または製品を編集するときに名前を提供することが必要です。</span><span class="sxs-lookup"><span data-stu-id="1c65a-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="1c65a-129">レコードを挿入するときに、価格が提供することが必要です。価格、必要がありますもいますが、gridview のプログラム ロジックを使用にレコードを編集するには、`RowUpdating`以前のチュートリアルからに既に存在するイベント ハンドラー</span><span class="sxs-lookup"><span data-stu-id="1c65a-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="1c65a-130">価格に入力された値が有効な通貨の形式であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="1c65a-131">最初の例をレプリケートする必要がありますに検証を含める前の例の拡張について考えることができます、前に、`DataModificationEvents.aspx`このチュートリアルでは、ページにページ`UIValidation.aspx`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="1c65a-132">両方の経由でコピーする必要があります。 これを実現する、`DataModificationEvents.aspx`ページの宣言型マークアップとそのソース コード。</span><span class="sxs-lookup"><span data-stu-id="1c65a-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="1c65a-133">まず、次の手順を実行することによって宣言型マークアップにコピーします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="1c65a-134">開く、 `DataModificationEvents.aspx` Visual Studio でのページ</span><span class="sxs-lookup"><span data-stu-id="1c65a-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="1c65a-135">ページの宣言型マークアップ (ページの下部にある [ソース] ボタンをクリックします) に移動します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="1c65a-136">内のテキストをコピー、`<asp:Content>`と`</asp:Content>`図 2 タグ (行 3 ~ 44)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>


<span data-ttu-id="1c65a-137">[![内のテキストのコピー、 &lt;Asp:content&gt;コントロール](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="1c65a-138">**図 2**: 内のテキストのコピー、`<asp:Content>`コントロール ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>


1. <span data-ttu-id="1c65a-139">開く、`UIValidation.aspx`ページ</span><span class="sxs-lookup"><span data-stu-id="1c65a-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="1c65a-140">ページの宣言型マークアップに移動します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="1c65a-141">内のテキストを貼り付け、`<asp:Content>`コントロール。</span><span class="sxs-lookup"><span data-stu-id="1c65a-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="1c65a-142">ソース コードをコピーするには、開く、`DataModificationEvents.aspx.cs`ページし、同様のテキストをコピー*内*、`EditInsertDelete_DataModificationEvents`クラス。</span><span class="sxs-lookup"><span data-stu-id="1c65a-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="1c65a-143">3 つのイベント ハンドラーをコピー (`Page_Load`、 `GridView1_RowUpdating`、および`ObjectDataSource1_Inserting`)、操作を行いますが、**いない**クラス宣言をコピーまたは`using`ステートメント。</span><span class="sxs-lookup"><span data-stu-id="1c65a-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="1c65a-144">コピーしたテキストを貼り付ける*内*、`EditInsertDelete_UIValidation`クラス`UIValidation.aspx.cs`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="1c65a-145">コンテンツとコードからの上に移動した後は`DataModificationEvents.aspx`に`UIValidation.aspx`ブラウザーで、進行状況をテストする少し。</span><span class="sxs-lookup"><span data-stu-id="1c65a-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="1c65a-146">出力は同じで、これら 2 つのページのそれぞれで同じ機能が発生することがわかります (のスクリーン ショットを図 1 に戻って`DataModificationEvents.aspx`の動作)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="1c65a-147">手順 2: TemplateFields、BoundFields に変換します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="1c65a-148">検証コントロールを編集および挿入インターフェイスに追加するには、し GridView、DetailsView コントロールで使用される BoundFields を TemplateFields に変換する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="1c65a-149">これを実現するにはの スマート タグの GridView および DetailsView の列の編集とフィールドの編集リンクをそれぞれクリックします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="1c65a-150">BoundFields のそれぞれを選択し、「このフィールドを TemplateField に変換」リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>


<span data-ttu-id="1c65a-151">[![TemplateFields の GridView、DetailsView の BoundFields の各変換します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="1c65a-152">**図 3**: 各 BoundFields に TemplateFields の GridView、DetailsView の変換 ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>


<span data-ttu-id="1c65a-153">TemplateField フィールド ダイアログ ボックスで、BoundField に変換するには、BoundField 自体として同じ読み取り専用、編集、および挿入インターフェイスを示す TemplateField が生成されます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="1c65a-154">次のマークアップの宣言構文を示しています、`ProductName`フィールドを TemplateField に変換された後、DetailsView で。</span><span class="sxs-lookup"><span data-stu-id="1c65a-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="1c65a-155">注この TemplateField が自動的に作成された 3 つのテンプレートを持っている`ItemTemplate`、 `EditItemTemplate`、および`InsertItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="1c65a-156">`ItemTemplate` 1 つのデータ フィールドの値が表示されます (`ProductName`) ラベル Web コントロールを使用するときに、`EditItemTemplate`と`InsertItemTemplate`、テキスト ボックスのデータ フィールドに関連付けるテキスト ボックスに Web コントロールでデータ フィールドの値を提示`Text`プロパティが双方向データ バインドを使用します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="1c65a-157">削除することはのみを使用している、DetailsView でこのページを挿入するため、`ItemTemplate`と`EditItemTemplate`2 つの TemplateFields からそのままでも問題はありませんが。</span><span class="sxs-lookup"><span data-stu-id="1c65a-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="1c65a-158">GridView、DetailsView の機能を挿入する、変換、GridView の組み込みをサポートしていないので`ProductName`だけ結果でフィールドを TemplateField、`ItemTemplate`と`EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="1c65a-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="1c65a-159">"Convert このフィールドを TemplateField"をクリックすると、Visual Studio が持つテンプレートが変換された BoundField のユーザー インターフェイスを模倣 TemplateField を作成します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="1c65a-160">これを確認するには、ブラウザーからこのページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="1c65a-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="1c65a-161">TemplateFields の動作と外観が同じである、エクスペリエンスを BoundFields が代わりに使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="1c65a-162">自由に、必要に応じて、テンプレートの編集インターフェイスをカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="1c65a-163">など、テキスト ボックスにすることがあります、`UnitPrice`よりも小さいボックスとしてレンダリング TemplateFields、`ProductName`テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="1c65a-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="1c65a-164">これを実現するには、テキスト ボックスの設定できます`Columns`プロパティに適切な値を使用して絶対の幅を提供または、`Width`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="1c65a-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="1c65a-165">次のチュートリアルでは、テキスト ボックスに Web コントロールの代替データ エントリを置き換えることにより、編集用のインターフェイスを完全にカスタマイズする方法がわかります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>


## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="1c65a-166">手順 3: を GridView の検証コントロールを追加する`EditItemTemplate`s</span><span class="sxs-lookup"><span data-stu-id="1c65a-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="1c65a-167">データ入力フォームを構築するときに、必須の各フィールドに入力し、指定されたすべての入力は有効で正しい形式の値であることは重要です。</span><span class="sxs-lookup"><span data-stu-id="1c65a-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="1c65a-168">ユーザーの入力が有効であることを確認するには、ASP.NET では、1 つの入力コントロールの値の検証に使用するように設計された 5 つの組み込みの検証コントロールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="1c65a-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="1c65a-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx)により値が指定されているようになります</span><span class="sxs-lookup"><span data-stu-id="1c65a-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="1c65a-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx)値を別の Web コントロールの値または定数の値を検証しますまたは、値の形式が指定されたデータ型に対して有効であることを確認。</span><span class="sxs-lookup"><span data-stu-id="1c65a-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="1c65a-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx)値が値の範囲内であることを確認</span><span class="sxs-lookup"><span data-stu-id="1c65a-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="1c65a-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx)に対して値を検証、[正規表現](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="1c65a-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="1c65a-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx)に対して、ユーザー定義のカスタム メソッドの値を検証します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="1c65a-174">これら 5 つのコントロールの詳細については、チェック アウト、[検証コントロール セクション](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx)の[ASP.NET クイック スタート チュートリアル](https://asp.net/QuickStart/aspnet/)します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="1c65a-175">このチュートリアルでの GridView と DetailsView の RequiredFieldValidator を使用する必要があります`ProductName`TemplateFields と DetailsView ので、RequiredFieldValidator `UnitPrice` TemplateField します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="1c65a-176">さらに、両方のコントロールに、CompareValidator を追加する必要があります`UnitPrice`TemplateFields 確実に価格を入力が 0 以上の値を持つしが有効な通貨の形式で表示されます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="1c65a-177">While ASP.NET 1.x がこれらの同じ 5 つの検証コントロール、ASP.NET 2.0 にはさまざまな機能強化が追加、メインの 2 つのクライアント側スクリプトの中、サポート、Internet Explorer 以外のブラウザーにページ上のパーティションの検証コントロールの機能検証グループ。</span><span class="sxs-lookup"><span data-stu-id="1c65a-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="1c65a-178">2.0 の検証コントロールの新機能に関する詳細についてを参照してください[詳細に分析する ASP.NET 2.0 の検証コントロール](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="1c65a-179">必要な検証コントロールを追加してみましょう、 `EditItemTemplate` GridView の TemplateFields で s。</span><span class="sxs-lookup"><span data-stu-id="1c65a-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="1c65a-180">これを実現するには、テンプレートの編集インターフェイスを表示する GridView のスマート タグからのテンプレートの編集リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="1c65a-181">ここでは、ドロップダウン リストから編集するには、どのテンプレートを選択できます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="1c65a-182">編集インターフェイスを拡張するので、検証コントロールを追加する必要があります、`ProductName`と`UnitPrice`の`EditItemTemplate`秒。</span><span class="sxs-lookup"><span data-stu-id="1c65a-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>


<span data-ttu-id="1c65a-183">[![ProductName と UnitPrice の EditItemTemplates を拡張する必要があります。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="1c65a-184">**図 4**: 拡張する必要があります、`ProductName`と`UnitPrice`の`EditItemTemplate`s ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>


<span data-ttu-id="1c65a-185">`ProductName` `EditItemTemplate`、テキスト ボックスの後に配置する、テンプレートの編集インターフェイスに、ツールボックスからドラッグして、RequiredFieldValidator を追加します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>


<span data-ttu-id="1c65a-186">[![ProductName 後に、RequiredFieldValidator を追加します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="1c65a-187">**図 5**: の RequiredFieldValidator を追加、 `ProductName` `EditItemTemplate` ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>


<span data-ttu-id="1c65a-188">すべての検証コントロールは、1 つの ASP.NET Web コントロールの入力を検証することで動作します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="1c65a-189">そのため、RequiredFieldValidator を追加しましたが、テキスト ボックスに対して検証する必要があることを示す必要があります、 `EditItemTemplate`; この検証コントロールの設定によって実現されます[ControlToValidate プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx)に、`ID` Web コントロールを適切なのです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="1c65a-190">テキスト ボックスは現在ではなくあまりが`ID`の`TextBox1`が、適切なものに変更してみましょう。</span><span class="sxs-lookup"><span data-stu-id="1c65a-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="1c65a-191">テンプレートのテキスト ボックスをクリックし、次に、[プロパティ] ウィンドウから次のように変更します。、`ID`から`TextBox1`に`EditProductName`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>


<span data-ttu-id="1c65a-192">[![テキスト ボックスの ID を EditProductName に変更します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="1c65a-193">**図 6**: 変更、テキスト ボックスの`ID`に`EditProductName`([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>


<span data-ttu-id="1c65a-194">RequiredFieldValidator を次に、設定`ControlToValidate`プロパティを`EditProductName`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="1c65a-195">最後に、設定、 [ErrorMessage プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx)「製品の名前を提供する必要があります」と[Text プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx)に"\*"。</span><span class="sxs-lookup"><span data-stu-id="1c65a-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="1c65a-196">`Text`プロパティの値を指定されている場合は、検証が失敗した場合、検証コントロールによって表示されるテキスト。</span><span class="sxs-lookup"><span data-stu-id="1c65a-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="1c65a-197">`ErrorMessage`場合を必要なプロパティ値が ValidationSummary コントロールによって使用される、`Text`プロパティの値を省略すると、`ErrorMessage`プロパティの値が無効な入力の検証コントロールによって表示されるテキストでも。</span><span class="sxs-lookup"><span data-stu-id="1c65a-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="1c65a-198">これら 3 つ、RequiredFieldValidator のプロパティを設定した後、画面を図 7 のようなはずです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>


<span data-ttu-id="1c65a-199">[![RequiredFieldValidator の ControlToValidate、エラー メッセージ、およびテキストのプロパティを設定します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="1c65a-200">**図 7**: 設定 RequiredFieldValidator の`ControlToValidate`、 `ErrorMessage`、および`Text`プロパティ ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>


<span data-ttu-id="1c65a-201">RequiredFieldValidator を追加すると、 `ProductName` `EditItemTemplate`残っては必要な検証を追加することはすべて、 `UnitPrice` `EditItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="1c65a-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="1c65a-202">しました、このページのため、`UnitPrice`レコードを編集する省略可能な場合に、追加、RequiredFieldValidator 必要はありません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="1c65a-203">ただし、いることを確認する CompareValidator を追加する必要があります、 `UnitPrice`、指定した場合は、0 以上でありが正しく、通貨として書式設定します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="1c65a-204">CompareValidator を追加する前に、 `UnitPrice` `EditItemTemplate`、最初からテキスト ボックスに Web コントロールの ID を変更してみましょう`TextBox2`に`EditUnitPrice`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="1c65a-205">この変更を行った後、CompareValidator の追加設定その`ControlToValidate`プロパティを`EditUnitPrice`その`ErrorMessage`「価格は 0 以上にする必要がありますし、通貨記号を含めることはできません、」プロパティとその`Text`プロパティを"\*".</span><span class="sxs-lookup"><span data-stu-id="1c65a-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="1c65a-206">いることを示す、`UnitPrice`値が 0 以上、CompareValidator を設定する必要があります[演算子プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx)に`GreaterThanEqual`その[ValueToCompare プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx)「0」をその[プロパティを入力して](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx)に`Currency`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="1c65a-207">次の宣言型構文に示す、 `UnitPrice` TemplateField の`EditItemTemplate`後、これらの変更が加えられました。</span><span class="sxs-lookup"><span data-stu-id="1c65a-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="1c65a-208">これらの変更を行った後は、ブラウザーでページを開きます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="1c65a-209">名前を省略するか、製品を編集するときに、無効な価格の値を入力しようとすると、テキスト ボックスの横にある場合は、アスタリスクが表示されます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="1c65a-210">図 8 に示すよう 19.95 ドルなどの通貨記号を含む価格の値は無効と見なされます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="1c65a-211">CompareValidator の`Currency` `Type` (コンマ、ピリオド、カルチャ設定によってなど) の桁区切り記号と先頭プラスまたはマイナス記号、できますが、*いない*通貨記号を許可します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="1c65a-212">この動作は、編集インターフェイスをレンダリング現在ユーザーに perplex 可能性があります、`UnitPrice`通貨形式を使用します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="1c65a-213">することを思い出してください、*イベントは、挿入、更新、および削除に関連付けられている*BoundField の設定のチュートリアル`DataFormatString`プロパティを`{0:c}`を通貨として書式設定するためにします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="1c65a-214">さらに、設定、`ApplyFormatInEditMode`プロパティを true に、書式設定するインターフェイスの編集の原因で、GridView、`UnitPrice`通貨として。</span><span class="sxs-lookup"><span data-stu-id="1c65a-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="1c65a-215">Visual Studio がこれらの設定の説明し、テキスト ボックスの書式設定、BoundField を TemplateField に変換するときに`Text`プロパティをデータ バインディング構文を使用して通貨として`<%# Bind("UnitPrice", "{0:c}") %>`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>


<span data-ttu-id="1c65a-216">[![無効な入力をテキスト ボックスの横にアスタリスクが表示されます。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="1c65a-217">**図 8**: An アスタリスクが表示されますへの無効な入力をテキスト ボックス ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>


<span data-ttu-id="1c65a-218">として検証機能の中では、ユーザーが許容されないレコードを編集するときに、通貨記号を手動で削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="1c65a-219">この問題を解決するのには、3 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="1c65a-220">構成、`EditItemTemplate`ように、`UnitPrice`値が通貨として書式設定されません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="1c65a-221">CompareValidator の削除と、正しく書式設定された通貨値を正しくチェック RegularExpressionValidator に置き換えることによって、通貨記号を入力するユーザーを許可します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="1c65a-222">ここでの問題は、通貨値を検証する正規表現が美しいことし、カルチャ設定を反映する場合は、コードの記述になります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="1c65a-223">検証コントロールを完全に削除し、gridview のサーバー側の検証ロジックに依存`RowUpdating`イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="1c65a-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="1c65a-224">この演習ではオプション 1 を使用します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="1c65a-225">現在、`UnitPrice`は、テキスト ボックス内のデータ バインディング式のための通貨として書式設定、 `EditItemTemplate`:`<%# Bind("UnitPrice", "{0:c}") %>`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="1c65a-226">バインド ステートメントを変更する`Bind("UnitPrice", "{0:n2}")`、有効桁数 2 桁の番号として、結果の書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="1c65a-227">これ行う宣言型構文またはから DataBindings の編集リンクをクリックして直接、 `EditUnitPrice`  テキスト ボックスに、 `UnitPrice` TemplateField の`EditItemTemplate`(図 9 および 10 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>


<span data-ttu-id="1c65a-228">[![テキスト ボックスの DataBindings の編集リンクをクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="1c65a-229">**図 9**: テキスト ボックスの [DataBindings の編集リンクをクリックします ([フルサイズの画像を表示する] をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>


<span data-ttu-id="1c65a-230">[![バインド ステートメントで、書式指定子を指定します。](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="1c65a-231">**図 10**: 指定の書式指定子、`Bind`ステートメント ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>


<span data-ttu-id="1c65a-232">この変更によりは、編集インターフェイスで書式設定された料金は、グループ区切り記号としてコンマと、小数点区切り文字としてピリオドが含まれていますが、通貨記号をオフのままです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="1c65a-233">`UnitPrice` `EditItemTemplate` RequiredFieldValidator、ポストバックを発生したりして、更新ロジックを開始する許可が含まれていません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="1c65a-234">ただし、`RowUpdating`からコピーされたイベント ハンドラー、 *、イベントに関連付けられている挿入、更新、および削除の確認*チュートリアルにあるプログラムによるチェックが含まれています、`UnitPrice`提供されます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="1c65a-235">このロジックを削除するには、そのまま使用でお気軽に、または、RequiredFieldValidator への追加、 `UnitPrice` `EditItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>


## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="1c65a-236">手順 4: 集約データ エントリの問題</span><span class="sxs-lookup"><span data-stu-id="1c65a-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="1c65a-237">ASP.NET には、5 つの検証コントロールのほか、 [ValidationSummary コントロール](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx)が表示される、`ErrorMessage`の無効なデータが検出された検証コントロール。</span><span class="sxs-lookup"><span data-stu-id="1c65a-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="1c65a-238">この概要データは、モーダル、クライアント側のメッセージ ボックスから web ページ上のテキストとして表示できます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="1c65a-239">クライアント側のメッセージ ボックス検証問題の集計を含めるには、このチュートリアルを強化しましょう。</span><span class="sxs-lookup"><span data-stu-id="1c65a-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="1c65a-240">これを実現するには、ツールボックスからデザイナーに ValidationSummary コントロールをドラッグします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="1c65a-241">検証コントロールの位置は関係ありません本当にのみ、メッセージ ボックスとしての概要を表示するように構成していきますので。</span><span class="sxs-lookup"><span data-stu-id="1c65a-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="1c65a-242">コントロールを追加すると、次のように設定します。 その[ShowSummary プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx)に`false`とその[ShowMessageBox プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx)に`true`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="1c65a-243">これにより、検証エラーは、クライアント側のメッセージ ボックスにまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>


<span data-ttu-id="1c65a-244">[![検証エラーがクライアント側のメッセージ ボックスにまとめます](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="1c65a-245">**図 11**: クライアント側のメッセージ ボックスで、検証エラーをまとめます ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>


## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="1c65a-246">手順 5: DetailsView への検証コントロールの追加`InsertItemTemplate`</span><span class="sxs-lookup"><span data-stu-id="1c65a-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="1c65a-247">このチュートリアルでは、DetailsView の挿入インターフェイスに検証コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="1c65a-248">DetailsView のテンプレートに検証コントロールを追加するプロセスは、手順 3 で説明されているのと同じです。そのため、この手順では、タスクによって breeze します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="1c65a-249">GridView のと同様`EditItemTemplate`s、ことをお勧めする名前を変更する、 `ID` 、あまりからテキスト ボックスの s`TextBox1`と`TextBox2`に`InsertProductName`と`InsertUnitPrice`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="1c65a-250">RequiredFieldValidator を追加、 `ProductName` `InsertItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="1c65a-251">設定、`ControlToValidate`を`ID`テンプレートでは、テキスト ボックスの`Text`プロパティを"\*"とその`ErrorMessage`プロパティを「製品の名前を指定する必要があります」。</span><span class="sxs-lookup"><span data-stu-id="1c65a-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="1c65a-252">`UnitPrice`の RequiredFieldValidator を追加する新しいレコードを追加するときに、このページに必要な、 `UnitPrice` `InsertItemTemplate`設定、その`ControlToValidate`、`Text`と`ErrorMessage`プロパティ適切にします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="1c65a-253">CompareValidator を最後に、追加、 `UnitPrice` `InsertItemTemplate`同様に、構成、 `ControlToValidate`、 `Text`、 `ErrorMessage`、 `Type`、 `Operator`、および`ValueToCompare`を使用したときと同じようにプロパティ`UnitPrice`の gridview の CompareValidator`EditItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="1c65a-254">これらの検証コントロールを追加すると、新しい成果物の名前が指定されていない場合、またはその価格が負の数値である場合は、システムに追加または不正にフォーマットすることはできません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>


<span data-ttu-id="1c65a-255">[![DetailsView の挿入インターフェイスに検証ロジックが追加されました](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="1c65a-256">**図 12**: DetailsView の挿入インターフェイスに検証ロジックが追加されました ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>


## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="1c65a-257">手順 6: 検証グループに、検証コントロールをパーティション分割</span><span class="sxs-lookup"><span data-stu-id="1c65a-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="1c65a-258">ページは、2 つの異なる論理的に検証コントロールのセットで構成されます。 インターフェイスの編集、GridView に対応すると、DetailsView に対応するインターフェイスを挿入するのです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="1c65a-259">ポストバックが発生した場合、既定*すべて*ページの検証コントロールがチェックされます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="1c65a-260">ただし、レコードを編集するときに、検証する検証コントロールを DetailsView の挿入インターフェイスのほしくありません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="1c65a-261">図 13 ユーザーが、製品を完全に有効な値を編集するときに、現在のジレンマを示していますを挿入のインターフェイスで、名前と価格値は空であるために、クリックして更新プログラムが、検証エラーを発生します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>


<span data-ttu-id="1c65a-262">[![挿入インターフェイスの検証コントロールを起動すると、製品を更新](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="1c65a-263">**図 13**: を挿入するインターフェイスの検証コントロールを起動すると、製品を更新 ([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>


<span data-ttu-id="1c65a-264">ASP.NET 2.0 の検証コントロールは、検証を使用してグループに分割することができます、`ValidationGroup`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="1c65a-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="1c65a-265">グループ内の検証コントロールのセットを関連付けるを設定するだけの`ValidationGroup`プロパティを同じ値にします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="1c65a-266">このチュートリアルでは、設定、`ValidationGroup`を GridView の TemplateFields の検証コントロールのプロパティ`EditValidationControls`と`ValidationGroup`に DetailsView の TemplateFields のプロパティ`InsertValidationControls`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="1c65a-267">これらの変更は、宣言型マークアップで直接実行できますか、デザイナーの使用時のプロパティ ウィンドウからインターフェイスのテンプレートを編集します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="1c65a-268">だけでなく、検証コントロール、ボタン、および ASP.NET 2.0 のボタンに関連するコントロールを含めることも、`ValidationGroup`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="1c65a-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="1c65a-269">検証グループの検証コントロールの有効性チェックは同じボタンでポストバックが発生した場合にのみ`ValidationGroup`プロパティの設定。</span><span class="sxs-lookup"><span data-stu-id="1c65a-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="1c65a-270">DetailsView の [挿入] ボタンをトリガーするためになど、 `InsertValidationControls` CommandField を設定する必要があります。 検証グループ`ValidationGroup`プロパティを`InsertValidationControls`(図 14 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="1c65a-271">GridView をさらに、設定 [commandfield] の`ValidationGroup`プロパティを`EditValidationControls`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>


<span data-ttu-id="1c65a-272">[![セット、DetailsView の InsertValidationControls CommandField の ValidationGroup プロパティ](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="1c65a-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="1c65a-273">**図 14**: DetailsView の設定 [commandfield] の`ValidationGroup`プロパティを`InsertValidationControls`([フルサイズの画像を表示する をクリックします](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))。</span><span class="sxs-lookup"><span data-stu-id="1c65a-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>


<span data-ttu-id="1c65a-274">これらの変更後の GridView、DetailsView TemplateFields とコマンドに次のようななる必要があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="1c65a-275">DetailsView の TemplateFields および CommandField</span><span class="sxs-lookup"><span data-stu-id="1c65a-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="1c65a-276">GridView の CommandField と TemplateFields</span><span class="sxs-lookup"><span data-stu-id="1c65a-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="1c65a-277">この時点で、編集に固有の検証コントロール起動 GridView の Update ボタンがクリックされたときのみと insert 固有の検証コントロールの火災 DetailsView の挿入 ボタンをクリックすると、図 13 で強調表示されている問題を解決する場合にのみです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="1c65a-278">ただし、この変更により、ValidationSummary コントロールは表示されなくなります無効なデータを入力するときにします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="1c65a-279">ValidationSummary コントロールも含まれています、`ValidationGroup`プロパティと、そのグループの検証でそれらの検証コントロールの概要情報は表示のみ。</span><span class="sxs-lookup"><span data-stu-id="1c65a-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="1c65a-280">そのため、このページのいずれかで 2 つの検証コントロールに必要があります、`InsertValidationControls`検証グループの 1 つと`EditValidationControls`します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="1c65a-281">これにより、チュートリアルが完了しました。</span><span class="sxs-lookup"><span data-stu-id="1c65a-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="1c65a-282">まとめ</span><span class="sxs-lookup"><span data-stu-id="1c65a-282">Summary</span></span>

<span data-ttu-id="1c65a-283">BoundFields には、両方の挿入と編集インターフェイスを提供できます、インターフェイス、カスタマイズできません。</span><span class="sxs-lookup"><span data-stu-id="1c65a-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="1c65a-284">一般的には、編集および挿入インターフェイスに必要な入力の有効な形式で入力をことを確認する検証コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="1c65a-285">これを実現する TemplateFields に、BoundFields を変換して、検証コントロールを適切なテンプレートに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1c65a-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="1c65a-286">このチュートリアルでは拡張の例では、 *、イベントに関連付けられている挿入、更新、および削除の確認*インターフェイスと GridView の挿入のチュートリアルでは、両方、DetailsView に検証コントロールを追加インターフェイスを編集します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="1c65a-287">さらに、ValidationSummary コントロールを使用する検証の概要情報を表示する方法と、ページの検証コントロールを個別の検証グループに分割する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="1c65a-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="1c65a-288">このチュートリアルで説明したように TemplateFields を含める検証コントロールを編集および挿入インターフェイスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="1c65a-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="1c65a-289">TemplateFields 拡張することも、追加の入力 Web コントロールを含める方が適切な Web コントロールによって置き換えられるテキスト ボックスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="1c65a-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="1c65a-290">次のチュートリアルでは、外部キーを編集するときに最適なデータ バインド DropDownList コントロールと TextBox コントロールを置換する方法を見ていきます (など`CategoryID`または`SupplierID`で、`Products`テーブル)。</span><span class="sxs-lookup"><span data-stu-id="1c65a-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="1c65a-291">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="1c65a-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1c65a-292">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="1c65a-292">About the Author</span></span>

<span data-ttu-id="1c65a-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="1c65a-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1c65a-294">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1c65a-295">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1c65a-296">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1c65a-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1c65a-297">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1c65a-298">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="1c65a-298">Special Thanks To</span></span>

<span data-ttu-id="1c65a-299">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="1c65a-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1c65a-300">このチュートリアルでは、潜在顧客レビュー担当者は、Liz Shulok と Zack Jones でした。</span><span class="sxs-lookup"><span data-stu-id="1c65a-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="1c65a-301">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="1c65a-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1c65a-302">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1c65a-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1c65a-303">[前へ](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [次へ](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1c65a-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
