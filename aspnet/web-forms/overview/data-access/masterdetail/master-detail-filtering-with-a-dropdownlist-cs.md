---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: マスター/詳細の DropDownList (c#) でフィルター処理 |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、DropDownList コントロールと GridView で選択した項目の詳細のマスター レコードを表示する方法がわかります。
ms.author: aspnetcontent
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: c2bf3156840c378e554eef3a0629705c059f2777
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37833343"
---
<a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="773cb-103">マスター/詳細の DropDownList (c#) でフィルター処理</span><span class="sxs-lookup"><span data-stu-id="773cb-103">Master/Detail Filtering With a DropDownList (C#)</span></span>
====================
<span data-ttu-id="773cb-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="773cb-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="773cb-105">[サンプル アプリをダウンロード](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe)または[PDF のダウンロード](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="773cb-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="773cb-106">このチュートリアルでは、DropDownList コントロールと GridView で選択した項目の詳細のマスター レコードを表示する方法がわかります。</span><span class="sxs-lookup"><span data-stu-id="773cb-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>


## <a name="introduction"></a><span data-ttu-id="773cb-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="773cb-107">Introduction</span></span>

<span data-ttu-id="773cb-108">レポートの一般的な種類は、*マスター/詳細レポート*、「マスター」のレコードのいくつかのセットを表示することによって、レポートを開始するのです。</span><span class="sxs-lookup"><span data-stu-id="773cb-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="773cb-109">ユーザーしにドリルダウンできますいずれかのマスター レコード、それによってそのマスター レコードの"の詳細を表示します"</span><span class="sxs-lookup"><span data-stu-id="773cb-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="773cb-110">マスター/詳細レポートなどの一対多のリレーションシップを視覚化するための最適な選択肢はすべてのカテゴリを示すと、特定のカテゴリを選択して、関連付けられている製品を表示するユーザーを報告します。</span><span class="sxs-lookup"><span data-stu-id="773cb-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="773cb-111">また、マスター/詳細レポートは、(多数の列があるもの)、特に「ワイド」テーブルから詳細な情報を表示する場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="773cb-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="773cb-112">たとえば、マスター/詳細レポートの「マスター」のレベルは、データベースにだけ、製品名と単位、製品の価格を表示する場合があり、その他の製品のフィールドの表示は、特定の製品のドリル ダウン (カテゴリ、供給業者、単位あたりの数量となどの)。</span><span class="sxs-lookup"><span data-stu-id="773cb-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="773cb-113">マスター/詳細レポートの実装されている多くの方法はあります。</span><span class="sxs-lookup"><span data-stu-id="773cb-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="773cb-114">これと次の 3 つのチュートリアルでは、マスター/詳細レポートのさまざまなことについて説明します。</span><span class="sxs-lookup"><span data-stu-id="773cb-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="773cb-115">このチュートリアルでのマスター レコードを表示する方法を見ていきます、 [DropDownList コントロール](https://msdn.microsoft.com/library/dtx91y0z.aspx)と GridView で選択した項目の詳細。</span><span class="sxs-lookup"><span data-stu-id="773cb-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="773cb-116">具体的には、このチュートリアルのマスター/詳細レポートには、カテゴリおよび製品の情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="773cb-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="773cb-117">手順 1: DropDownList でカテゴリを表示します。</span><span class="sxs-lookup"><span data-stu-id="773cb-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="773cb-118">マスター/詳細レポートは、選択されたリスト項目の製品が表示されると、DropDownList でカテゴリを一覧の後半で、GridView でページ。</span><span class="sxs-lookup"><span data-stu-id="773cb-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="773cb-119">前に、最初のタスクは、DropDownList に表示されるカテゴリにし、です。</span><span class="sxs-lookup"><span data-stu-id="773cb-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="773cb-120">開く、`FilterByDropDownList.aspx`ページで、`Filtering`フォルダーは、ページのデザイナーには、ツールボックスから DropDownList にドラッグし、設定、`ID`プロパティを`Categories`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="773cb-121">次に、DropDownList のスマート タグからのデータ ソースの選択のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="773cb-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="773cb-122">これにより、データ ソース構成ウィザードが表示されます。</span><span class="sxs-lookup"><span data-stu-id="773cb-122">This will display the Data Source Configuration wizard.</span></span>


<span data-ttu-id="773cb-123">[![DropDownList のデータ ソースを指定します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="773cb-124">**図 1**: DropDownList のデータ ソースを指定 ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>


<span data-ttu-id="773cb-125">という名前の新しい ObjectDataSource を追加することも`CategoriesDataSource`を呼び出す、`CategoriesBLL`クラスの`GetCategories()`メソッド。</span><span class="sxs-lookup"><span data-stu-id="773cb-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>


<span data-ttu-id="773cb-126">[![CategoriesDataSource という名前の新しい ObjectDataSource を追加します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="773cb-127">**図 2**: 新しい ObjectDataSource という追加`CategoriesDataSource`([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>


<span data-ttu-id="773cb-128">[![CategoriesBLL クラスを使用します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="773cb-129">**図 3**: 使用する、`CategoriesBLL`クラス ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>


<span data-ttu-id="773cb-130">[![ObjectDataSource GetCategories() メソッドを使用して構成します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="773cb-131">**図 4**: 構成に使用する ObjectDataSource、`GetCategories()`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>


<span data-ttu-id="773cb-132">DropDownList にどのようなデータ ソースのフィールドを表示するかを指定する必要があります ObjectDataSource を構成した後は、リスト項目の値として関連付けられている 1 つがあります。</span><span class="sxs-lookup"><span data-stu-id="773cb-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="773cb-133">`CategoryName`フィールドとして表示し、`CategoryID`各リスト項目の値として。</span><span class="sxs-lookup"><span data-stu-id="773cb-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="773cb-134">[![値として使用 CategoryID と CategoryName フィールド DropDownList 表示があります。](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="773cb-135">**図 5**: DropDownList の表示、`CategoryName`フィールド`CategoryID`値として ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>


<span data-ttu-id="773cb-136">この時点でのレコードが設定された DropDownList コントロールがある、`Categories`テーブル (すべて約 6 秒間で行われます)。</span><span class="sxs-lookup"><span data-stu-id="773cb-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="773cb-137">図 6 は、ブラウザーで表示したときにこれまで、進行状況を示します。</span><span class="sxs-lookup"><span data-stu-id="773cb-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="773cb-138">[![ドロップダウンには、現在のカテゴリが表示されます。](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="773cb-139">**図 6**: A ドロップダウン リスト、現在のカテゴリ ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>


## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="773cb-140">手順 2: 製品の GridView を追加します。</span><span class="sxs-lookup"><span data-stu-id="773cb-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="773cb-141">マスター/詳細レポートの最後のステップでは、選択したカテゴリに関連付けられている製品を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="773cb-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="773cb-142">これを実現するには、ページに GridView を追加という名前の新しい ObjectDataSource を作成して`productsDataSource`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="773cb-143">`productsDataSource`コントロールからそのデータの数を減らします、`ProductsBLL`クラスの`GetProductsByCategoryID(categoryID)`メソッド。</span><span class="sxs-lookup"><span data-stu-id="773cb-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="773cb-144">[![GetProductsByCategoryID(categoryID) メソッドを選択します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="773cb-145">**図 7**: 選択、`GetProductsByCategoryID(categoryID)`メソッド ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>


<span data-ttu-id="773cb-146">メソッドの値のこと、ObjectDataSource ウィザードでこのメソッドを選択すると、入力*`categoryID`* パラメーター。</span><span class="sxs-lookup"><span data-stu-id="773cb-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="773cb-147">選択した値を使用する`categories`DropDownList 項目コントロールを処理するパラメーターのソースを設定する`Categories`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="773cb-148">[![CategoryID パラメーター カテゴリの DropDownList の値に設定されます。](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="773cb-149">**図 8**: 設定、 *`categoryID`* パラメーターの値を`Categories`DropDownList ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>


<span data-ttu-id="773cb-150">ブラウザーで進行状況を確認する時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="773cb-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="773cb-151">これらの製品が選択したカテゴリに属している場合、最初のページにアクセスして、(飲み物) が表示されます (図 9) が、データが更新されない、DropDownList を変更します。</span><span class="sxs-lookup"><span data-stu-id="773cb-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="773cb-152">これは、ため、更新する GridView ポストバックが発生したときです。</span><span class="sxs-lookup"><span data-stu-id="773cb-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="773cb-153">これを行うには、2 つのオプション (うちどちらが必要、コードを記述) があります。</span><span class="sxs-lookup"><span data-stu-id="773cb-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="773cb-154">**設定カテゴリ DropDownList の**[AutoPostBack プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**を True にします。**</span><span class="sxs-lookup"><span data-stu-id="773cb-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="773cb-155">(これを行う DropDownList のスマート タグで AutoPostBack を有効にするオプションをオンにしています。)DropDownList の選択されるたびに、ポストバックがこれによりトリガー、ユーザーが項目を変更します。</span><span class="sxs-lookup"><span data-stu-id="773cb-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="773cb-156">そのため、次のドロップダウン リストから新しいカテゴリを選択すると、ポストバックが発生したりして GridView が新しく選択したカテゴリの製品で更新されます。</span><span class="sxs-lookup"><span data-stu-id="773cb-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="773cb-157">(これは、このチュートリアルで使用したアプローチです)。</span><span class="sxs-lookup"><span data-stu-id="773cb-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="773cb-158">**DropDownList の横にあるボタンの Web コントロールを追加します。**</span><span class="sxs-lookup"><span data-stu-id="773cb-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="773cb-159">設定の`Text`などプロパティを更新します。</span><span class="sxs-lookup"><span data-stu-id="773cb-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="773cb-160">この方法により、ユーザーは、新しいカテゴリを選択し、ボタンをクリックする必要があります。</span><span class="sxs-lookup"><span data-stu-id="773cb-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="773cb-161">ボタンをクリックして、ポストバックを発生させるし、選択したカテゴリの製品を一覧表示する GridView を更新します。</span><span class="sxs-lookup"><span data-stu-id="773cb-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="773cb-162">図 9 と 10 は、マスター/詳細レポートの動作を示しています。</span><span class="sxs-lookup"><span data-stu-id="773cb-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="773cb-163">[![まず、ページにアクセスして、飲み物の製品が表示されます。](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="773cb-164">**図 9**: 最初のページにアクセスして、飲み物の製品が表示されます ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>


<span data-ttu-id="773cb-165">[![新しい製品 (生成) を選択すると、自動的にポストバックが発生する、GridView を更新しています](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="773cb-166">**図 10**: GridView を更新、ポストバックを発生させる (生成) の新しい製品を選択すると、自動的に ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="773cb-167">「- カテゴリを選択--」リスト アイテムを追加します。</span><span class="sxs-lookup"><span data-stu-id="773cb-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="773cb-168">最初にアクセスすると、 `FilterByDropDownList.aspx` DropDownList の最初のリスト項目 (飲み物) は、gridview、飲料を示す、既定で選択したカテゴリのページします。</span><span class="sxs-lookup"><span data-stu-id="773cb-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="773cb-169">代わりに、DropDownList 項目が次に必要な場合があります、最初のカテゴリの製品の表示を選択するのではなく、「- カテゴリを選択--」ようなものは述べています。</span><span class="sxs-lookup"><span data-stu-id="773cb-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="773cb-170">DropDownList に新しいリスト アイテムを追加する [プロパティ] ウィンドウに移動し、省略記号をクリックして、`Items`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="773cb-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="773cb-171">新しいリスト アイテムを追加、 `Text` 「--カテゴリを選択--」および`Value``-1`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>


<span data-ttu-id="773cb-172">[![追加-カテゴリ - リスト項目の選択](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="773cb-173">**図 11**: 追加---カテゴリを選択するには、リスト項目 ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>


<span data-ttu-id="773cb-174">または、DropDownList に次のマークアップを追加して、リスト項目を追加できます。</span><span class="sxs-lookup"><span data-stu-id="773cb-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="773cb-175">さらに、DropDownList コントロールを設定する必要があります`AppendDataBoundItems`ObjectDataSource からカテゴリが、DropDownList にバインドされている場合場合、手動で追加したリスト項目が上書きされますので true `AppendDataBoundItems` True はありません。</span><span class="sxs-lookup"><span data-stu-id="773cb-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>


![AppendDataBoundItems プロパティを True に設定します。](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="773cb-177">**図 12**: 設定、`AppendDataBoundItems`プロパティを True に</span><span class="sxs-lookup"><span data-stu-id="773cb-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="773cb-178">これらの変更後「--カテゴリを選択--」オプションが選択されている最初のページにアクセスすると、製品は表示されません。</span><span class="sxs-lookup"><span data-stu-id="773cb-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>


<span data-ttu-id="773cb-179">[![初期ページの読み込み時の製品は表示されません。](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="773cb-180">**図 13**: で、初期ページ読み込みいいえ製品が表示されます ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>


<span data-ttu-id="773cb-181">製品が表示されないときに「- カテゴリを選択--」リスト アイテムが選択されているため、理由は、値は`-1`でデータベースに製品がないと、`CategoryID`の`-1`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="773cb-182">これは、この時点で完了し、目的の動作です。 場合、</span><span class="sxs-lookup"><span data-stu-id="773cb-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="773cb-183">ただし、表示する場合*すべて*のカテゴリの「- カテゴリを選択--」リスト アイテムを選択するに戻り、`ProductsBLL`クラスし、カスタマイズ、`GetProductsByCategoryID(categoryID)`メソッドを呼び出すため、`GetProducts()`メソッド場合渡されたで*`categoryID`* パラメーターが 0 未満。</span><span class="sxs-lookup"><span data-stu-id="773cb-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="773cb-184">ここで使用される手法はすべての仕入先の表示に使用したアプローチに似ていますに戻り、[宣言パラメーター](../basic-reporting/declarative-parameters-cs.md)チュートリアル, が、この例の値を使用して`-1`をすべてのレコードがあることを示します対照的に取得`null`します。</span><span class="sxs-lookup"><span data-stu-id="773cb-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="773cb-185">これは、ため、 *`categoryID`* のパラメーター、`GetProductsByCategoryID(categoryID)`メソッドには、渡される整数値としては、宣言型のパラメーターのチュートリアルでは、文字列入力パラメーターに渡していた。</span><span class="sxs-lookup"><span data-stu-id="773cb-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="773cb-186">図 14 のスクリーン ショットを示しています。 `FilterByDropDownList.aspx` "--カテゴリを選択--"オプションを選択するとします。</span><span class="sxs-lookup"><span data-stu-id="773cb-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="773cb-187">ここでは、既定では、すべての製品が表示され、ユーザーは、特定のカテゴリを選択して、表示を絞り込むことができます。</span><span class="sxs-lookup"><span data-stu-id="773cb-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>


<span data-ttu-id="773cb-188">[![一覧で、既定ではすべての製品](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="773cb-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="773cb-189">**図 14**: 一覧で、既定ではすべての製品 ([フルサイズの画像を表示する をクリックします](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))。</span><span class="sxs-lookup"><span data-stu-id="773cb-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>


## <a name="summary"></a><span data-ttu-id="773cb-190">まとめ</span><span class="sxs-lookup"><span data-stu-id="773cb-190">Summary</span></span>

<span data-ttu-id="773cb-191">階層的に関連するデータを表示するには、マスター/詳細レポートから、ユーザーは、階層の最上位からデータを参照するために開始し、詳細にドリル ダウンを使用してデータを表示する多くの場合、役立ちます。</span><span class="sxs-lookup"><span data-stu-id="773cb-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="773cb-192">このチュートリアルでは、選択したカテゴリの製品を示す単純なマスター/詳細レポートの作成について確認しました。</span><span class="sxs-lookup"><span data-stu-id="773cb-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="773cb-193">これは、カテゴリと、選択したカテゴリに属する製品の GridView の一覧については、DropDownList を使用して行われました。</span><span class="sxs-lookup"><span data-stu-id="773cb-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="773cb-194">[次のチュートリアル](master-detail-filtering-with-two-dropdownlists-cs.md)みましょう DropDownList インターフェイスの 1 つ手順さらに、2 つの Dropdownlist を使用します。</span><span class="sxs-lookup"><span data-stu-id="773cb-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="773cb-195">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="773cb-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="773cb-196">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="773cb-196">About the Author</span></span>

<span data-ttu-id="773cb-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="773cb-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="773cb-198">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="773cb-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="773cb-199">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="773cb-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="773cb-200">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="773cb-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="773cb-201">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="773cb-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="773cb-202">次へ</span><span class="sxs-lookup"><span data-stu-id="773cb-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
