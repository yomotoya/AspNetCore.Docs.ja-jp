---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
title: (C#) のデータに基づいて DataList と Repeater を書式設定 |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは手順を説明しますと書式設定関数を使用して、DataList と Repeater コントロールの外観の形式を設定する方法の例を示します.
ms.author: aspnetcontent
ms.date: 09/13/2006
ms.assetid: 83e3d759-82b8-41e6-8d62-f0f4b3edec41
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
msc.type: authoredcontent
ms.openlocfilehash: cfb23a65c288ed155625a1f8a4d7db1330ab2407
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37840259"
---
<a name="formatting-the-datalist-and-repeater-based-upon-data-c"></a><span data-ttu-id="c4fa7-103">DataList と Repeater データ (c#) に基づいて書式設定</span><span class="sxs-lookup"><span data-stu-id="c4fa7-103">Formatting the DataList and Repeater Based Upon Data (C#)</span></span>
====================
<span data-ttu-id="c4fa7-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c4fa7-105">[サンプル アプリをダウンロード](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe)または[PDF のダウンロード](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span></span>

> <span data-ttu-id="c4fa7-106">このチュートリアルで、テンプレート内で書式設定関数を使用して、またはデータ バインド イベントを処理することによって、DataList と Repeater コントロールの外観の形式を設定する方法の例を手順説明します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>


## <a name="introduction"></a><span data-ttu-id="c4fa7-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="c4fa7-107">Introduction</span></span>

<span data-ttu-id="c4fa7-108">前のチュートリアルで説明したように、DataList は、さまざまな外観に影響を与えるスタイル関連プロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="c4fa7-109">具体的には、DataList s に CSS クラスの既定値を割り当てる方法を説明しました`HeaderStyle`、 `ItemStyle`、 `AlternatingItemStyle`、および`SelectedItemStyle`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="c4fa7-110">これら 4 つのプロパティに加えて、DataList にはなどが含まれます、多数他のスタイル関連プロパティには`Font`、 `ForeColor`、 `BackColor`、および`BorderWidth`があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="c4fa7-111">Repeater コントロールでは、任意のスタイル関連プロパティは含まれません。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="c4fa7-112">このようなスタイルの設定は、Repeater のテンプレートのマークアップ内で直接行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="c4fa7-113">多くの場合、ただし、データの書式設定方法によって異なります、データ自体。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="c4fa7-114">たとえば、製品の一覧を表示するときにする可能性は、中止または強調したい場合に、明るい灰色のフォントの色で製品情報を表示、`UnitsInStock`値の場合は 0。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="c4fa7-115">前のチュートリアルで説明したように、GridView、DetailsView と FormView データ データに基づいて外観は書式設定に 2 つの点があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="c4fa7-116">**`DataBound`イベント**、適切なイベント ハンドラーを作成`DataBound`データが各項目にバインドされた後に発生するイベント (が GridView に、`RowDataBound`イベント; DataList と Repeater は、 `ItemDataBound`イベント)。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="c4fa7-117">イベントのハンドラー、バインドされたデータだけを検証することができ、行われた意思決定を書式設定します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="c4fa7-118">この方法で調べる、[カスタム書式設定時にデータ](../custom-formatting/custom-formatting-based-upon-data-cs.md)チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial.</span></span>
- <span data-ttu-id="c4fa7-119">**テンプレート内の関数の書式設定**を DetailsView または GridView コントロールまたはテンプレート FormView コントロールで TemplateFields を使用する場合、書式設定関数 ASP.NET ページの分離コード クラス、ビジネス ロジック層、またはそのいずれかに追加できますweb アプリケーションからアクセスできるその他のクラス ライブラリです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="c4fa7-120">この書式設定関数は、入力パラメーターの任意の数を受け入れることができますが、テンプレートに表示するために HTML を返す必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="c4fa7-121">書式設定関数がで解説した最初の[GridView コントロールで TemplateFields を使用して](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md)チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span>

<span data-ttu-id="c4fa7-122">これらの手法を書式設定の両方は DataList と Repeater コントロールで使用できます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="c4fa7-123">このチュートリアルでは、両方のコントロールの両方の手法を使用する例を手順説明します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="c4fa7-124">使用して、`ItemDataBound`イベント ハンドラー</span><span class="sxs-lookup"><span data-stu-id="c4fa7-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="c4fa7-125">データは、DataList にバインドされるデータ ソース コントロールからまたは s のコントロールにデータをプログラムで割り当てることで場合`DataSource`プロパティと呼び出し元の`DataBind()`メソッド、DataList の`DataBinding`イベントが発生、列挙、データ ソースデータの各レコードは、DataList にバインドされます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="c4fa7-126">DataList の各データ ソースのレコードの作成、 [ `DataListItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx)オブジェクトを現在のレコードにバインドします。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="c4fa7-127">このプロセス中には、DataList は、2 つのイベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="c4fa7-128">**`ItemCreated`** 後に起動、`DataListItem`が作成されました</span><span class="sxs-lookup"><span data-stu-id="c4fa7-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="c4fa7-129">**`ItemDataBound`** 現在のレコードにバインドされた後に発生します `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="c4fa7-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="c4fa7-130">次の手順では、DataList コントロール用のデータ バインド プロセスを説明します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="c4fa7-131">DataList s [ `DataBinding`イベント](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx)起動</span><span class="sxs-lookup"><span data-stu-id="c4fa7-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="c4fa7-132">データは、DataList にバインドされます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="c4fa7-133">データ ソース内の各レコード</span><span class="sxs-lookup"><span data-stu-id="c4fa7-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="c4fa7-134">作成、`DataListItem`オブジェクト</span><span class="sxs-lookup"><span data-stu-id="c4fa7-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="c4fa7-135">火災、 [ `ItemCreated`イベント](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="c4fa7-136">レコードにバインドします `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="c4fa7-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="c4fa7-137">火災、 [ `ItemDataBound`イベント](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="c4fa7-138">追加、`DataListItem`を`Items`コレクション</span><span class="sxs-lookup"><span data-stu-id="c4fa7-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="c4fa7-139">Repeater コントロールにデータをバインドする場合は、正確な同じ一連の手順に従って進行します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="c4fa7-140">唯一の違いは、の代わりに`DataListItem`Repeater を使用して作成されるインスタンス、 [ `RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)秒。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="c4fa7-141">鋭い読者は、一連のデータにバインドする GridView と DataList と Repeater とデータにバインドされたときに発生する手順の間のわずかな異常で気付いたかもしれません。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="c4fa7-142">GridView を発生させるデータ バインド プロセスの末尾に、`DataBound`イベントです。 ただし、このようなイベントのある DataList でも、Repeater コントロール。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="c4fa7-143">前と後のレベルのイベント ハンドラーのパターンの普及が前に、ASP.NET 1.x タイム フレームに戻り、DataList と Repeater コントロールが作成されたためにです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>


<span data-ttu-id="c4fa7-144">データに基づく書式設定するための 1 つのオプションは、GridView のイベント ハンドラーを作成するように、`ItemDataBound`イベント。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="c4fa7-145">このイベント ハンドラーにバインドされていただけデータを検査すると、`DataListItem`または`RepeaterItem`し、必要に応じて、コントロールの書式に影響します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="c4fa7-146">DataList コントロールの書式設定の変更項目全体の実装を使用して、`DataListItem`を含む、標準のスタイル関連プロパティを`Font`、 `ForeColor`、 `BackColor`、`CssClass`など。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="c4fa7-147">DataList のテンプレート内の特定の Web コントロールの書式設定に影響を与えるには、プログラムからアクセスして、それらの Web コントロールのスタイルを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="c4fa7-148">このチェックインを実行する方法を説明しました、*カスタム書式設定時にデータ*チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="c4fa7-149">などの Repeater コントロール、`RepeaterItem`クラスのスタイル関連プロパティがありませんにそのため、すべてのスタイル関連の変更が行われた、`RepeaterItem`で、`ItemDataBound`へのアクセスと、Web コントロール内の更新プログラムを使用してイベント ハンドラーを実行する必要があります。テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="c4fa7-150">以降、 `ItemDataBound` DataList と Repeater は事実上同じで、この例では、DataList を使用して集中する手法の書式を設定します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="c4fa7-151">手順 1: DataList で製品情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="c4fa7-152">書式設定に関する気にし、前に let s はまず、DataList を使用して、製品情報を表示するページを作成します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="c4fa7-153">[前のチュートリアル](displaying-data-with-the-datalist-and-repeater-controls-cs.md)DataList を作成しましたが`ItemTemplate`各製品の名前、カテゴリ、供給業者、単位、および価格ごとの数が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-cs.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="c4fa7-154">このチュートリアルでは、ここで、この機能を繰り返して s を使用できます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="c4fa7-155">これを実現する、DataList、およびその ObjectDataSource を最初から再作成できますか、またはそれらのコントロールを前のチュートリアルで作成したページからコピーできます (`Basics.aspx`) このチュートリアルでは、ページに貼り付けます (`Formatting.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="c4fa7-156">DataList コントロールと ObjectDataSource 機能をレプリケートしているときと`Basics.aspx`に`Formatting.aspx`、DataList s を変更する少し`ID`プロパティから`DataList1`にわかりやすい`ItemDataBoundFormattingExample`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="c4fa7-157">次に、ブラウザーで、DataList を表示します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="c4fa7-158">図 1 は、各製品の唯一の書式設定の違いは、背景色が交互に設定することです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>


<span data-ttu-id="c4fa7-159">[![DataList コントロールでは、製品が表示されています。](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="c4fa7-160">**図 1**: DataList コントロールでは、製品が表示されている ([フルサイズの画像を表示する をクリックします](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span></span>


<span data-ttu-id="c4fa7-161">このチュートリアルでは、s のすべての製品 20.00 ドル未満の価格には、両方の名前になり、単位価格黄色で強調表示するように、DataList を書式設定を使用できます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="c4fa7-162">手順 2: ItemDataBound イベント ハンドラー内のデータの値をプログラムで判断します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="c4fa7-163">20.00 ドルが下の価格の製品だけがある、適用されるカスタム書式設定、ために、各製品の価格を決定できる必要があります予定です。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="c4fa7-164">DataList にデータをバインドするときに、DataList そのデータ ソース内のレコードの列挙し、レコードごとに、作成、`DataListItem`インスタンスをバインドするデータ ソースのレコード、`DataListItem`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="c4fa7-165">現在、特定のレコードの後にデータがバインドされて`DataListItem`オブジェクト、DataList の`ItemDataBound`イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="c4fa7-166">現在のデータ値を検査するには、このイベントのイベント ハンドラーを作成します`DataListItem`と、それらの値に基づいて、書式設定の変更のために必要なことです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="c4fa7-167">作成、 `ItemDataBound` DataList のイベントと、次のコードを追加。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample1.cs)]

<span data-ttu-id="c4fa7-168">概念と DataList s の背後にあるセマンティクスを while`ItemDataBound`イベント ハンドラーは、GridView s で使用されるものと同じ`RowDataBound`内のイベント ハンドラー、*カスタム書式設定時にデータ*チュートリアルでは、構文は異なります微妙に。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="c4fa7-169">ときに、`ItemDataBound`イベントの起動、`DataListItem`だけを使用して対応するイベント ハンドラーに渡されるデータにバインドされた`e.Item`(の代わりに`e.Row`GridView s と同様に、`RowDataBound`イベント ハンドラー)。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="c4fa7-170">DataList s`ItemDataBound`を発生させるイベント ハンドラー*各*行のヘッダー行、フッター行、および行の区切り記号を含む、DataList に追加します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="c4fa7-171">ただし、製品の情報は、データ行にはバインドのみです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="c4fa7-172">そのためを使用する場合、`ItemDataBound`最初ことを確認する必要があります、データを検査するイベントは、DataList にバインドするデータ項目で作業しています。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="c4fa7-173">これは、チェックを実行できます、 `DataListItem` s [ `ItemType`プロパティ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx)のいずれかである[次の 8 つの値](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="c4fa7-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="c4fa7-174">両方`Item`と`AlternatingItem``DataListItem`の構成 DataList のデータ項目。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="c4fa7-175">操作すると仮定しています、`Item`または`AlternatingItem`、実際にアクセスして`ProductsRow`インスタンスに現在バインドされていた`DataListItem`。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="c4fa7-176">`DataListItem` S [ `DataItem`プロパティ](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx)への参照が含まれています、`DataRowView`オブジェクト、`Row`プロパティは、実際への参照を提供`ProductsRow`オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="c4fa7-177">次に、確認、`ProductsRow`インスタンス`UnitPrice`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="c4fa7-178">Products テーブル s 以降`UnitPrice`フィールドでは、`NULL`へのアクセスを試みる前に、値、`UnitPrice`プロパティまずを確認するかどうかは、`NULL`値を使用して、`IsUnitPriceNull()`メソッド。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="c4fa7-179">場合、`UnitPrice`値でない`NULL`、続いてチェックかどうかを 20.00 ドル未満の秒。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="c4fa7-180">20.00 ドルで実際の場合、カスタムの書式を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="c4fa7-181">手順 3: 製品の名前と価格を強調表示</span><span class="sxs-lookup"><span data-stu-id="c4fa7-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="c4fa7-182">製品の価格が 20.00 ドル未満であるがわかれば、残っているはその名前と価格を強調表示します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="c4fa7-183">これを実現する必要がありますまずプログラムで参照のラベル コントロール、`ItemTemplate`価格と製品の名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="c4fa7-184">次に、黄色の背景を表示するようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="c4fa7-185">この書式設定情報は、ラベルを直接変更して適用できる`BackColor`プロパティ (`LabelID.BackColor = Color.Yellow`)。 理想的には、カスケード スタイル シートで、すべてのディスプレイに関連する問題を表す必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="c4fa7-186">実際で定義されている目的の書式を提供するスタイル シートが既にある`Styles.css`  -  `AffordablePriceEmphasis`、これが作成されで説明した、*カスタム書式設定時にデータ*チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="c4fa7-187">書式設定を適用する 2 つのラベルの Web コントロール設定`CssClass`プロパティ`AffordablePriceEmphasis`次のコードに示すように。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample2.cs)]

<span data-ttu-id="c4fa7-188">`ItemDataBound`イベント ハンドラーが完了すると、再アクセス、`Formatting.aspx`ブラウザーでページ。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="c4fa7-189">図 2 に示すように、20.00 ドルで、価格がこれらの製品は、名前と強調表示されている価格があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>


<span data-ttu-id="c4fa7-190">[![これらの製品よりも小さい 20.00 ドルが強調表示されます。](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span></span>

<span data-ttu-id="c4fa7-191">**図 2**: これらの製品よりも小さい 20.00 ドルが強調表示されます ([フルサイズの画像を表示する をクリックします](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c4fa7-192">DataList は、HTML としてレンダリングされるので`<table>`その`DataListItem`インスタンス全体の項目に特定のスタイルを適用する設定可能なスタイルに関連するプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="c4fa7-193">強調表示したい場合など、*全体*の価格が 20.00 ドル未満の場合は黄項目、でしたに置き換えられましたラベルを参照するコードを設定し、`CssClass`次のコード行を持つプロパティ: `e.Item.CssClass = "AffordablePriceEmphasis"`(図 3 を参照してください。)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>


<span data-ttu-id="c4fa7-194">`RepeaterItem`ただし、don t で、Repeater コントロールを構成するは、このようなスタイルのレベル プロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="c4fa7-195">図 2 で行ったのと同じよう、Repeater のテンプレート内での Web コントロールにスタイル プロパティのアプリケーションがそのため、必要に、Repeater のカスタム書式設定を適用します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>


<span data-ttu-id="c4fa7-196">[![製品 20.00 ドルの製品項目全体が強調表示されます。](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span></span>

<span data-ttu-id="c4fa7-197">**図 3**: 20.00 ドルで製品の製品項目を全体が強調表示されます ([フルサイズの画像を表示する をクリックします](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span></span>


## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="c4fa7-198">テンプレート内で書式設定関数を使用</span><span class="sxs-lookup"><span data-stu-id="c4fa7-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="c4fa7-199">*GridView コントロールで TemplateFields を使用して*GridView s の行にバインドされているチュートリアル GridView TemplateField 内で書式設定関数を使用して、データに基づくカスタム書式設定を適用する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="c4fa7-200">書式設定関数は、テンプレートから呼び出すことができますし、その場所に出力する HTML を返すメソッドです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="c4fa7-201">書式設定関数の ASP.NET ページの分離コード クラスに存在できるまたは内のクラス ファイルに集中できます、`App_Code`フォルダーまたは別のクラス ライブラリ プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="c4fa7-202">ASP.NET ページの分離コード クラスから書式設定関数の移動は、複数の ASP.NET ページで、またはその他の ASP.NET web アプリケーションでは、同じ書式設定関数を使用する予定の場合に最適です。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="c4fa7-203">書式設定関数を示すためには、let s がある場合は、s の製品名の横にある [DISCONTINUED] のテキストを含める製品情報、s が廃止されました。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="c4fa7-204">また、価格の強調表示されている黄色場合のある let s、20.00 ドル未満の秒 (で行ったよう、`ItemDataBound`イベント ハンドラーの例) 場合は、価格は、20.00 ドルが、s が高いことができますに実際の料金が表示されないまたは見積もり価格の代わりに、テキストをしてください。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="c4fa7-205">図 4 は、商品の書式指定規則が適用されたこれらの一覧のスクリーン ショットを示します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>


<span data-ttu-id="c4fa7-206">[![高価な製品は、価格はテキストを呼び出して見積もり価格にしてください、置き換えられます。](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span></span>

<span data-ttu-id="c4fa7-207">**図 4**: 高価な製品には、価格は、テキストを呼び出して見積もり価格にしてくださいに置き換えられます ([フルサイズの画像を表示する をクリックします](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span></span>


## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="c4fa7-208">手順 1: 作成、書式設定関数</span><span class="sxs-lookup"><span data-stu-id="c4fa7-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="c4fa7-209">この例では 2 つの書式設定関数、別および必要な場合は、[DISCONTINUED] のテキストと共に、製品名を表示する必要がある場合は、いずれかを強調表示されている価格を表示する、s よりも小さい、20.00 ドルまたはテキスト、それ以外の場合価格の見積もりを呼び出してください。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="c4fa7-210">ASP.NET ページの分離コード クラスでこれらの関数を作成し、名前を付けます s をできるように`DisplayProductNameAndDiscontinuedStatus`と`DisplayPrice`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="c4fa7-211">両方のメソッドを文字列として表示するために HTML を返す必要があるし、マークする必要があります`Protected`(または`Public`) ために、ASP.NET ページの宣言構文の部分から呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="c4fa7-212">これら 2 つのメソッドのコードに従います。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-212">The code for these two methods follows:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample3.cs)]

<span data-ttu-id="c4fa7-213">なお、`DisplayProductNameAndDiscontinuedStatus`メソッドの値を受け取ります、`productName`と`discontinued`一方にデータが、スカラー値としてフィールド、`DisplayPrice`メソッドは、`ProductsRow`インスタンス (ではなく`unitPrice`スカラー値)。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="c4fa7-214">どちらの方法は機能します。ただし、データベースを含むことのできるスカラー値の書式設定関数が機能している`NULL`値 (など`UnitPrice`どちら;`ProductName`も`Discontinued`許可`NULL`値)、特別な注意が必要で、これらの処理スカラー入力します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="c4fa7-215">具体的には、入力パラメーターが型でなければなりません`Object`受信した値がある可能性がありますので、`DBNull`必要なデータ型ではなくインスタンス。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="c4fa7-216">さらに、受信した値がデータベースかどうかを確認するチェックを行う必要があります`NULL`値。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="c4fa7-217">つまり、必要な場合、 `DisplayPrice` d スカラー値として、価格をそのまま使用するメソッドは、次のコードを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample4.cs)]

<span data-ttu-id="c4fa7-218">なお、`unitPrice`型の入力パラメーターが`Object`場合を確認するために、条件付きステートメントが変更されたと`unitPrice`は`DBNull`かどうか。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="c4fa7-219">さらに、以降、`unitPrice`入力パラメーターとして渡される、`Object`が 10 進値にキャストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="c4fa7-220">手順 2: は、DataList の ItemTemplate から書式設定関数を呼び出す</span><span class="sxs-lookup"><span data-stu-id="c4fa7-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="c4fa7-221">ASP.NET ページ分離コード クラスに追加の書式設定関数で残っているはこれらの関数から DataList s を書式指定を呼び出す`ItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="c4fa7-222">テンプレートから書式設定関数を呼び出すには、データ バインド構文内の関数呼び出しを配置します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample5.aspx)]

<span data-ttu-id="c4fa7-223">DataList s で`ItemTemplate`、 `ProductNameLabel` Label Web コントロールが現在表示されて、s の製品名を割り当てることによってその`Text`プロパティ、結果の`<%# Eval("ProductName") %>`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="c4fa7-224">必要な場合の名前とテキスト [DISCONTINUED] を表示させる代わりに ように宣言の構文を更新、`Text`プロパティ値の`DisplayProductNameAndDiscontinuedStatus`メソッド。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="c4fa7-225">使用して、提供が中止された値と製品の名前で渡す必要がありますこれを行うときに、`Eval("columnName")`構文。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="c4fa7-226">`Eval` 型の値を返します`Object`が、`DisplayProductNameAndDiscontinuedStatus`メソッド型の入力パラメーターが必要ですが`String`と`Boolean`。 したがって、によって返される値をキャストする必要があります、`Eval`次のように想定される入力パラメーターの型、メソッド。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample6.aspx)]

<span data-ttu-id="c4fa7-227">価格を表示するには、単に設定できます、`UnitPriceLabel`ラベル s`Text`プロパティによって返される値を`DisplayPrice`メソッド、製品の名前を表示するためでしたし、テキストを [廃止] と同様です。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="c4fa7-228">ただしではなく、`UnitPrice`スカラーの入力パラメーターとして代わりに渡す全体で`ProductsRow`インスタンス。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample7.aspx)]

<span data-ttu-id="c4fa7-229">配置で書式設定関数を呼び出し、ブラウザーで、進行状況を表示するのには少しをを。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="c4fa7-230">[DISCONTINUED] のテキストを含む提供が中止された製品と図 5 のようになります、画面として見積もり価格の呼び出しのテキストと、コストを超える 20.00 ドルの価格を持つこれらの製品が置き換えします。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>


<span data-ttu-id="c4fa7-231">[![高価な製品は、価格はテキストを呼び出して見積もり価格にしてください、置き換えられます。](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span></span>

<span data-ttu-id="c4fa7-232">**図 5**: 高価な製品には、価格は、テキストを呼び出して見積もり価格にしてくださいに置き換えられます ([フルサイズの画像を表示する をクリックします](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span></span>


## <a name="summary"></a><span data-ttu-id="c4fa7-233">まとめ</span><span class="sxs-lookup"><span data-stu-id="c4fa7-233">Summary</span></span>

<span data-ttu-id="c4fa7-234">データに基づいて DataList または Repeater コントロールの内容を書式設定できます 2 つの手法を使用します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="c4fa7-235">最初の手法は、イベント ハンドラーを作成する、`ItemDataBound`を新しいデータ ソース内の各レコードがバインドされているように発生するイベント、`DataListItem`または`RepeaterItem`します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="c4fa7-236">`ItemDataBound`イベント ハンドラー、現在の項目のデータを検証およびテンプレートのか、内容に適用できる書式設定し、`DataListItem`全体、項目自体への秒。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="c4fa7-237">または、カスタム書式設定は、関数の書式設定を実現できます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="c4fa7-238">書式設定の関数は、DataList から呼び出すことができるメソッドまたは Repeater のテンプレートをその場所に出力する HTML を返します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="c4fa7-239">多くの場合、書式設定関数によって返される HTML は、現在の項目にバインドされている値によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="c4fa7-240">これらの値は、スカラー値または項目にバインドされているオブジェクト全体を渡すことによって、書式設定の関数に渡すことができます (など、`ProductsRow`インスタンス)。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="c4fa7-241">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="c4fa7-242">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="c4fa7-242">About the Author</span></span>

<span data-ttu-id="c4fa7-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c4fa7-244">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c4fa7-245">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="c4fa7-246">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="c4fa7-247">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="c4fa7-248">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-248">Special Thanks To</span></span>

<span data-ttu-id="c4fa7-249">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c4fa7-250">このチュートリアルでは、潜在顧客レビュー担当者は、Yaakov Ellis、Randy Schmidt、Liz Shulok でした。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="c4fa7-251">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="c4fa7-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c4fa7-252">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c4fa7-253">[前へ](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
> [次へ](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c4fa7-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span></span>
