---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: ターゲット環境の展開のプロパティの構成 |Microsoft Docs
author: jrjlee
description: このトピックでは、特定のターゲット環境にサンプルの連絡先マネージャー ソリューションをデプロイするために環境固有のプロパティを構成する方法について説明しています.
ms.author: aspnetcontent
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 205a60ee8695f84054bf2139baa3eeb88728d28a
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37817766"
---
<a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="90132-103">ターゲット環境の展開のプロパティを構成します。</span><span class="sxs-lookup"><span data-stu-id="90132-103">Configuring Deployment Properties for a Target Environment</span></span>
====================
<span data-ttu-id="90132-104">によって[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="90132-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="90132-105">PDF のダウンロード</span><span class="sxs-lookup"><span data-stu-id="90132-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="90132-106">このトピックでは、特定のターゲット環境にサンプルの連絡先マネージャー ソリューションをデプロイするために環境固有のプロパティを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="90132-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>


<span data-ttu-id="90132-107">このトピックでは、一連の Fabrikam, Inc. という架空の会社のエンタープライズ展開の要件に基づいているチュートリアルの一部を形成します。このチュートリアル シリーズは、サンプル ソリューションを使用して&#x2014;、 [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)ソリューション&#x2014;現実的なレベルの ASP.NET MVC 3 アプリケーション、Windows の通信など、複雑な web アプリケーションを表すFoundation (WCF) サービスとデータベース プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="90132-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="90132-108">これらのチュートリアルの中核の展開方法が分割のプロジェクト ファイルの方法で説明されているに基づいて[ビルド プロセスを理解する](../web-deployment-in-the-enterprise/understanding-the-build-process.md)、によって制御されるビルド プロセスでは、2 つのプロジェクト ファイル&#x2014;1 つを格納しています。すべての変換先の環境と環境固有のビルドと配置の設定を含む 1 つに適用される手順をビルドします。</span><span class="sxs-lookup"><span data-stu-id="90132-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="90132-109">ビルド時に、環境固有のプロジェクト ファイルは、ビルド手順の完全なセットを形成する環境に依存しないプロジェクト ファイルにマージされます。</span><span class="sxs-lookup"><span data-stu-id="90132-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="90132-110">プロセスの概要</span><span class="sxs-lookup"><span data-stu-id="90132-110">Process Overview</span></span>

<span data-ttu-id="90132-111">連絡先マネージャー ソリューション ビルドしてデプロイに使用するプロジェクト ファイルは、2 つの物理ファイルに分かれています。</span><span class="sxs-lookup"><span data-stu-id="90132-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="90132-112">ユニバーサルを含む 1 つのビルド設定および処理手順 (、 *Publish.proj*ファイル)。</span><span class="sxs-lookup"><span data-stu-id="90132-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="90132-113">特定の環境を含む 1 つのビルド設定 (*Env Dev.proj*、 *Env Stage.proj*など)。</span><span class="sxs-lookup"><span data-stu-id="90132-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="90132-114">ビルド時に、適切な環境に固有のプロジェクト ファイルは、universal にマージ*Publish.proj*ビルド手順の完全なセットを形成するファイル。</span><span class="sxs-lookup"><span data-stu-id="90132-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="90132-115">作成または展開シナリオについて説明する設定と環境固有のプロジェクト ファイルをカスタマイズすることで、特定の展開先環境へのデプロイを構成できます。</span><span class="sxs-lookup"><span data-stu-id="90132-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="90132-116">これらの値の多くは、移行先環境を構成する方法によって決まります&#x2014;Web Deployment Agent サービス (リモート エージェント) または Web 配置ハンドラーを使用して、ターゲット web サーバーが構成されているかどうかに具体的には、します。</span><span class="sxs-lookup"><span data-stu-id="90132-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="90132-117">これらの方法の詳細については、および独自の環境の適切なアプローチの選択に関するガイダンスについては、「 [Web 配置を右側のアプローチを選択](choosing-the-right-approach-to-web-deployment.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="90132-118">[Contact Manager シナリオ](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md)2 つの環境に固有のプロジェクト ファイルが必要です。</span><span class="sxs-lookup"><span data-stu-id="90132-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="90132-119">開発者のテスト環境への配置 (*Env Dev.proj*)。</span><span class="sxs-lookup"><span data-stu-id="90132-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="90132-120">開発者のテスト環境が」の説明に従って、リモート エージェントを使用してリモート展開を受け入れるように構成されている[シナリオ: Web 展開のテスト環境を構成する](scenario-configuring-a-test-environment-for-web-deployment.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="90132-121">このファイルは、エンドポイント アドレスだけでなく、接続文字列などのサービス エンドポイントの場所に固有の設定は、リモート エージェントを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90132-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="90132-122">ステージング環境への配置 (*Env Stage.proj*)。</span><span class="sxs-lookup"><span data-stu-id="90132-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="90132-123">ステージング環境が」の説明に従って、Web 配置ハンドラーを使用してリモート展開を受け入れるように構成されている[シナリオ: Web デプロイのステージング環境を構成する](scenario-configuring-a-staging-environment-for-web-deployment.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="90132-124">このファイルは、Web 配置ハンドラーのエンドポイント アドレスと接続文字列のような場所に固有の設定を提供し、エンドポイントをサービスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="90132-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="90132-125">Web パッケージ自体の内容の環境に固有のプロジェクト ファイルで構成設定に影響しないことを確認することが重要&#x2014;制御代わりに、パッケージの展開方法と、どのようなパラメーター値は、パッケージが提供されます抽出されます。</span><span class="sxs-lookup"><span data-stu-id="90132-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="90132-126">」の説明に従って、手動で web パッケージを運用環境にインポートする[シナリオ: Web 展開、運用環境を構成する](scenario-configuring-a-production-environment-for-web-deployment.md)と[Web パッケージを手動でインストール](../web-deployment-in-the-enterprise/manually-installing-web-packages.md)、設定かは関係ありませんので、環境固有のプロジェクト ファイルでときに使用したパッケージを生成します。</span><span class="sxs-lookup"><span data-stu-id="90132-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="90132-127">パッケージをインポートするときに、接続文字列と、サービス エンドポイントなどの任意のパラメーター化された値を要求インターネット インフォメーション サービス (IIS) マネージャーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="90132-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="90132-128">連絡先マネージャー ソリューションを独自のターゲット環境をデプロイするには、か、このファイルをカスタマイズまたはこれをテンプレートとして使用でき、独自のファイルを作成できます。</span><span class="sxs-lookup"><span data-stu-id="90132-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="90132-129">**連絡先マネージャー ソリューションを環境に固有の展開設定を構成するには**</span><span class="sxs-lookup"><span data-stu-id="90132-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="90132-130">Visual Studio 2010 では、ContactManager WCF ソリューションを開きます。</span><span class="sxs-lookup"><span data-stu-id="90132-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="90132-131">**ソリューション エクスプ ローラー**ウィンドウで、展開、**発行**フォルダー、展開、 **EnvConfig**フォルダー、およびダブルクリック**Env Dev.proj**.</span><span class="sxs-lookup"><span data-stu-id="90132-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="90132-132">プロパティ値を置き換える、 *Env Dev.proj*テスト環境の正しい値を持つファイル。</span><span class="sxs-lookup"><span data-stu-id="90132-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="90132-133">この手順を次の表では、これらの各プロパティの詳細を提供します。</span><span class="sxs-lookup"><span data-stu-id="90132-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="90132-134">作業内容を保存し、閉じます、 *Env Dev.proj*ファイル。</span><span class="sxs-lookup"><span data-stu-id="90132-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="90132-135">適切な展開のプロパティ を選択</span><span class="sxs-lookup"><span data-stu-id="90132-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="90132-136">この表は、サンプルの環境に固有のプロジェクト ファイル内の各プロパティの目的は、 *Env Dev.proj*を指定する必要があります値のいくつかの指針を示します。</span><span class="sxs-lookup"><span data-stu-id="90132-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>


|                                                        <span data-ttu-id="90132-137">プロパティ名</span><span class="sxs-lookup"><span data-stu-id="90132-137">Property Name</span></span>                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="90132-138">説明</span><span class="sxs-lookup"><span data-stu-id="90132-138">Details</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <span data-ttu-id="90132-139"><strong>MSDeployComputerName</strong>変換先の web サーバーまたはサービス エンドポイントの名前。</span><span class="sxs-lookup"><span data-stu-id="90132-139"><strong>MSDeployComputerName</strong> The name of the destination web server or service endpoint.</span></span>               |                                                                                                                                                                                                                                              <span data-ttu-id="90132-140">移行先の web サーバーでリモート エージェント サービスをデプロイする場合は、対象コンピューターの名前を指定できます (たとえば、 <strong>TESTWEB1</strong>または<strong>TESTWEB1.fabrikam.net</strong>)、またはリモートを指定できますエージェントのエンドポイント (たとえば、 `http://TESTWEB1/MSDEPLOYAGENTSERVICE`)。</span><span class="sxs-lookup"><span data-stu-id="90132-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, <strong>TESTWEB1</strong> or <strong>TESTWEB1.fabrikam.net</strong>), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="90132-141">展開いずれの場合も同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="90132-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="90132-142">移行先の web サーバーで Web 配置ハンドラーに配置する場合、サービス エンドポイントを指定し、クエリ文字列パラメーターとして、IIS web サイトの名前を含めます (たとえば、 `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`)。</span><span class="sxs-lookup"><span data-stu-id="90132-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span>                                                                                                                                                                                                                                              |
|         <span data-ttu-id="90132-143"><strong>MSDeployAuth</strong> Web Deploy がリモート コンピューターへの認証に使用するメソッド。</span><span class="sxs-lookup"><span data-stu-id="90132-143"><strong>MSDeployAuth</strong> The method that Web Deploy should use to authenticate to the remote computer.</span></span>          |                                                                                                                                                                                                                          <span data-ttu-id="90132-144">これに設定する必要があります<strong>NTLM</strong>または<strong>基本的な</strong>します。</span><span class="sxs-lookup"><span data-stu-id="90132-144">This should be set to <strong>NTLM</strong> or <strong>Basic</strong>.</span></span> <span data-ttu-id="90132-145">通常、使用する<strong>NTLM</strong>リモート エージェント サービスをデプロイする場合と<strong>基本的な</strong>Web 配置ハンドラーに配置する場合。</span><span class="sxs-lookup"><span data-stu-id="90132-145">Typically, you'll use <strong>NTLM</strong> if you're deploying to the remote agent service and <strong>Basic</strong> if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="90132-146">基本認証を使用する場合は、ユーザー名とパスワード (Web 配置) IIS Web 配置ツールの配置を実行するために権限を借用する必要がありますを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="90132-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="90132-147">この例ではこれらの値を通じて提供されます、 <strong>MSDeployUsername</strong>と<strong>MSDeployPassword</strong>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="90132-147">In this example, these values are provided through the <strong>MSDeployUsername</strong> and <strong>MSDeployPassword</strong> properties.</span></span> <span data-ttu-id="90132-148">NTLM 認証を使用する場合は、これらのプロパティを省略するか、空白のままにできます。</span><span class="sxs-lookup"><span data-stu-id="90132-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="90132-149"><strong>MSDeployUsername</strong>基本認証を使用する場合は、Web Deploy はこのアカウントを使用、リモート コンピューター上です。</span><span class="sxs-lookup"><span data-stu-id="90132-149"><strong>MSDeployUsername</strong> If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="90132-150">これは、形式をとる必要があります<em>ドメイン</em>\*ユーザー名 * (たとえば、 <strong>FABRIKAM\matt</strong>)。</span><span class="sxs-lookup"><span data-stu-id="90132-150">This should take the form <em>DOMAIN</em>\*username* (for example, <strong>FABRIKAM\matt</strong>).</span></span> <span data-ttu-id="90132-151">この値は基本認証を指定する場合にのみ使用します。</span><span class="sxs-lookup"><span data-stu-id="90132-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="90132-152">NTLM 認証を使用する場合、プロパティを省略できます。</span><span class="sxs-lookup"><span data-stu-id="90132-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="90132-153">値が指定されている場合は、これは無視されます。</span><span class="sxs-lookup"><span data-stu-id="90132-153">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="90132-154"><strong>MSDeployPassword</strong>基本認証を使用する場合 Web Deploy はパスワードを使用してこのリモート コンピューター。</span><span class="sxs-lookup"><span data-stu-id="90132-154"><strong>MSDeployPassword</strong> If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="90132-155">これで指定したユーザー アカウントのパスワード、 <strong>MSDeployUsername</strong>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="90132-155">This is the password for the user account you specified in the <strong>MSDeployUsername</strong> property.</span></span> <span data-ttu-id="90132-156">この値は基本認証を指定する場合にのみ使用します。</span><span class="sxs-lookup"><span data-stu-id="90132-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="90132-157">NTLM 認証を使用する場合、プロパティを省略できます。</span><span class="sxs-lookup"><span data-stu-id="90132-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="90132-158">値が指定されている場合は、これは無視されます。</span><span class="sxs-lookup"><span data-stu-id="90132-158">If a value is supplied, it will be ignored.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <span data-ttu-id="90132-159"><strong>ContactManagerIisPath</strong> Contact Manager MVC アプリケーションを配置する、IIS パス。</span><span class="sxs-lookup"><span data-stu-id="90132-159"><strong>ContactManagerIisPath</strong> The IIS path on which you want to deploy the Contact Manager MVC application.</span></span>     |                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="90132-160">IIS マネージャーで、フォームに表示されるパスを指定する必要がありますこれ [<em>IIS web サイト名</em>]/[<em>web</em><em>アプリケーション名</em>]。</span><span class="sxs-lookup"><span data-stu-id="90132-160">This should be the path as it appears in IIS Manager, in the form [<em>IIS website name</em>]/[<em>web</em><em>application name</em>].</span></span> <span data-ttu-id="90132-161">IIS web サイトが、アプリケーションを展開する前に存在する必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="90132-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="90132-162">たとえば、DemoSite という名前の IIS の web サイトを作成した場合は、DemoSite/ContactManager として MVC アプリケーション用の IIS パスを指定できます。</span><span class="sxs-lookup"><span data-stu-id="90132-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span>                                                                                                                                                                                                                                                                                                                                                                        |
|   <span data-ttu-id="90132-163"><strong>ContactManagerServiceIisPath</strong> Contact Manager WCF サービスをデプロイする、IIS パス。</span><span class="sxs-lookup"><span data-stu-id="90132-163"><strong>ContactManagerServiceIisPath</strong> The IIS path on which you want to deploy the Contact Manager WCF service.</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="90132-164">たとえば、DemoSite という名前の IIS の web サイトを作成した場合は、として WCF サービスの IIS パスを指定でした<strong>DemoSite/ContactManagerService</strong>します。</span><span class="sxs-lookup"><span data-stu-id="90132-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as <strong>DemoSite/ContactManagerService</strong>.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <span data-ttu-id="90132-165"><strong>ContactManagerTargetUrl</strong> WCF サービスに到達できる URL。</span><span class="sxs-lookup"><span data-stu-id="90132-165"><strong>ContactManagerTargetUrl</strong> The URL at which the WCF service can be reached.</span></span>                   |                                                                                                                                                     <span data-ttu-id="90132-166">これは、形式になります [<em>IIS web サイトのルート URL</em>]/[<em>サービス アプリケーション名</em>]/[<em>サービス エンドポイント</em>]。</span><span class="sxs-lookup"><span data-stu-id="90132-166">This will take the form [<em>IIS website root URL</em>]/[<em>service application name</em>]/[<em>service endpoint</em>].</span></span> <span data-ttu-id="90132-167">たとえばをポート 85 で IIS の web サイトを作成した場合、URL が具現化する`http://localhost:85/ContactManagerService/ContactService.svc`します。</span><span class="sxs-lookup"><span data-stu-id="90132-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="90132-168">MVC アプリケーションと WCF サービスが同じサーバーに展開されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="90132-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="90132-169">その結果、この URL は、のみがインストールされているコンピューターからアクセスします。</span><span class="sxs-lookup"><span data-stu-id="90132-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="90132-170">このため、URL で localhost または、IP アドレスではなく、コンピューター名またはホスト ヘッダーを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="90132-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="90132-171">コンピューター名またはホスト ヘッダーを使用する場合、[ループバック チェック](https://go.microsoft.com/?linkid=9805131)IIS でのセキュリティ機能が URL をブロックし、返す可能性があります、 <strong>HTTP 401.1 - 権限がありません</strong>エラー。</span><span class="sxs-lookup"><span data-stu-id="90132-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an <strong>HTTP 401.1 - Unauthorized</strong> error.</span></span>                                                                                                                                                     |
|                  <span data-ttu-id="90132-172"><strong>CmDatabaseConnectionString</strong>データベース サーバーの接続文字列。</span><span class="sxs-lookup"><span data-stu-id="90132-172"><strong>CmDatabaseConnectionString</strong> The connection string for the database server.</span></span>                  | <span data-ttu-id="90132-173">接続文字列は、両方の資格情報が、VSDBCMD をデータベース サーバーに接続し、データベースと web サーバーのアプリケーション プールが、データベース サーバーに接続し、データベースとの対話に使用する資格情報の作成に使用するを決定します。</span><span class="sxs-lookup"><span data-stu-id="90132-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="90132-174">基本的がある 2 つの選択肢は、ここです。</span><span class="sxs-lookup"><span data-stu-id="90132-174">Essentially you have two choices here.</span></span> <span data-ttu-id="90132-175">指定できます<strong>Integrated Security = true</strong>、統合 Windows 認証を使用する場合:<strong>データ ソース = TESTDB1; Integrated Security = true</strong>を使用して、データベースを作成、ここでは、実行可能ファイル、VSDBCMD を実行しているユーザーおよびアプリケーションの資格情報は、web サーバーのコンピューター アカウントの id を使用してデータベースにアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="90132-175">You can specify <strong>Integrated Security=true</strong>, in which case integrated Windows authentication is used: <strong>Data Source=TESTDB1;Integrated Security=true</strong> In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="90132-176">ユーザー名と SQL Server アカウントのパスワードを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="90132-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="90132-177">VSDBCMD は、データベースを作成して、データベースと対話するアプリケーション プールの両方に SQL Server 資格情報を使用するこの例では、:<strong>データ ソース = TESTDB1;ユーザー Id = ASqlUser;パスワード = Pa$ $w0rd</strong>のチュートリアルでは、このトピックでは、統合 Windows 認証を使用することを前提としています。</span><span class="sxs-lookup"><span data-stu-id="90132-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: <strong>Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd</strong> The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
|        <span data-ttu-id="90132-178"><strong>CmTargetDatabase</strong>名前に付ける、データベースのデータベース サーバーで作成します。</span><span class="sxs-lookup"><span data-stu-id="90132-178"><strong>CmTargetDatabase</strong> The name you want to give the database you'll create on the database server.</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="90132-179">ここで指定する値は、VSDBCMD コマンドにパラメーターとして追加されます。</span><span class="sxs-lookup"><span data-stu-id="90132-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="90132-180">Web サーバー上のアプリケーション プールは、データベースとの対話に使用できる完全な接続文字列を作成することも使用されます。</span><span class="sxs-lookup"><span data-stu-id="90132-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

<span data-ttu-id="90132-181">これらの例では、特定の展開シナリオのこれらのプロパティを構成する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="90132-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="90132-182">例 1&#x2014;リモート エージェントのサービスへのデプロイ</span><span class="sxs-lookup"><span data-stu-id="90132-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="90132-183">この例では、次のように記述されています。</span><span class="sxs-lookup"><span data-stu-id="90132-183">In this example:</span></span>

- <span data-ttu-id="90132-184">TESTWEB1 でリモート エージェントのサービスにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="90132-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="90132-185">Web 配置で NTLM 認証を使用してを指示しています。</span><span class="sxs-lookup"><span data-stu-id="90132-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="90132-186">Web Deploy は、Microsoft Build Engine (MSBuild) を呼び出すために使用する資格情報を使用して実行されます。</span><span class="sxs-lookup"><span data-stu-id="90132-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="90132-187">デプロイに統合認証を使用している、 **ContactManager**データベース TESTDB1 をします。</span><span class="sxs-lookup"><span data-stu-id="90132-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="90132-188">MSBuild を呼び出すために使用する資格情報を使用して、データベースが配置されます。</span><span class="sxs-lookup"><span data-stu-id="90132-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]


### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="90132-189">例 2&#x2014;web 配置ハンドラーのエンドポイントをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="90132-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="90132-190">この例では、次のように記述されています。</span><span class="sxs-lookup"><span data-stu-id="90132-190">In this example:</span></span>

- <span data-ttu-id="90132-191">STAGEWEB1 の Web 配置ハンドラーのサービス エンドポイントにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="90132-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="90132-192">Web 配置で基本認証を使用してを指示しています。</span><span class="sxs-lookup"><span data-stu-id="90132-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="90132-193">Web 配置でリモート コンピューターで FABRIKAM\stagingdeployer アカウントを借用する必要があることを指定しています。</span><span class="sxs-lookup"><span data-stu-id="90132-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="90132-194">デプロイには、SQL Server 認証を使用している、 **ContactManager** STAGEDB1 データベース。</span><span class="sxs-lookup"><span data-stu-id="90132-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]


## <a name="conclusion"></a><span data-ttu-id="90132-195">まとめ</span><span class="sxs-lookup"><span data-stu-id="90132-195">Conclusion</span></span>

<span data-ttu-id="90132-196">この時点では、ビルドし、1 つまたは複数の展開先環境に連絡先マネージャー ソリューションをデプロイするプロジェクト ファイルが完全に構成します。</span><span class="sxs-lookup"><span data-stu-id="90132-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="90132-197">これらのプロジェクト ファイルを使用して、シングル ステップ、反復可能な展開プロセスの一環として、実行する必要があります、 *Publish.proj* MSBuild を使用してファイルし、環境固有のプロジェクト ファイルの場所をパラメーターとして渡します。</span><span class="sxs-lookup"><span data-stu-id="90132-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="90132-198">これは、さまざまな方法で行うことができます。</span><span class="sxs-lookup"><span data-stu-id="90132-198">You can do this in various ways:</span></span>

- <span data-ttu-id="90132-199">MSBuild やカスタム プロジェクト ファイルの概要の概要については、次を参照してください。[プロジェクト ファイルを理解する](../web-deployment-in-the-enterprise/understanding-the-project-file.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="90132-200">カスタムのプロジェクト ファイルを実行する MSBuild コマンドを考案する方法については、次を参照してください。 [Web パッケージを展開する](../web-deployment-in-the-enterprise/deploying-web-packages.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="90132-201">シングル ステップで反復可能な展開でコマンド ファイルに、MSBuild コマンドを組み込む方法については、次を参照してください。[の作成と展開コマンド ファイルを実行している](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="90132-202">チーム ビルドから、カスタムのプロジェクト ファイルを実行する方法については、次を参照してください。[ビルド定義をサポートする展開を作成する](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md)します。</span><span class="sxs-lookup"><span data-stu-id="90132-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="90132-203">前へ</span><span class="sxs-lookup"><span data-stu-id="90132-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
