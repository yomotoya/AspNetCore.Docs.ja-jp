---
uid: web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
title: フォーム認証 (c#) の概要 |Microsoft Docs
author: rick-anderson
description: カスタム ルートを作成します。
ms.author: aspnetcontent
ms.date: 01/14/2008
ms.assetid: de2d65b9-aadc-42ba-abe1-4e87e66521a0
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
msc.type: authoredcontent
ms.openlocfilehash: a523e3c6ff79e7445813e2ef50eabc5b55d00144
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37814447"
---
<a name="an-overview-of-forms-authentication-c"></a><span data-ttu-id="f26ce-103">フォーム認証 (c#) の概要</span><span class="sxs-lookup"><span data-stu-id="f26ce-103">An Overview of Forms Authentication (C#)</span></span>
====================
<span data-ttu-id="f26ce-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f26ce-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f26ce-105">[コードのダウンロード](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="f26ce-105">[Download Code](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) or [Download PDF](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span></span>

> <span data-ttu-id="f26ce-106">実装します。 このチュートリアルでは単なる説明から変換されます。具体的には、フォーム認証の実装を紹介します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-106">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="f26ce-107">メンバーシップとロールを簡単なフォーム認証から移行する際、まず、このチュートリアルで作成する web アプリケーションは後のチュートリアルで構築続けます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-107">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>
> 
> <span data-ttu-id="f26ce-108">このトピックの詳細については、このビデオを参照してください: [ASP.NET での基本的なフォーム認証の使用](# "using-basic-forms-authentication-in-aspnet")します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-108">Please see this video for more information on this topic: [Using Basic Forms Authentication in ASP.NET](# "using-basic-forms-authentication-in-aspnet").</span></span>


## <a name="introduction"></a><span data-ttu-id="f26ce-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="f26ce-109">Introduction</span></span>

<span data-ttu-id="f26ce-110">[前のチュートリアル](security-basics-and-asp-net-support-cs.md)ASP.NET によって提供される各種の認証、承認、およびユーザー アカウントのオプションについて説明しました。</span><span class="sxs-lookup"><span data-stu-id="f26ce-110">In the [preceding tutorial](security-basics-and-asp-net-support-cs.md) we discussed the various authentication, authorization, and user account options provided by ASP.NET.</span></span> <span data-ttu-id="f26ce-111">実装します。 このチュートリアルでは単なる説明から変換されます。具体的には、フォーム認証の実装を紹介します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-111">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="f26ce-112">メンバーシップとロールを簡単なフォーム認証から移行する際、まず、このチュートリアルで作成する web アプリケーションは後のチュートリアルで構築続けます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-112">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>

<span data-ttu-id="f26ce-113">このチュートリアルでは、前のチュートリアルで触れましたトピック、フォーム認証ワークフローの詳細で始まります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-113">This tutorial begins with an in-depth look at the forms authentication workflow, a topic we touched upon in the previous tutorial.</span></span> <span data-ttu-id="f26ce-114">次に、フォーム認証の概念をデモするための ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-114">Following that, we will create an ASP.NET website through which to demo the concepts of forms authentication.</span></span> <span data-ttu-id="f26ce-115">次に、私たちは、サイトを構成フォーム認証を使用して、単純なログイン ページを作成および確認する方法、コードでは、ユーザーが認証されると、そうである場合、ユーザー名、ログインしているかどうかを参照してください。</span><span class="sxs-lookup"><span data-stu-id="f26ce-115">Next, we will configure the site to use forms authentication, create a simple login page, and see how to determine, in code, whether a user is authenticated and, if so, the username they logged in with.</span></span>

<span data-ttu-id="f26ce-116">フォームの認証ワークフローを web アプリケーションで有効にすると、ログインおよびログオフのページを作成して、ユーザー アカウントをサポートし、web ページを使用してユーザーを認証する ASP.NET アプリケーションのビルドのすべての重要な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-116">Understanding the forms authentication workflow, enabling it in a web application, and creating the login and logoff pages are all vital steps in building an ASP.NET application that supports user accounts and authenticates users through a web page.</span></span> <span data-ttu-id="f26ce-117">この – ためを過去のプロジェクトでのフォーム認証の場合でも、エクスペリエンスの構成が既にに次に進む前に、完全には、このチュートリアルを行うには推奨は、別の時にこれらのチュートリアルが構築されるためです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-117">Because of this – and because these tutorials build upon one another - I would encourage you to work through this tutorial in full before moving on to the next one even if you already have had experience configuring forms authentication in past projects.</span></span>

## <a name="understanding-the-forms-authentication-workflow"></a><span data-ttu-id="f26ce-118">フォーム認証のワークフローを理解します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-118">Understanding the Forms Authentication Workflow</span></span>

<span data-ttu-id="f26ce-119">ASP.NET ランタイムは、ASP.NET ページや ASP.NET Web サービスなど、ASP.NET リソースの要求を処理するときに、要求は、ライフ サイクル中にイベントの数を生成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-119">When the ASP.NET runtime processes a request for an ASP.NET resource, such as an ASP.NET page or ASP.NET Web service, the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="f26ce-120">要求が認証されると、未処理の例外となどの場合に発生するイベントが承認されたときに発生したものと、要求の非常に開始、終了時に発生するイベントがあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-120">There are events raised at the very beginning and very end of the request, ones raised when the request is being authenticated and authorized, an event raised in the case of an unhandled exception, and so forth.</span></span> <span data-ttu-id="f26ce-121">イベントの完全な一覧を表示するを参照してください、 [HttpApplication オブジェクトのイベント](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-121">To see a complete listing of the events, refer to the [HttpApplication object's events](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span></span>

<span data-ttu-id="f26ce-122">*HTTP モジュール*マネージ クラスの要求のライフ サイクルの特定のイベントに応答であるコードが実行されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-122">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="f26ce-123">ASP.NET では、バック グラウンドで重要なタスクを実行する HTTP モジュールの数が付属しています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-123">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span> <span data-ttu-id="f26ce-124">この記事に特に関連する 2 つの組み込み HTTP モジュールは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-124">Two built-in HTTP Modules that are especially relevant to our discussion are:</span></span>

- <span data-ttu-id="f26ce-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – ユーザーのクッキー コレクションに含まれているでは通常、フォーム認証チケットを調べることによって、ユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – authenticates the user by inspecting the forms authentication ticket, which is typically included in the user's cookies collection.</span></span> <span data-ttu-id="f26ce-126">フォーム認証チケットが存在しない場合、ユーザーは匿名です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-126">If no forms authentication ticket is present, the user is anonymous.</span></span>
- <span data-ttu-id="f26ce-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – 現在のユーザーの権限が要求された URL にアクセスするかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – determines whether or not the current user is authorized to access the requested URL.</span></span> <span data-ttu-id="f26ce-128">このモジュールは、アプリケーションの構成ファイルで指定された承認規則を参照して、権限を決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-128">This module determines the authority by consulting the authorization rules specified in the application's configuration files.</span></span> <span data-ttu-id="f26ce-129">ASP.NET にも含まれています、 [ `FileAuthorizationModule` ](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx)機関要求されたファイルの Acl を参照して決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-129">ASP.NET also includes the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) that determines authority by consulting the requested file(s) ACLs.</span></span>

<span data-ttu-id="f26ce-130">`FormsAuthenticationModule`前にユーザーを認証しようとしています、 `UrlAuthorizationModule` (と`FileAuthorizationModule`) を実行します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-130">The `FormsAuthenticationModule` attempts to authenticate the user prior to the `UrlAuthorizationModule` (and `FileAuthorizationModule`) executing.</span></span> <span data-ttu-id="f26ce-131">承認モジュールが、要求を終了し、返します、要求を行ったユーザーが要求されたリソースにアクセスする権限がない場合、 [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html)状態。</span><span class="sxs-lookup"><span data-stu-id="f26ce-131">If the user making the request is not authorized to access the requested resource, the authorization module terminates the request and returns an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="f26ce-132">Windows 認証のシナリオでは、ブラウザーに HTTP 401 ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-132">In Windows authentication scenarios, the HTTP 401 status is returned to the browser.</span></span> <span data-ttu-id="f26ce-133">この状態コードの場合、ブラウザーにモーダル ダイアログ ボックスを使用して、資格情報の入力を求めます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-133">This status code causes the browser to prompt the user for their credentials via a modal dialog box.</span></span> <span data-ttu-id="f26ce-134">フォーム認証では、ただし、HTTP 401 Unauthorized ステータスが送信されないブラウザーのため、FormsAuthenticationModule は、この状態を検出し、代わりに、ユーザーをログイン ページにリダイレクトするそれを変更します (を使用して、 [HTTP 302 リダイレクト](http://www.checkupdown.com/status/E302.html)状態)。</span><span class="sxs-lookup"><span data-stu-id="f26ce-134">With forms authentication, however, the HTTP 401 Unauthorized status is never sent to the browser because the FormsAuthenticationModule detects this status and modifies it to redirect the user to the login page instead (via an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) status).</span></span>

<span data-ttu-id="f26ce-135">ログイン ページの責任では、ユーザーの資格情報が有効と、フォーム認証チケットを作成し、ユーザーをページにリダイレクトを参照してくださいを試行した場合はかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-135">The login page's responsibility is to determine if the user's credentials are valid and, if so, to create a forms authentication ticket and redirect the user back to the page they were attempting to visit.</span></span> <span data-ttu-id="f26ce-136">認証チケットが、web サイト上のページへの後続の要求に含まれている、`FormsAuthenticationModule`ユーザーを識別するために使用します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-136">The authentication ticket is included in subsequent requests to the pages on the website, which the `FormsAuthenticationModule` uses to identify the user.</span></span>


![フォーム認証のワークフロー](an-overview-of-forms-authentication-cs/_static/image1.png)

<span data-ttu-id="f26ce-138">**図 1**: フォームの認証ワークフロー</span><span class="sxs-lookup"><span data-stu-id="f26ce-138">**Figure 1**: The Forms Authentication Workflow</span></span>


### <a name="remembering-the-authentication-ticket-across-page-visits"></a><span data-ttu-id="f26ce-139">ページの訪問者の間での認証チケットの記憶</span><span class="sxs-lookup"><span data-stu-id="f26ce-139">Remembering the Authentication Ticket Across Page Visits</span></span>

<span data-ttu-id="f26ce-140">ログインしたらは、サイトを参照する場合に、ユーザーがログインしているが保持されるように、フォーム認証チケット要求のたびに web サーバーに送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-140">After logging in, the forms authentication ticket must be sent back to the web server on each request so that the user remains logged in as they browse the site.</span></span> <span data-ttu-id="f26ce-141">これは通常、ユーザーのクッキー コレクションに認証チケットを配置することによって実現します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-141">This is typically accomplished by placing the authentication ticket in the user's cookies collection.</span></span> <span data-ttu-id="f26ce-142">[Cookie](http://en.wikipedia.org/wiki/HTTP_cookie)はユーザーのコンピューター上に存在し、cookie を作成した web サイトへの各要求の HTTP ヘッダーで送信される小さなテキスト ファイルです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-142">[Cookies](http://en.wikipedia.org/wiki/HTTP_cookie) are small text files that reside on the user's computer and are transmitted in the HTTP headers on each request to the website that created the cookie.</span></span> <span data-ttu-id="f26ce-143">そのため、フォーム認証チケットが作成され、ブラウザーの cookie に格納されて、そのサイトへの後続アクセスは、ユーザーを識別するため、要求と共に認証チケットを送信します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-143">Therefore, once the forms authentication ticket has been created and stored in the browser's cookies, each subsequent visit to that site sends the authentication ticket along with the request, thereby identifying the user.</span></span>

<span data-ttu-id="f26ce-144">Cookie の 1 つの側面は、日付と時刻が、ブラウザーが cookie を破棄するには、有効期限です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-144">One aspect of cookies is their expiration, which is the date and time at which the browser discards the cookie.</span></span> <span data-ttu-id="f26ce-145">フォーム認証 cookie の期限が切れると、ユーザーされなく認証およびため匿名のようになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-145">When the forms authentication cookie expires, the user can no longer be authenticated and therefore become anonymous.</span></span> <span data-ttu-id="f26ce-146">ユーザーは、パブリックのターミナルからアクセスすること、ときに期限切れのブラウザーを閉じるときに認証チケットに仕込むする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-146">When a user is visiting from a public terminal, chances are they want their authentication ticket to expire when they close their browser.</span></span> <span data-ttu-id="f26ce-147">自宅からすると、しかし、その同じユーザーすることがあるないように、ブラウザーの再起動前後で覚えられないよう認証チケットをそのサイトにアクセスするたびに再記録します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-147">When visiting from home, however, that same user might want the authentication ticket to be remembered across browser restarts so that they do not have to re-log in each time they visit the site.</span></span> <span data-ttu-id="f26ce-148">この決定は多くの場合、ユーザーによる、「アカウントを記憶する」の形式でログイン ページでチェック ボックスをオンします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-148">This decision is often made by the user in the form of a "Remember me" checkbox on the login page.</span></span> <span data-ttu-id="f26ce-149">手順 3 では、ログイン ページに「次回」のチェック ボックスを実装する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-149">In Step 3 we will examine how to implement a "Remember me" checkbox in the login page.</span></span> <span data-ttu-id="f26ce-150">次のチュートリアルでは、認証チケットのタイムアウト設定の詳細を説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-150">The following tutorial addresses the authentication ticket timeout settings in detail.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-151">Web サイトにログオンするために使用するユーザー エージェントが cookie をサポートしていないことができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-151">It is possible that the user agent used to log on to the website may not support cookies.</span></span> <span data-ttu-id="f26ce-152">このような場合は、ASP.NET が cookieless フォーム認証チケットを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-152">In such a case, ASP.NET can use cookieless forms authentication tickets.</span></span> <span data-ttu-id="f26ce-153">このモードでは、認証チケットが URL にエンコードされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-153">In this mode, the authentication ticket is encoded into the URL.</span></span> <span data-ttu-id="f26ce-154">クッキーなしの認証チケットを使用する場合と、作成され、次のチュートリアルで管理の方法を紹介します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-154">We will look at when cookieless authentication tickets are used and how they are created and managed in the next tutorial.</span></span>


### <a name="the-scope-of-forms-authentication"></a><span data-ttu-id="f26ce-155">フォーム認証のスコープ</span><span class="sxs-lookup"><span data-stu-id="f26ce-155">The Scope of Forms Authentication</span></span>

<span data-ttu-id="f26ce-156">`FormsAuthenticationModule`はマネージ コードは、ASP.NET ランタイムの一部であります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-156">The `FormsAuthenticationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="f26ce-157">前のバージョン 7 のマイクロソフトの[インターネット インフォメーション サービス (IIS)](https://www.iis.net/) web サーバー、IIS の HTTP パイプラインと、ASP.NET ランタイムのパイプラインの個別障害が発生しました。</span><span class="sxs-lookup"><span data-stu-id="f26ce-157">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="f26ce-158">つまり、IIS 6 以前のバージョンで、 `FormsAuthenticationModule` ASP.NET ランタイムに要求が IIS から委任されるときにのみ実行されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-158">In short, in IIS 6 and earlier, the `FormsAuthenticationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="f26ce-159">既定では、IIS は、.aspx、.asmx、または .ashx の拡張子を持つページが要求されたときに HTML ページと CSS とイメージ ファイル – ASP.NET ランタイムへの要求のみの手のような静的コンテンツ – 自体を処理します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-159">By default, IIS processes static content itself – like HTML pages and CSS and image files – and only hands off requests to the ASP.NET runtime when a page with an extension of .aspx, .asmx, or .ashx is requested.</span></span>

<span data-ttu-id="f26ce-160">IIS 7 では、ただしでは、統合された IIS と ASP.NET パイプライン。</span><span class="sxs-lookup"><span data-stu-id="f26ce-160">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="f26ce-161">呼び出すため、FormsAuthenticationModule IIS 7 をセットアップするいくつかの構成設定で*すべて*要求。</span><span class="sxs-lookup"><span data-stu-id="f26ce-161">With a few configuration settings you can setup IIS 7 to invoke the FormsAuthenticationModule for *all* requests.</span></span> <span data-ttu-id="f26ce-162">さらに、IIS 7 では、任意の種類のファイルの URL 承認規則を定義できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-162">Furthermore, with IIS 7 you can define URL authorization rules for files of any type.</span></span> <span data-ttu-id="f26ce-163">詳細については、次を参照してください。 [IIS6 との間の変更と IIS7 セキュリティ](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above)、 [Your Web プラットフォームのセキュリティ](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements)、および[理解 IIS7 URL 承認](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-163">For more information, see [Changes Between IIS6 and IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Your Web Platform Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), and [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span>

<span data-ttu-id="f26ce-164">かいつまんで言う、IIS 7 よりも前のバージョンでは、ASP.NET ランタイムによって処理されるリソースを保護するのにフォーム認証を使用することができますのみです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-164">Long story short, in versions prior to IIS 7, you can only use forms authentication to protect resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="f26ce-165">同様に、URL 承認規則は、ASP.NET ランタイムによって処理されるリソースにのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-165">Likewise, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="f26ce-166">IIS 7 では、FormsAuthenticationModule と UrlAuthorizationModule をすべての要求には、この機能を拡張するため、IIS の HTTP パイプラインに統合できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-166">But with IIS 7 it is possible to integrate the FormsAuthenticationModule and UrlAuthorizationModule into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

## <a name="step-1-creating-an-aspnet-website-for-this-tutorial-series"></a><span data-ttu-id="f26ce-167">手順 1: このチュートリアル シリーズの ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-167">Step 1: Creating an ASP.NET Website for this Tutorial Series</span></span>

<span data-ttu-id="f26ce-168">Visual Studio 2008 では、Microsoft の無料版で、このシリーズ全体で構築することに ASP.NET web サイトを作成できるだけ多くを達成するために[Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-168">In order to reach the widest possible audience, the ASP.NET website we will be building throughout this series will be created with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="f26ce-169">実装します。、`SqlMembershipProvider`のユーザー ストアに、 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx)データベース。</span><span class="sxs-lookup"><span data-stu-id="f26ce-169">We will implement the `SqlMembershipProvider` user store in a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database.</span></span> <span data-ttu-id="f26ce-170">Visual Studio 2005 または Visual Studio 2008 または SQL Server の別のエディションを使用している場合は、心配しないでくださいし、手順とほぼ同じになります - 重要な相違点を指摘します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-170">If you are using Visual Studio 2005 or a different edition of Visual Studio 2008 or SQL Server, don't worry - the steps will be nearly identical and any non-trivial differences will be pointed out.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-171">各チュートリアルで使用されるデモ web アプリケーションは、ダウンロードとして入手できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-171">The demo web application used in each tutorial is available as a download.</span></span> <span data-ttu-id="f26ce-172">このダウンロード可能なアプリケーションは、.NET Framework version 3.5 を対象となる Visual Web Developer 2008 で作成されました。</span><span class="sxs-lookup"><span data-stu-id="f26ce-172">This downloadable application was created with Visual Web Developer 2008 targeted for the .NET Framework version 3.5.</span></span> <span data-ttu-id="f26ce-173">.NET 3.5 アプリケーションの対象は後の Web.config ファイルには、3.5 に固有の追加の構成要素が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-173">Since the application is targeted for .NET 3.5, its Web.config file includes additional, 3.5-specific configuration elements.</span></span> <span data-ttu-id="f26ce-174">要約すると、ダウンロード可能な web アプリケーションでは、コンピューターに .NET 3.5 をインストールするがまだある場合は、web.config ファイルから 3.5 固有のマークアップを削除せずは機能しません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-174">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from Web.config.</span></span>


<span data-ttu-id="f26ce-175">フォーム認証を構成することができます、前に最初の ASP.NET web サイトが必要。</span><span class="sxs-lookup"><span data-stu-id="f26ce-175">Before we can configure forms authentication, we first need an ASP.NET website.</span></span> <span data-ttu-id="f26ce-176">まず新しいファイル システムに基づく ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-176">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="f26ce-177">これを実現するには、Visual Web Developer を起動ファイル メニューに移動し、新しい Web サイト ダイアログ ボックスを表示する新しい Web サイトを選択します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-177">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box.</span></span> <span data-ttu-id="f26ce-178">ASP.NET Web サイト テンプレートの選択、場所ドロップダウン リストをファイル システムに設定、web サイトを配置するフォルダーを選択および c# 言語を設定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-178">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="f26ce-179">これには、Default.aspx ASP.NET ページで、アプリで新しい web サイトを作成は\_データ フォルダー、および Web.config ファイル。</span><span class="sxs-lookup"><span data-stu-id="f26ce-179">This will create a new web site with a Default.aspx ASP.NET page, an App\_Data folder, and a Web.config file.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-180">Visual Studio プロジェクト管理の 2 つのモードをサポートしています。 Web サイト プロジェクトと Web アプリケーション プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="f26ce-180">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="f26ce-181">Web サイト プロジェクトでは、Web アプリケーション プロジェクトで Visual Studio .NET 2002年/2003 プロジェクト アーキテクチャを模倣する – プロジェクト ファイルが含まれていて、プロジェクトのソース コードを/bin フォルダーに配置されている 1 つのアセンブリにコンパイルは、プロジェクト ファイルが不足しています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-181">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 – they include a project file and compile the project's source code into a single assembly, which is placed in the /bin folder.</span></span> <span data-ttu-id="f26ce-182">Visual Studio 2005 最初に唯一サポートされている Web サイト プロジェクトは、Service Pack 1。 Web アプリケーション プロジェクト モデルが再入がVisual Studio 2008 には、両方のプロジェクト モデルが用意されています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-182">Visual Studio 2005 initially only supported Web Site Projects, although the Web Application Project model was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="f26ce-183">Visual Web Developer 2005 および 2008 のエディション、ただし、のみがサポート Web サイト プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="f26ce-183">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="f26ce-184">Web サイト プロジェクト モデルは使用されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-184">I will be using the Web Site Project model.</span></span> <span data-ttu-id="f26ce-185">Express 以外のエディションを使用しているし、使用するかどうか、 [Web アプリケーション プロジェクト モデル](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx)代わりを自由に行う可能性があるいくつかの相違点、画面とではなく実行する必要があります手順に表示されるものとの間に注意してください、スクリーン ショットが示すように、これらのチュートリアルで説明する手順。</span><span class="sxs-lookup"><span data-stu-id="f26ce-185">If you are using a non-Express edition and want to use the [Web Application Project model](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>


<span data-ttu-id="f26ce-186">[![新しいファイル システムに基づく Web サイトを作成します。](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-186">[![Create a New File System-Based Web Site](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span></span>

<span data-ttu-id="f26ce-187">**図 2**: New File System-Based Web サイトの作成 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image4.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-187">**Figure 2**: Create a New File System-Based Web Site ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image4.png))</span></span>


### <a name="adding-a-master-page"></a><span data-ttu-id="f26ce-188">マスター ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-188">Adding a Master Page</span></span>

<span data-ttu-id="f26ce-189">次に、Site.master をという名前のルート ディレクトリ内のサイトに新しいマスター ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-189">Next, add a new Master Page to the site in the root directory named Site.master.</span></span> <span data-ttu-id="f26ce-190">[マスター ページ](https://msdn.microsoft.com/library/wtxbf3hh.aspx)ASP.NET ページに適用できるサイト全体のテンプレートを定義するページの開発者を有効にします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-190">[Master pages](https://msdn.microsoft.com/library/wtxbf3hh.aspx) enable a page developer to define a site-wide template that can be applied to ASP.NET pages.</span></span> <span data-ttu-id="f26ce-191">マスター ページの主な利点は、サイトの全体的な外観定義できます 1 つの場所でこれにより簡単に更新したり、サイトのレイアウトを調整します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-191">The main benefit of master pages is that the site's overall appearance can be defined in a single location, thereby making it easy to update or tweak the site's layout.</span></span>


<span data-ttu-id="f26ce-192">[![マスター ページを追加するという名前の web サイトに Site.master](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-192">[![Add a Master Page Named Site.master to the Website](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span></span>

<span data-ttu-id="f26ce-193">**図 3**: web サイトにマスター ページという Site.master を追加 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image7.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-193">**Figure 3**: Add a Master Page Named Site.master to the Website ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image7.png))</span></span>


<span data-ttu-id="f26ce-194">マスター ページで、ここで、サイト全体のページ レイアウトを定義します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-194">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="f26ce-195">デザイン ビューを使用して、必要なレイアウトまたは Web コントロールを追加またはソース ビューで手動でマークアップを手動で追加することができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-195">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="f26ce-196">構造で使用されるレイアウトを模倣するために、マスター ページのレイアウト、  *[ASP.NET 2.0 でデータを扱う](../../data-access/index.md)* チュートリアルのシリーズ (図 4 参照)。</span><span class="sxs-lookup"><span data-stu-id="f26ce-196">I structured my master page's layout to mimic the layout used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series (see Figure 4).</span></span> <span data-ttu-id="f26ce-197">マスター ページを使用して[カスケード スタイル シート](http://www.w3schools.com/css/default.asp)配置と (このチュートリアルの関連するダウンロードに含まれています) を Style.css ファイルで定義された CSS 設定でスタイル。</span><span class="sxs-lookup"><span data-stu-id="f26ce-197">The master page uses [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the file Style.css (which is included in this tutorial's associated download).</span></span> <span data-ttu-id="f26ce-198">CSS 規則が定義されているときに、次に示すマークアップからわかることはできません、ようにナビゲーション&lt;div&gt;のようにし、左側に表示が固定幅 200 ピクセルに絶対にコンテンツが配置されています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-198">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation &lt;div&gt;'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample1.aspx)]

<span data-ttu-id="f26ce-199">マスター ページは、静的なページ レイアウトやマスター ページを使用する ASP.NET ページが編集可能なリージョンの両方を定義します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-199">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="f26ce-200">これらのコンテンツの編集可能な領域がで示される、`ContentPlaceHolder`コントロールで、コンテンツ内で確認できます&lt;div&gt;します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-200">These content editable regions are indicated by the `ContentPlaceHolder` control, which can be seen within the content &lt;div&gt;.</span></span> <span data-ttu-id="f26ce-201">このマスター ページは、1 つ`ContentPlaceHolder`(MainContent)、マスター ページの複数の ContentPlaceHolders があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-201">Our master page has a single `ContentPlaceHolder` (MainContent), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="f26ce-202">上記で入力したマークアップをデザイン ビューに切り替えると、マスター ページのレイアウトを示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-202">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="f26ce-203">このマスター ページを使用する任意の ASP.NET ページのマークアップを指定する機能によりこの均一なレイアウトになります、`MainContent`リージョン。</span><span class="sxs-lookup"><span data-stu-id="f26ce-203">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>


<span data-ttu-id="f26ce-204">[![デザイン ビューで表示した場合、マスター ページ](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-204">[![The Master Page, When Viewed Through the Design View](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span></span>

<span data-ttu-id="f26ce-205">**図 4**:、マスター ページ、ときに表示をデザイン ビュー ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image10.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-205">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image10.png))</span></span>


### <a name="creating-content-pages"></a><span data-ttu-id="f26ce-206">コンテンツ ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-206">Creating Content Pages</span></span>

<span data-ttu-id="f26ce-207">この時点で、web サイトに Default.aspx ページがあるが、先ほど作成したマスター ページは使用されません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-207">At this point we have a Default.aspx page in our website, but it does not use the master page we just created.</span></span> <span data-ttu-id="f26ce-208">ページには、コンテンツが含まれていない場合、マスター ページを使用する web ページの宣言型マークアップを操作することはできますが、簡単ですだけのページを削除および再使用するマスター ページを指定する、プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-208">While it is possible to manipulate the declarative markup of a web page to use a master page, if the page doesn't contain any content yet it is easier to just delete the page and re-add it to the project, specifying the master page to use.</span></span> <span data-ttu-id="f26ce-209">したがって、Default.aspx をプロジェクトから削除することによって開始します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-209">Therefore, start by deleting Default.aspx from the project.</span></span>

<span data-ttu-id="f26ce-210">次に、ソリューション エクスプ ローラーでプロジェクト名を右クリックし、Default.aspx という名前の新しい Web フォームを追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-210">Next, right-click on the project name in the Solution Explorer and choose to add a new Web Form named Default.aspx.</span></span> <span data-ttu-id="f26ce-211">今回は、"マスター ページの選択 チェック ボックスを確認し、一覧から Site.master マスター ページを選択します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-211">This time, check the "Select master page" checkbox and choose the Site.master master page from the list.</span></span>


<span data-ttu-id="f26ce-212">[![マスター ページの選択を選択する新しい Default.aspx ページを追加します。](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-212">[![Add a New Default.aspx Page Choosing to Select a Master Page](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span></span>

<span data-ttu-id="f26ce-213">**図 5**: 追加、新しい Default.aspx ページを選択するマスター ページの選択 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image13.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-213">**Figure 5**: Add a New Default.aspx Page Choosing to Select a Master Page ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image13.png))</span></span>


![Site.master マスター ページを使用してください。](an-overview-of-forms-authentication-cs/_static/image14.png)

<span data-ttu-id="f26ce-215">**図 6**: Site.master マスター ページを使用して</span><span class="sxs-lookup"><span data-stu-id="f26ce-215">**Figure 6**: Use the Site.master Master Page</span></span>


> [!NOTE]
> <span data-ttu-id="f26ce-216">Web アプリケーション プロジェクト モデルを使用している場合でも、新しい項目の追加 ダイアログ ボックスでは"マスター ページの選択 チェック ボックスは含まれません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-216">If you are using the Web Application Project Model the Add New Item dialog box does not include a "Select master page" checkbox.</span></span> <span data-ttu-id="f26ce-217">代わりに、型「Web コンテンツ フォーム」の項目を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-217">Instead, you need to add an item of type "Web Content Form."</span></span> <span data-ttu-id="f26ce-218">「Web コンテンツ フォーム」オプションを選択し、追加をクリックすると、Visual Studio は、同じ Select マスターを表示 ダイアログ ボックスを図 6 に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-218">After choosing the "Web Content Form" option and clicking Add, Visual Studio will display the same Select a Master dialog box shown in Figure 6.</span></span>


<span data-ttu-id="f26ce-219">だけ、新しい Default.aspx ページの宣言型マークアップが含まれています、@Pageマスターへのパスを指定するディレクティブ、マスター ページの MainContent ContentPlaceHolder のファイルとコンテンツ コントロールをページします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-219">The new Default.aspx page's declarative markup includes just a @Page directive specifying the path to the master page file and a Content control for the master page's MainContent ContentPlaceHolder.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample2.aspx)]

<span data-ttu-id="f26ce-220">ここでは、Default.aspx を空のままにします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-220">For now, leave Default.aspx empty.</span></span> <span data-ttu-id="f26ce-221">コンテンツを追加するには、このチュートリアルの後半に返されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-221">We will return to it later in this tutorial to add content.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-222">このマスター ページには、メニューまたはその他のいくつかのナビゲーション インターフェイスのセクションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-222">Our master page includes a section for a menu or some other navigation interface.</span></span> <span data-ttu-id="f26ce-223">今後のチュートリアルでこのようなインターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-223">We will create such an interface in a future tutorial.</span></span>

## <a name="step-2-enabling-forms-authentication"></a><span data-ttu-id="f26ce-224">手順 2: は、フォーム認証を有効にします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-224">Step 2: Enabling Forms Authentication</span></span>

<span data-ttu-id="f26ce-225">ASP.NET web サイトを作成して、フォーム認証を有効にするのには、次のタスクです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-225">With the ASP.NET website created, our next task is to enable forms authentication.</span></span> <span data-ttu-id="f26ce-226">使用して、アプリケーションの認証構成を指定、 [ `<authentication>`要素](https://msdn.microsoft.com/library/532aee0e.aspx)Web.config にします。`<authentication>`要素には、アプリケーションによって使用される認証モデルを指定するモードをという名前の 1 つの属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-226">The application's authentication configuration is specified through the [`<authentication>` element](https://msdn.microsoft.com/library/532aee0e.aspx) in Web.config. The `<authentication>` element contains a single attribute named mode that specifies the authentication model used by the application.</span></span> <span data-ttu-id="f26ce-227">この属性は、次の 4 つの値の 1 つがあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-227">This attribute can have one of the following four values:</span></span>

- <span data-ttu-id="f26ce-228">**Windows** –、訪問者を認証する web サーバーの役割は Windows 認証を使用するアプリケーションでは、前のチュートリアルで説明したように、基本、ダイジェスト、または統合 Windows を通じてこれは、通常認証します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-228">**Windows** – as discussed in the preceding tutorial, when an application uses Windows authentication it is the web server's responsibility to authenticate the visitor, and this is usually done through Basic, Digest, or Integrated Windows authentication.</span></span>
- <span data-ttu-id="f26ce-229">**フォーム**– ユーザーは web ページ上のフォームを使用して認証されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-229">**Forms**– users are authenticated via a form on a web page.</span></span>
- <span data-ttu-id="f26ce-230">**Passport**– ユーザーは、Microsoft の Passport Network を使用して認証されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-230">**Passport**– users are authenticated using Microsoft's Passport Network.</span></span>
- <span data-ttu-id="f26ce-231">**None**– 認証モデルは使用されません。 すべての訪問者は匿名です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-231">**None**– no authentication model is used; all visitors are anonymous.</span></span>

<span data-ttu-id="f26ce-232">既定では、ASP.NET アプリケーションは、Windows 認証を使用します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-232">By default, ASP.NET applications use Windows authentication.</span></span> <span data-ttu-id="f26ce-233">フォーム認証を認証の種類を変更し、必要がありますを変更する、`<authentication>`をフォームに要素の mode 属性。</span><span class="sxs-lookup"><span data-stu-id="f26ce-233">To change the authentication type to forms authentication, then, we need to modify the `<authentication>` element's mode attribute to Forms.</span></span>

<span data-ttu-id="f26ce-234">プロジェクトで Web.config ファイルがまだ含まれない場合は、1 つ今すぐを右クリックして、ソリューション エクスプ ローラーでプロジェクト名を新しい項目の追加 を選択して Web 構成ファイルを追加しを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-234">If your project does not yet contain a Web.config file, add one now by right-clicking on the project name in the Solution Explorer, choosing Add New Item, and then adding a Web Configuration file.</span></span>


<span data-ttu-id="f26ce-235">[![プロジェクトがまだ Web.config を含めない場合、今すぐ追加します。](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-235">[![If Your Project Does Not Yet Include Web.config, Add It Now](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span></span>

<span data-ttu-id="f26ce-236">**図 7**: 場合、プロジェクトはいないまだ含める Web.config、今すぐ追加 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image17.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-236">**Figure 7**: If Your Project Does Not Yet Include Web.config, Add It Now ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image17.png))</span></span>


<span data-ttu-id="f26ce-237">次に、検索、`<authentication>`要素とフォーム認証で使用するように更新します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-237">Next, locate the `<authentication>` element and update it to use forms authentication.</span></span> <span data-ttu-id="f26ce-238">この変更を行う Web.config ファイルのマークアップは、次のようなになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-238">After this change, your Web.config file's markup should look similar to the following:</span></span>

[!code-xml[Main](an-overview-of-forms-authentication-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="f26ce-239">XML ファイルを Web.config には、大文字小文字の区別が重要です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-239">Since Web.config is an XML file, casing is important.</span></span> <span data-ttu-id="f26ce-240">大文字の"F"、フォームにモード属性を設定することを確認します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-240">Make sure that you set the mode attribute to Forms, with a capital "F".</span></span> <span data-ttu-id="f26ce-241">「フォーム」などの異なる大文字小文字を使用する場合、ブラウザーを使用してサイトにアクセスしたときに構成エラーを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-241">If you use a different casing, such as "forms", you'll receive a configuration error when visiting the site through a browser.</span></span>


<span data-ttu-id="f26ce-242">`<authentication>`要素には、必要に応じて、`<forms>`フォーム認証に固有の設定を含む子要素。</span><span class="sxs-lookup"><span data-stu-id="f26ce-242">The `<authentication>` element may optionally include a `<forms>` child element that contains forms authentication-specific settings.</span></span> <span data-ttu-id="f26ce-243">ここを使ってみましょう既定のフォーム認証設定。</span><span class="sxs-lookup"><span data-stu-id="f26ce-243">For now, let's just use the default forms authentication settings.</span></span> <span data-ttu-id="f26ce-244">見て、`<forms>`子要素で、次のチュートリアルで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-244">We will explore the `<forms>` child element in more detail in the next tutorial.</span></span>

## <a name="step-3-building-the-login-page"></a><span data-ttu-id="f26ce-245">手順 3: ログイン ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-245">Step 3: Building the Login Page</span></span>

<span data-ttu-id="f26ce-246">フォーム認証をサポートするためには、web サイトには、ログイン ページが必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-246">In order to support forms authentication our website needs a login page.</span></span> <span data-ttu-id="f26ce-247">「フォーム認証ワークフローの理解」セクションで説明したように、`FormsAuthenticationModule`は自動的にユーザーをログイン ページにリダイレクトされていないページへアクセスを試みる場合を表示する権限。</span><span class="sxs-lookup"><span data-stu-id="f26ce-247">As discussed in the "Understanding the Forms Authentication Workflow" section, the `FormsAuthenticationModule` will automatically redirect the user to the login page if they attempt to access a page that they are not authorized to view.</span></span> <span data-ttu-id="f26ce-248">匿名ユーザーにログイン ページへのリンクを表示する ASP.NET Web コントロールも。</span><span class="sxs-lookup"><span data-stu-id="f26ce-248">There are also ASP.NET Web controls that will display a link to the login page to anonymous users.</span></span> <span data-ttu-id="f26ce-249">ここでの問題は、「ログイン ページの URL ですか。」</span><span class="sxs-lookup"><span data-stu-id="f26ce-249">This begs the question, "What is the URL of the login page?"</span></span>

<span data-ttu-id="f26ce-250">既定では、フォーム認証システムは Login.aspx という名前のログイン ページが必要ですし、web アプリケーションのルート ディレクトリに配置します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-250">By default, the forms authentication system expects the login page to be named Login.aspx and placed in the root directory of the web application.</span></span> <span data-ttu-id="f26ce-251">を別のログイン ページの URL を使用する場合は、Web.config で指定することによって行うようにことができます。次のチュートリアルでこれを行う方法が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-251">If you want to use a different login page URL, you can do so by specifying it in Web.config. We will see how to do this in the subsequent tutorial.</span></span>

<span data-ttu-id="f26ce-252">ログイン ページには、3 つの役割があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-252">The login page has three responsibilities:</span></span>

1. <span data-ttu-id="f26ce-253">自分の資格情報を入力するビジターをできるようにするインターフェイスを提供します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-253">Provide an interface that allows the visitor to enter their credentials.</span></span>
2. <span data-ttu-id="f26ce-254">送信された資格情報が有効なかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-254">Determine if the submitted credentials are valid.</span></span>
3. <span data-ttu-id="f26ce-255">「ログイン」、ユーザーによって、フォーム認証チケットを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-255">"Log in" the user by creating the forms authentication ticket.</span></span>

### <a name="creating-the-login-pages-user-interface"></a><span data-ttu-id="f26ce-256">ログイン ページのユーザー インターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-256">Creating the Login Page's User Interface</span></span>

<span data-ttu-id="f26ce-257">最初のタスクを開始しましょう。</span><span class="sxs-lookup"><span data-stu-id="f26ce-257">Let's get started with the first task.</span></span> <span data-ttu-id="f26ce-258">Login.aspx という名前のサイトのルート ディレクトリに新しい ASP.NET ページを追加し、Site.master マスター ページと関連付けます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-258">Add a new ASP.NET page to the site's root directory named Login.aspx and associate it with the Site.master master page.</span></span>


<span data-ttu-id="f26ce-259">[![新しい ASP.NET ページの追加 Login.aspx という名前](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-259">[![Add a New ASP.NET Page Named Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span></span>

<span data-ttu-id="f26ce-260">**図 8**: 追加、新しい ASP.NET ページという Login.aspx ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image20.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-260">**Figure 8**: Add a New ASP.NET Page Named Login.aspx ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image20.png))</span></span>


<span data-ttu-id="f26ce-261">2 つのテキスト ボックス: ユーザーの名前の 1 つは、自分のパスワードとフォームを送信するボタン用に 1 つの一般的なログイン ページのインターフェイスで構成されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-261">The typical login page interface consists of two textboxes – one for the user's name, one for their password – and a button to submit the form.</span></span> <span data-ttu-id="f26ce-262">多くの場合、web サイトには、オンにした場合は、ブラウザーの再起動後、結果として得られる認証チケットを保持する"アカウントを記憶する チェック ボックスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-262">Websites oftentimes include a "Remember me" checkbox that, if checked, persists the resulting authentication ticket across browser restarts.</span></span>

<span data-ttu-id="f26ce-263">Login.aspx セットに 2 つの Textbox を追加、`ID`プロパティ名とパスワードをそれぞれします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-263">Add two TextBoxes to Login.aspx and set their `ID` properties to UserName and Password, respectively.</span></span> <span data-ttu-id="f26ce-264">パスワードの設定も`TextMode`プロパティをパスワードにします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-264">Also set Password's `TextMode` property to Password.</span></span> <span data-ttu-id="f26ce-265">次に、設定、チェック ボックス コントロールを追加、 `ID` RememberMe にプロパティとその`Text`プロパティを「記憶」します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-265">Next, add a CheckBox control, setting its `ID` property to RememberMe and its `Text` property to "Remember Me".</span></span> <span data-ttu-id="f26ce-266">次に、追加のログイン ボタンをという名前のボタンが`Text`プロパティが"Login"に設定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-266">Following that, add a Button named LoginButton whose `Text` property is set to "Login".</span></span> <span data-ttu-id="f26ce-267">最後に、ラベルの Web コントロールを追加し、設定、 `ID` InvalidCredentialsMessage、プロパティ、`Text`プロパティを"ユーザー名またはパスワードが無効です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-267">And finally, add a Label Web control and set its `ID` property to InvalidCredentialsMessage, its `Text` property to "Your username or password is invalid.</span></span> <span data-ttu-id="f26ce-268">もう一度やり直してください。"その`ForeColor`赤にプロパティとその`Visible`プロパティを False にします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-268">Please try again.", its `ForeColor` property to Red, and its `Visible` property to False.</span></span>

<span data-ttu-id="f26ce-269">この時点で、画面を図 9 でスクリーン ショットのようになり、ページの宣言の構文は次のようにします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-269">At this point your screen should look similar to the screen shot in Figure 9, and your page's declarative syntax should like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample4.aspx)]


<span data-ttu-id="f26ce-270">[![ログイン ページには、2 つのテキスト ボックス、チェック ボックス、ボタン、およびラベルが含まれています。](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-270">[![The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span></span>

<span data-ttu-id="f26ce-271">**図 9**: [ログイン ページを含む 2 つのテキスト ボックス、チェック ボックス、ボタン、およびラベル ([フルサイズの画像を表示する] をクリックします](an-overview-of-forms-authentication-cs/_static/image23.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-271">**Figure 9**: The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image23.png))</span></span>


<span data-ttu-id="f26ce-272">最後に、ログイン ボタンの click イベント ハンドラーを作成イベントです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-272">Finally, create an event handler for the LoginButton's Click event.</span></span> <span data-ttu-id="f26ce-273">デザイナーでは、単にこのイベント ハンドラーを作成するボタン コントロールをダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-273">From the Designer, simply double-click the Button control to create this event handler.</span></span>

### <a name="determining-if-the-supplied-credentials-are-valid"></a><span data-ttu-id="f26ce-274">かどうか、指定された資格情報は有効期間を決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-274">Determining If the Supplied Credentials are Valid</span></span>

<span data-ttu-id="f26ce-275">これで、ボタンのクリックで 2 のタスクを実装する必要があります – 指定された資格情報が有効かどうかを決定する、イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="f26ce-275">We now need to implement task 2 in the Button's Click event handler – determining whether the supplied credentials are valid.</span></span> <span data-ttu-id="f26ce-276">ためには指定された資格情報を一致させる任意の既知の資格情報を持つことを確認できるように、すべてのユーザーの資格情報を保持するユーザー ストアを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-276">In order to do this there needs to be a user store that holds all of the users' credentials so that we can determine if the supplied credentials match up with any known credentials.</span></span>

<span data-ttu-id="f26ce-277">ASP.NET 2.0 では、前に開発者が独自のユーザー ストアの両方を実装して、ストアに対して指定された資格情報を検証するコードの記述を担当します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-277">Prior to ASP.NET 2.0, developers were responsible for implementing both their own user stores and writing the code to validate the supplied credentials against the store.</span></span> <span data-ttu-id="f26ce-278">ほとんどの開発者はストアを実装、ユーザー データベースでは、ユーザー名、パスワード、電子メール、lastlogindate というなどのように列を持つユーザーをという名前のテーブルを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-278">Most developers would implement the user store in a database, creating a table named Users with columns like UserName, Password, Email, LastLoginDate, and so forth.</span></span> <span data-ttu-id="f26ce-279">次の表では、次に、ユーザー アカウントごとに 1 つのレコードになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-279">This table, then, would have one record per user account.</span></span> <span data-ttu-id="f26ce-280">ユーザーの指定された資格情報の確認は、一致するユーザー名、データベースのクエリを実行して、データベース内のパスワードが指定されたパスワードに前もっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-280">Verifying a user's supplied credentials would involve querying the database for a matching username and then ensuring that the password in the database corresponded to the supplied password.</span></span>

<span data-ttu-id="f26ce-281">ASP.NET 2.0 で開発者する必要がありますを使用してメンバーシップ プロバイダーのいずれかのユーザー ストアを管理します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-281">With ASP.NET 2.0, developers should use one of the Membership providers to manage the user store.</span></span> <span data-ttu-id="f26ce-282">このチュートリアル シリーズで使用するユーザー ストアの SQL Server データベースを使用すると、SqlMembershipProvider します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-282">In this tutorial series we will be using the SqlMembershipProvider, which uses a SQL Server database for the user store.</span></span> <span data-ttu-id="f26ce-283">使用する場合、テーブル、ビュー、およびプロバイダーで想定されているストアド プロシージャを含む特定のデータベース スキーマを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-283">When using the SqlMembershipProvider we need to implement a specific database schema that includes the tables, views, and stored procedures expected by the provider.</span></span> <span data-ttu-id="f26ce-284">このスキーマを実装する方法について、 ***SQL Server でメンバーシップ スキーマを作成する***チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="f26ce-284">We will examine how to implement this schema in the ***Creating the Membership Schema in SQL Server*** tutorial.</span></span> <span data-ttu-id="f26ce-285">インプレース メンバーシップ プロバイダーは呼び出すだけです、ユーザーの資格情報の検証、[メンバーシップ クラス](https://msdn.microsoft.com/library/system.web.security.membership.aspx)の[ValidateUser (*username*、*パスワード*)メソッド](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)を示すブール値を返すかどうかの有効性、 *username*と*パスワード*の組み合わせ。</span><span class="sxs-lookup"><span data-stu-id="f26ce-285">With the Membership provider in place, validating the user's credentials is as simple as calling the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx)'s [ValidateUser(*username*, *password*) method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), which returns a Boolean value indicating whether the validity of the *username* and *password* combination.</span></span> <span data-ttu-id="f26ce-286">ように見えて SqlMembershipProvider のユーザー ストアをまだ実装していない、この時点でのメンバーシップ クラスは、ValidateUser メソッドを使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-286">Seeing as we have not yet implemented the SqlMembershipProvider's user store, we cannot use the Membership class's ValidateUser method at this time.</span></span>

<span data-ttu-id="f26ce-287">時間をかけて独自カスタム ユーザー データベースのテーブル (これは、SqlMembershipProvider を実装した後は、不使用になります) をビルドしましょう代わりにハード コードではなく、ログインの有効な資格情報はページ自体になります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-287">Rather than take the time to build our own custom Users database table (which would be obsolete once we implemented the SqlMembershipProvider), let's instead hard-code the valid credentials within the login page itself.</span></span> <span data-ttu-id="f26ce-288">ログイン ボタンのクリック イベント ハンドラーを次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-288">In the LoginButton's Click event handler, add the following code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample5.cs)]

<span data-ttu-id="f26ce-289">ご覧のように、– Scott、Jisun、および Sam – 3 つの有効なユーザー アカウントがあるし、3 つすべてが同じパスワード ("password") にあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-289">As you can see, there are three valid user accounts – Scott, Jisun, and Sam – and all three have the same password ("password").</span></span> <span data-ttu-id="f26ce-290">コードは、ユーザー名とパスワードの有効な一致を検索するユーザーとパスワードの配列をループ処理します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-290">The code loops through the users and passwords arrays looking for a valid username and password match.</span></span> <span data-ttu-id="f26ce-291">ユーザー名とパスワードの両方が有効な場合は、ユーザーのログインし、それらを適切なページにリダイレクトする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-291">If both the username and password are valid, we need to login the user and then redirect them to the appropriate page.</span></span> <span data-ttu-id="f26ce-292">資格情報が有効でない場合 InvalidCredentialsMessage ラベルを表示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-292">If the credentials are invalid, then we display the InvalidCredentialsMessage Label.</span></span>

<span data-ttu-id="f26ce-293">「適切なページ」にはリダイレクトし、説明、ユーザーには、有効な資格情報が入ると、</span><span class="sxs-lookup"><span data-stu-id="f26ce-293">When a user enters valid credentials, I mentioned that they are then redirected to the "appropriate page."</span></span> <span data-ttu-id="f26ce-294">適切なページで、ただしはでしょうか。</span><span class="sxs-lookup"><span data-stu-id="f26ce-294">What is the appropriate page, though?</span></span> <span data-ttu-id="f26ce-295">表示する権限がないページにアクセスするユーザー、FormsAuthenticationModule 自動的にページにリダイレクト、ログインを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="f26ce-295">Recall that when a user visits a page they are not authorized to view, the FormsAuthenticationModule automatically redirects them to the login page.</span></span> <span data-ttu-id="f26ce-296">そのため、ReturnUrl パラメーターを使用して、クエリ文字列で、要求された URL が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-296">In doing so, it includes the requested URL in the querystring via the ReturnUrl parameter.</span></span> <span data-ttu-id="f26ce-297">つまり、ProtectedPage.aspx を参照してください。 しようとしているユーザーと、そのためには、権限のない、FormsAuthenticationModule がリダイレクトするとに。</span><span class="sxs-lookup"><span data-stu-id="f26ce-297">That is, if a user attempted to visit ProtectedPage.aspx, and they were not authorized to do so, the FormsAuthenticationModule would redirect them to:</span></span>

<span data-ttu-id="f26ce-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span><span class="sxs-lookup"><span data-stu-id="f26ce-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span></span>

<span data-ttu-id="f26ce-299">ログインすると、ユーザーは ProtectedPage.aspx にリダイレクトする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-299">Upon successfully logging in, the user should be redirected back to ProtectedPage.aspx.</span></span> <span data-ttu-id="f26ce-300">または、ユーザーはログイン ページを参照して、独自 volition で可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-300">Alternatively, users may visit the login page on their own volition.</span></span> <span data-ttu-id="f26ce-301">その場合は、ユーザーにログインした後、送信先となるルート フォルダーの Default.aspx ページ。</span><span class="sxs-lookup"><span data-stu-id="f26ce-301">In that case, after logging in the user they should be sent to the root folder's Default.aspx page.</span></span>

### <a name="logging-in-the-user"></a><span data-ttu-id="f26ce-302">ユーザーのログイン</span><span class="sxs-lookup"><span data-stu-id="f26ce-302">Logging In the User</span></span>

<span data-ttu-id="f26ce-303">指定された資格情報が有効であると仮定すると必要があります、フォーム認証チケットを作成するため、サイトにユーザーにログインします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-303">Assuming that the supplied credentials are valid, we need to create a forms authentication ticket, thereby logging in the user to the site.</span></span> <span data-ttu-id="f26ce-304">[FormsAuthentication クラス](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx)で、 [System.Web.Security 名前空間](https://msdn.microsoft.com/library/system.web.security.aspx)認証システム、フォームを使用してユーザーをログアウトし、ログ記録のためのさまざまなメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-304">The [FormsAuthentication class](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) provides assorted methods for logging in and logging out users via the forms authentication system.</span></span> <span data-ttu-id="f26ce-305">FormsAuthentication クラスでは、いくつかの方法がありますが、ここではこの時点で、3 つには。</span><span class="sxs-lookup"><span data-stu-id="f26ce-305">While there are several methods in the FormsAuthentication class, the three we are interested in at this juncture are:</span></span>

- <span data-ttu-id="f26ce-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span><span class="sxs-lookup"><span data-stu-id="f26ce-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span></span> <span data-ttu-id="f26ce-307">次に、このメソッドは、作成し、認証チケットの内容を保持する HttpCookie オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-307">Next, this method creates and returns an HttpCookie object that holds the contents of the authentication ticket.</span></span> <span data-ttu-id="f26ce-308">場合*persistCookie*が true の場合、永続的なクッキーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-308">If *persistCookie* is true, a persistent cookie is created.</span></span>
- <span data-ttu-id="f26ce-309">[SetAuthCookie (*username*、 *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) –、GetAuthCookie を呼び出します (*username*、 *persistCookie*)フォーム認証 cookie を生成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span></span> <span data-ttu-id="f26ce-310">このメソッドは、(それ以外に使用される cookie ベースのフォーム認証されている、このメソッド呼び出しの cookie なしのチケットのロジックを処理する内部クラスを想定) クッキー コレクションに GetAuthCookie によって返されるクッキーを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-310">This method then adds the cookie returned by GetAuthCookie to the Cookies collection (assuming cookies-based forms authentication is being used; otherwise, this method calls an internal class that handles the cookieless ticket logic).</span></span>
- <span data-ttu-id="f26ce-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span><span class="sxs-lookup"><span data-stu-id="f26ce-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span></span>

<span data-ttu-id="f26ce-312">GetAuthCookie はクッキーをクッキー コレクションに書き込む前に認証チケットを変更する必要がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-312">GetAuthCookie is handy when you need to modify the authentication ticket before writing the cookie out to the Cookies collection.</span></span> <span data-ttu-id="f26ce-313">SetAuthCookie は、フォーム認証チケットを作成し、Cookie のコレクションに追加するが、適切なページにユーザーをリダイレクトしたくない場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-313">SetAuthCookie is useful if you want to create the forms authentication ticket and add it to the Cookies collection, but do not want to redirect the user to the appropriate page.</span></span> <span data-ttu-id="f26ce-314">おそらく、ログイン ページのいくつか別のページに送信したりします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-314">Perhaps you want to keep them on the login page or send them to some alternate page.</span></span>

<span data-ttu-id="f26ce-315">ユーザーにログインし、適切なページにリダイレクトするので、RedirectFromLoginPage を使用してみましょう。</span><span class="sxs-lookup"><span data-stu-id="f26ce-315">Since we want to log in the user and redirect them to the appropriate page, let's use RedirectFromLoginPage.</span></span> <span data-ttu-id="f26ce-316">更新ログイン ボタンのクリック イベント ハンドラー、2 つのコメントの TODO 行を次のコード行に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-316">Update the LoginButton's Click event handler, replacing the two commented TODO lines with the following line of code:</span></span>

<span data-ttu-id="f26ce-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span><span class="sxs-lookup"><span data-stu-id="f26ce-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span></span>

<span data-ttu-id="f26ce-318">フォーム認証チケットのユーザー名テキスト ボックスのテキストのプロパティを使用して、フォーム認証チケットを作成するときに*username*パラメーター、および RememberMe のチェック ボックスのチェック状態、 *persistCookie*パラメーター。</span><span class="sxs-lookup"><span data-stu-id="f26ce-318">When creating the forms authentication ticket we use the UserName TextBox's Text property for the forms authentication ticket *username* parameter, and the checked state of the RememberMe CheckBox for the *persistCookie* parameter.</span></span>

<span data-ttu-id="f26ce-319">ログイン ページをテストするには、ブラウザーでアクセスします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-319">To test the login page, visit it in a browser.</span></span> <span data-ttu-id="f26ce-320">まず「いいえ」のユーザー名と「問題」のパスワードなどの無効な資格情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-320">Start by entering invalid credentials, such as a username of "Nope" and a password of "wrong".</span></span> <span data-ttu-id="f26ce-321">[ログイン] ボタンをクリックすると、ポストバックが発生し、InvalidCredentialsMessage ラベルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-321">Upon clicking the Login button a postback will occur and the InvalidCredentialsMessage Label will be displayed.</span></span>


<span data-ttu-id="f26ce-322">[![InvalidCredentialsMessage ラベルが表示されるときに入力する資格情報が無効](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-322">[![The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span></span>

<span data-ttu-id="f26ce-323">**図 10**: The InvalidCredentialsMessage ラベルが表示されるときに入力する資格情報が無効 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image26.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-323">**Figure 10**: The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image26.png))</span></span>


<span data-ttu-id="f26ce-324">次に、有効な資格情報を入力し、[ログイン] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-324">Next, enter valid credentials and click the Login button.</span></span> <span data-ttu-id="f26ce-325">ポストバックがフォーム認証チケットが発生したときにこの時間が作成され、自動的に Default.aspx にリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-325">This time when the postback occurs a forms authentication ticket is created and you are automatically redirected back to Default.aspx.</span></span> <span data-ttu-id="f26ce-326">この時点でログイン web サイト ログインして現在を示す視覚的な手掛かりはありませんが。</span><span class="sxs-lookup"><span data-stu-id="f26ce-326">At this point you have logged in to the website, although there are no visual cues to indicate that you are currently logged in.</span></span> <span data-ttu-id="f26ce-327">プログラムで、ユーザーかどうかを確認する方法を説明します。 手順 4. では、またはページにアクセスするユーザーを識別する方法についてもいないで記録されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-327">In Step 4 we will see how to programmatically determine whether a user is logged in or not as well as how to identify the user visiting the page.</span></span>

<span data-ttu-id="f26ce-328">手順 5 では、ユーザーが、web サイトからのログを記録するための手法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-328">Step 5 examines techniques for logging a user out of the website.</span></span>

### <a name="securing-the-login-page"></a><span data-ttu-id="f26ce-329">ログイン ページのセキュリティ保護</span><span class="sxs-lookup"><span data-stu-id="f26ce-329">Securing the Login Page</span></span>

<span data-ttu-id="f26ce-330">Web サーバーにインターネット経由で、自分のパスワードを含む資格情報が送信されるときに、ユーザーは自分の資格情報を入力し、ログイン ページのフォームを送信する、*プレーン テキスト*します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-330">When the user enters her credentials and submits the login page form, the credentials – including her password – are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="f26ce-331">つまり、ネットワーク トラフィックをスニッフィング ハッカーは、ユーザー名とパスワードを確認できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-331">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="f26ce-332">これを防ぐにを使用して、ネットワーク トラフィックを暗号化するために不可欠[セキュリティで保護されたソケット レイヤー (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-332">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="f26ce-333">これにより、web サーバーによって受信されるまで、ブラウザーを離れる時点から、資格情報 (およびその全体のページの HTML マークアップ) を暗号化することが保証されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-333">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

<span data-ttu-id="f26ce-334">Web サイトには、機密情報が含まれています、しない限り、ユーザーのパスワード、プレーン テキストでネットワーク経由で送信されますそれ以外の場合のログイン ページと他のページで SSL を使用する必要はだけです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-334">Unless your website contains sensitive information, you will only need to use SSL on the login page and on other pages where the user's password would otherwise be sent over the wire in plain text.</span></span> <span data-ttu-id="f26ce-335">既定では、これは両方暗号化およびデジタル署名 (改ざんを防ぐため) するためには、フォーム認証チケットのセキュリティ保護について心配する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-335">You do not need to worry about securing the forms authentication ticket since, by default, it is both encrypted and digitally signed (to prevent tampering).</span></span> <span data-ttu-id="f26ce-336">フォーム認証チケットのセキュリティの詳細な説明については、次のチュートリアルでは表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-336">A more thorough discussion on forms authentication ticket security is presented in the following tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-337">多くの財務、医療の web サイトで SSL を使用するように構成*すべて*ページにアクセスできるユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-337">Many financial and medical websites are configured to use SSL on *all* pages accessible to authenticated users.</span></span> <span data-ttu-id="f26ce-338">このような web サイトを構築している場合は、フォーム認証チケットがセキュリティで保護された接続経由でのみ送信されるように、フォーム認証システムを構成できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-338">If you are building such a website you can configure the forms authentication system so that the forms authentication ticket is only transmitted over a secure connection.</span></span> <span data-ttu-id="f26ce-339">さまざまなフォーム認証の構成オプションを次のチュートリアルで紹介*[フォーム認証の構成と高度なトピック](forms-authentication-configuration-and-advanced-topics-cs.md)* します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-339">We will look at the various forms authentication configuration options in the next tutorial, *[Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span></span>


## <a name="step-4-detecting-authenticated-visitors-and-determining-their-identity"></a><span data-ttu-id="f26ce-340">手順 4: 認証済みユーザーを検出して、自身の Id を決定します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-340">Step 4: Detecting Authenticated Visitors and Determining Their Identity</span></span>

<span data-ttu-id="f26ce-341">この時点でフォーム認証を有効にし、初歩的なログイン ページを作成しましたが、あるユーザーが認証済みまたは匿名であるかどうかを判断方法を確認します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-341">At this point we have enabled forms authentication and created a rudimentary login page, but we have yet to examine how we can determine whether a user is authenticated or anonymous.</span></span> <span data-ttu-id="f26ce-342">特定のシナリオで異なるデータや、認証済みまたは匿名ユーザーがページにアクセスしているかどうかに応じて、情報を表示することがあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-342">In certain scenarios we may wish to display different data or information depending on whether an authenticated or anonymous user is visiting the page.</span></span> <span data-ttu-id="f26ce-343">認証されたユーザーの id を認識しておくことがよく必要さらに、します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-343">Moreover, we oftentimes need to know the identity of the authenticated user.</span></span>

<span data-ttu-id="f26ce-344">これらの手法を説明するために既存の Default.aspx ページを強化しましょう。</span><span class="sxs-lookup"><span data-stu-id="f26ce-344">Let's augment the existing Default.aspx page to illustrate these techniques.</span></span> <span data-ttu-id="f26ce-345">Default.aspx では、1 つの名前付き AuthenticatedMessagePanel と別の名前付き AnonymousMessagePanel、2 つのパネル コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-345">In Default.aspx add two Panel controls, one named AuthenticatedMessagePanel and another named AnonymousMessagePanel.</span></span> <span data-ttu-id="f26ce-346">最初のパネルで WelcomeBackMessage をという名前のラベル コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-346">Add a Label control named WelcomeBackMessage in the first Panel.</span></span> <span data-ttu-id="f26ce-347">2 番目のパネルのハイパーリンク コントロールを追加、"Log In"には、その Text プロパティとその NavigateUrl プロパティを設定"~/Login.aspx"です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-347">In the second Panel add a HyperLink control, set its Text property to "Log In" and its NavigateUrl property to "~/Login.aspx".</span></span> <span data-ttu-id="f26ce-348">この時点で Default.aspx の宣言型マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-348">At this point the declarative markup for Default.aspx should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample6.aspx)]

<span data-ttu-id="f26ce-349">ここまででおそらく想像のとおり、考え方は、認証された訪問者や匿名の訪問者に AnonymousMessagePanel だけに AuthenticatedMessagePanel だけを表示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-349">As you have probably guessed by now, the idea here is to display just the AuthenticatedMessagePanel to authenticated visitors and just the AnonymousMessagePanel to anonymous visitors.</span></span> <span data-ttu-id="f26ce-350">これを実現するには、かどうかにでユーザーがログインしているかどうかに応じて、これらのパネルの表示プロパティを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-350">To accomplish this we need to set these Panels' Visible properties depending on whether the user is logged in or not.</span></span>

<span data-ttu-id="f26ce-351">[Request.IsAuthenticated プロパティ](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx)要求が認証されているかどうかを示すブール値を返します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-351">The [Request.IsAuthenticated property](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) returns a Boolean value indicating whether the request has been authenticated.</span></span> <span data-ttu-id="f26ce-352">ページに次のコードを入力\_イベント ハンドラーのコードを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-352">Enter the following code into the Page\_Load event handler code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample7.cs)]

<span data-ttu-id="f26ce-353">このコードでは、ブラウザーで Default.aspx を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f26ce-353">With this code in place, visit Default.aspx through a browser.</span></span> <span data-ttu-id="f26ce-354">ログインにまだある場合は、ログイン ページへのリンクが表示されます (図 11 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="f26ce-354">Assuming that you have yet to log in, you will see a link to the login page (see Figure 11).</span></span> <span data-ttu-id="f26ce-355">このリンクをクリックし、サイトにログインします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-355">Click this link and log in to the site.</span></span> <span data-ttu-id="f26ce-356">手順 3. で説明したように資格情報を入力後して返されますが、Default.aspx に、この時間、ページには、「ようこそ戻る!」が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-356">As we saw in Step 3, after entering your credentials you will be returned to Default.aspx, but this time the page shows the "Welcome back!"</span></span> <span data-ttu-id="f26ce-357">メッセージ (図 12 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="f26ce-357">message (see Figure 12).</span></span>


![アクセスして、匿名でログのリンクが表示される場合](an-overview-of-forms-authentication-cs/_static/image27.png)

<span data-ttu-id="f26ce-359">**図 11**: ときにアクセスして匿名で、ログのリンクが表示されます</span><span class="sxs-lookup"><span data-stu-id="f26ce-359">**Figure 11**: When Visiting Anonymously, a Log In Link is Displayed</span></span>


![認証されたユーザーが示すように、](an-overview-of-forms-authentication-cs/_static/image28.png)

<span data-ttu-id="f26ce-361">**図 12**: 認証されたユーザーは、「ようこそ!」で表示されます</span><span class="sxs-lookup"><span data-stu-id="f26ce-361">**Figure 12**: Authenticated Users are Shown the "Welcome back!"</span></span> <span data-ttu-id="f26ce-362">メッセージ</span><span class="sxs-lookup"><span data-stu-id="f26ce-362">Message</span></span>


<span data-ttu-id="f26ce-363">使用して、現在ログオンしているユーザーの id を決定できます、 [HttpContext オブジェクト](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)の[ユーザー プロパティ](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-363">We can determine the currently logged on user's identity via the [HttpContext object](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [User property](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span></span> <span data-ttu-id="f26ce-364">HttpContext オブジェクトは、現在の要求に関する情報を表し、他のユーザーの間での応答、要求、およびセッションでは、このような共通 ASP.NET オブジェクトのホームのです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-364">The HttpContext object represents information about the current request, and is the home for such common ASP.NET objects as Response, Request, and Session, among others.</span></span> <span data-ttu-id="f26ce-365">ユーザー プロパティは、現在の HTTP 要求と実装のセキュリティ コンテキストを表す、 [IPrincipal インターフェイス](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-365">The User property represents the security context of the current HTTP request and implements the [IPrincipal interface](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span></span>

<span data-ttu-id="f26ce-366">ユーザー プロパティは、FormsAuthenticationModule で設定されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-366">The User property is set by the FormsAuthenticationModule.</span></span> <span data-ttu-id="f26ce-367">具体的には、FormsAuthenticationModule では、受信要求でフォーム認証チケットが検出されると、その新しい GenericPrincipal オブジェクトを作成し、ユーザーのプロパティに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-367">Specifically, when the FormsAuthenticationModule finds a forms authentication ticket in the incoming request, it creates a new GenericPrincipal object and assigns it to the User property.</span></span>

<span data-ttu-id="f26ce-368">(GenericPrincipal) などのプリンシパル オブジェクトでは、ユーザーの id および所属するロールについて説明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-368">Principal objects (like GenericPrincipal) provide information on the user's identity and the roles to which they belong.</span></span> <span data-ttu-id="f26ce-369">IPrincipal インターフェイスには、2 つのメンバーを定義します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-369">The IPrincipal interface defines two members:</span></span>

- <span data-ttu-id="f26ce-370">[IsInRole (*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) –、プリンシパルが、指定されたロールに属しているかを示すブール値を返すメソッド。</span><span class="sxs-lookup"><span data-stu-id="f26ce-370">[IsInRole(*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – a method that returns a Boolean value indicating if the principal belongs to the specified role.</span></span>
- <span data-ttu-id="f26ce-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – を実装するオブジェクトを返すプロパティ、 [IIdentity インターフェイス](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – a property that returns an object that implements the [IIdentity interface](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span></span> <span data-ttu-id="f26ce-372">IIdentity インターフェイスには、3 つのプロパティが定義されています: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx)、 [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx)、および[名前](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-372">The IIdentity interface defines three properties: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), and [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span></span>

<span data-ttu-id="f26ce-373">次のコードを使用して現在のユーザーの名前を判断できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-373">We can determine the name of the current visitor using the following code:</span></span>

<span data-ttu-id="f26ce-374">文字列の currentUsersName User.Identity.Name; を =</span><span class="sxs-lookup"><span data-stu-id="f26ce-374">string currentUsersName = User.Identity.Name;</span></span>

<span data-ttu-id="f26ce-375">フォーム認証の使用時に、 [FormsIdentity オブジェクト](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx)GenericPrincipal の Identity プロパティが作成されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-375">When using forms authentication, a [FormsIdentity object](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) is created for the GenericPrincipal's Identity property.</span></span> <span data-ttu-id="f26ce-376">FormsIdentity クラスは、常に文字列を返します"Forms"、AuthenticationType プロパティと、IsAuthenticated プロパティを true にします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-376">The FormsIdentity class always returns the string "Forms" for its AuthenticationType property and true for its IsAuthenticated property.</span></span> <span data-ttu-id="f26ce-377">Name プロパティは、フォーム認証チケットを作成するときに指定されたユーザー名を返します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-377">The Name property returns the username specified when creating the forms authentication ticket.</span></span> <span data-ttu-id="f26ce-378">FormsIdentity にはこれら 3 つのプロパティに加えて、基になる認証チケットを使用してへのアクセスが含まれています、[プロパティのチケット](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-378">In addition to these three properties, FormsIdentity includes access to the underlying authentication ticket via its [Ticket property](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span></span> <span data-ttu-id="f26ce-379">Ticket プロパティは、型のオブジェクトを返します[FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx)、有効期限、IsPersistent、IssueDate、名などのプロパティを持ちます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-379">The Ticket property returns an object of type [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), which has properties like Expiration, IsPersistent, IssueDate, Name, and so on.</span></span>

<span data-ttu-id="f26ce-380">重要な点を次に示しますを取り去る、 *username* 、FormsAuthentication.GetAuthCookie で指定されたパラメーター (*ユーザー名*、 *persistCookie*)、FormsAuthentication.SetAuthCookie (*username*、 *persistCookie*)、および FormsAuthentication.RedirectFromLoginPage (*username*、 *persistCookie*) メソッドは User.Identity.Name によって返されるのと同じ値です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-380">The important point to take away here is that the *username* parameter specified in the FormsAuthentication.GetAuthCookie(*username*, *persistCookie*), FormsAuthentication.SetAuthCookie(*username*, *persistCookie*), and FormsAuthentication.RedirectFromLoginPage(*username*, *persistCookie*) methods is the same value returned by User.Identity.Name.</span></span> <span data-ttu-id="f26ce-381">さらに、これらのメソッドによって作成された認証チケットは//新しい一般プリンシパルを FormsIdentity オブジェクトにキャストしてチケット プロパティにアクセスして利用できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-381">Moreover, the authentication ticket created by these methods is available by casting User.Identity to a FormsIdentity object and then accessing the Ticket property:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample8.cs)]

<span data-ttu-id="f26ce-382">Default.aspx でより個人的なメッセージを説明しましょう。</span><span class="sxs-lookup"><span data-stu-id="f26ce-382">Let's provide a more personalized message in Default.aspx.</span></span> <span data-ttu-id="f26ce-383">ページを更新する\_WelcomeBackMessage ラベルの Text プロパティには、文字列が割り当てられているように、イベント ハンドラーを読み込む"こそ*username*!"</span><span class="sxs-lookup"><span data-stu-id="f26ce-383">Update the Page\_Load event handler so that the WelcomeBackMessage Label's Text property is assigned the string "Welcome back, *username*!"</span></span>

<span data-ttu-id="f26ce-384">WelcomeBackMessage.Text =「ようこそ」+ User.Identity.Name +"!"です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span></span>

<span data-ttu-id="f26ce-385">図 13 は、(Scott のユーザーとしてログイン) の場合、この変更の効果を示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-385">Figure 13 shows the effect of this modification (when logging in as user Scott).</span></span>


![ウェルカム メッセージを含むユーザーの名前で現在ログオンしています。](an-overview-of-forms-authentication-cs/_static/image29.png)

<span data-ttu-id="f26ce-387">**図 13**: ウェルカム メッセージを含むユーザーの名前で現在ログオンしています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-387">**Figure 13**: The Welcome Message Includes the Currently Logged In User's Name</span></span>


### <a name="using-the-loginview-and-loginname-controls"></a><span data-ttu-id="f26ce-388">LoginView および LoginName コントロールの使用</span><span class="sxs-lookup"><span data-stu-id="f26ce-388">Using the LoginView and LoginName Controls</span></span>

<span data-ttu-id="f26ce-389">共通の要件は、認証済みおよび匿名ユーザーに別のコンテンツを表示します。そのため、現在ログオンしているユーザーの名前を表示されています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-389">Displaying different content to authenticated and anonymous users is a common requirement; so is displaying the name of the currently logged on user.</span></span> <span data-ttu-id="f26ce-390">そのため、ASP.NET には、1 行のコードを記述する必要はありませんが、図 13 に示すように同じ機能を提供する 2 つの Web コントロールが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-390">For that reason, ASP.NET includes two Web controls that provide the same functionality shown in Figure 13, but without the need to write a single line of code.</span></span>

<span data-ttu-id="f26ce-391">[LoginView コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)テンプレートに基づく Web コントロールを簡単に認証と匿名ユーザーに別のデータを表示することができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-391">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) is a template-based Web control that makes it easy to display different data to authenticated and anonymous users.</span></span> <span data-ttu-id="f26ce-392">LoginView には、2 つの定義済みテンプレートが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-392">The LoginView includes two predefined templates:</span></span>

- <span data-ttu-id="f26ce-393">AnonymousTemplate – このテンプレートに追加されたすべてのマークアップは、匿名の訪問者にのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-393">AnonymousTemplate – any markup added to this template is only displayed to anonymous visitors.</span></span>
- <span data-ttu-id="f26ce-394">LoggedInTemplate – このテンプレートのマークアップは、認証されたユーザーにのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-394">LoggedInTemplate – this template's markup is shown only to authenticated users.</span></span>

<span data-ttu-id="f26ce-395">Site.master、私たちのサイトのマスター ページを LoginView コントロールを追加してみましょう。</span><span class="sxs-lookup"><span data-stu-id="f26ce-395">Let's add the LoginView control to our site's master page, Site.master.</span></span> <span data-ttu-id="f26ce-396">LoginView コントロールだけを追加するのではなく、両方を新しい ContentPlaceHolder コントロールを追加してみましょうとし、その新しい ContentPlaceHolder 内 LoginView コントロールを配置します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-396">Rather than adding just the LoginView control, though, let's add both a new ContentPlaceHolder control and then put the LoginView control within that new ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-397">この判断に"the rationale"は、間もなく明白になります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-397">The rationale for this decision will become apparent shortly.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-398">LoginView コントロールは、AnonymousTemplate と LoggedInTemplate だけでなく、ロール固有のテンプレートを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-398">In addition to the AnonymousTemplate and LoggedInTemplate, the LoginView control can include role-specific templates.</span></span> <span data-ttu-id="f26ce-399">ロール固有のテンプレートは、指定されたロールに属しているユーザーにのみ、マークアップを表示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-399">Role-specific templates show markup only to those users that belong to a specified role.</span></span> <span data-ttu-id="f26ce-400">今後のチュートリアルでは、LoginView コントロールのロール ベースの機能を見ていきます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-400">We will examine the role-based features of the LoginView control in a future tutorial.</span></span>


<span data-ttu-id="f26ce-401">内のナビゲーションで、マスター ページに LoginContent を名前付きプレース ホルダーを追加することで開始&lt;div&gt;要素。</span><span class="sxs-lookup"><span data-stu-id="f26ce-401">Start by adding a ContentPlaceHolder named LoginContent into the master page within the navigation &lt;div&gt; element.</span></span> <span data-ttu-id="f26ce-402">結果として得られるマークアップを配置することに、ソース ビューのツールボックスから ContentPlaceHolder コントロールをドラッグすることだけできますのすぐ上、"TODO: メニューの移動は... ここで"テキスト。</span><span class="sxs-lookup"><span data-stu-id="f26ce-402">You can simply drag a ContentPlaceHolder control from the Toolbox onto the Source view, placing the resulting markup right above the "TODO: Menu will go here…" text.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample9.aspx)]

<span data-ttu-id="f26ce-403">次に、LoginContent ContentPlaceHolder 内 LoginView コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-403">Next, add a LoginView control within the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-404">マスター ページの ContentPlaceHolder のコントロールに配置するコンテンツと見なされます*既定のコンテンツ*プレース ホルダーの。</span><span class="sxs-lookup"><span data-stu-id="f26ce-404">Content placed into the master page's ContentPlaceHolder controls are considered *default content* for the ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-405">このマスター ページを使用する ASP.NET ページは、各プレース ホルダーを独自のコンテンツを指定またはマスター ページの既定のコンテンツを使用します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-405">That is, ASP.NET pages that use this master page can specify their own content for each ContentPlaceHolder or use the master page's default content.</span></span>

<span data-ttu-id="f26ce-406">ツールボックスの [ログイン] タブは、LoginView、およびその他のログインに関連するコントロールに配置されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-406">The LoginView and other login-related controls are located in the Toolbox's Login tab.</span></span>


![ツールボックスで LoginView コントロール](an-overview-of-forms-authentication-cs/_static/image30.png)

<span data-ttu-id="f26ce-408">**図 14**: ツールボックスに LoginView コントロール</span><span class="sxs-lookup"><span data-stu-id="f26ce-408">**Figure 14**: The LoginView Control in the Toolbox</span></span>


<span data-ttu-id="f26ce-409">次に、2 つ追加&lt;br/&gt; LoginView コントロールでの直後後がまだ、プレース ホルダー内にある要素。</span><span class="sxs-lookup"><span data-stu-id="f26ce-409">Next, add two &lt;br /&gt; elements immediately after the LoginView control, but still within the ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-410">この時点では、ナビゲーション&lt;div&gt;要素のマークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-410">At this point, the navigation &lt;div&gt; element's markup should look like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample10.aspx)]

<span data-ttu-id="f26ce-411">デザイナーまたは宣言型マークアップから LoginView のテンプレートを定義できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-411">The LoginView's templates can be defined from the Designer or the declarative markup.</span></span> <span data-ttu-id="f26ce-412">Visual Studio のデザイナーでは、ドロップダウン リストで構成されているテンプレートを一覧表示、LoginView のスマート タグを展開します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-412">From Visual Studio's Designer, expand the LoginView's smart tag, which lists the configured templates in a drop-down list.</span></span> <span data-ttu-id="f26ce-413">型で、テキスト「こんにちは、よそ者」AnonymousTemplate; に次に、ハイパーリンク コントロールを追加し、"Log In"にテキストと NavigateUrl プロパティを設定し、"~/Login.aspx"、それぞれします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-413">Type in the text "Hello, stranger" into the AnonymousTemplate; next, add a HyperLink control and set its Text and NavigateUrl properties to "Log In" and "~/Login.aspx", respectively.</span></span>

<span data-ttu-id="f26ce-414">AnonymousTemplate を構成した後、LoggedInTemplate に切り替えるし、テキスト、「ようこそ」を入力します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-414">After configuring the AnonymousTemplate, switch to the LoggedInTemplate and enter the text, "Welcome back, ".</span></span> <span data-ttu-id="f26ce-415">LoginName コントロールをツールボックスから、「ようこそ、」テキストの直後に配置すること、LoggedInTemplate にドラッグします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-415">Then drag a LoginName control from the Toolbox into the LoggedInTemplate, placing it immediately after the "Welcome back, " text.</span></span> <span data-ttu-id="f26ce-416">[LoginName コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx)、意味の名前として、現在ログインしているユーザーの名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-416">The [LoginName control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), as its name implies, displays the name of the currently logged in user.</span></span> <span data-ttu-id="f26ce-417">内部的には、LoginName コントロールは、User.Identity.Name プロパティだけを出力します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-417">Internally, the LoginName control simply outputs the User.Identity.Name property</span></span>

<span data-ttu-id="f26ce-418">LoginView のテンプレートにこれらの追加を行った後マークアップは次のようになります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-418">After making these additions to the LoginView's templates, the markup should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample11.aspx)]

<span data-ttu-id="f26ce-419">これにより、Site.master マスター ページに、web サイト内の各ページに、ユーザーが認証されているかどうかに応じて、別のメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-419">With this addition to the Site.master master page, each page in our website will display a different message depending on whether the user is authenticated.</span></span> <span data-ttu-id="f26ce-420">図 15 は、ユーザー Jisun ブラウザーからアクセスすると、Default.aspx ページを示しています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-420">Figure 15 shows the Default.aspx page when visited through a browser by user Jisun.</span></span> <span data-ttu-id="f26ce-421">「、お帰りなさい Jisun」メッセージが 2 回繰り返されます。 コンテンツ (パネル コントロールとプログラム ロジック) 経由で領域 (LoginView コントロールを追加しました) で、左側のマスター ページのナビゲーション セクションでは 1 回と Default.aspx の中に 2 回です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-421">The "Welcome back, Jisun" message is repeated twice: once in the master page's navigation section on the left (via the LoginView control we just added) and once in the Default.aspx's content area (via Panel controls and programmatic logic).</span></span>


![LoginView コントロールを表示します](an-overview-of-forms-authentication-cs/_static/image31.png)

<span data-ttu-id="f26ce-423">**図 15**:、LoginView コントロールが表示されます「お帰りなさい、Jisun」。</span><span class="sxs-lookup"><span data-stu-id="f26ce-423">**Figure 15**: The LoginView Control Displays "Welcome back, Jisun."</span></span>


<span data-ttu-id="f26ce-424">マスター ページを追加、LoginView は、弊社サイト上のすべてのページに表示できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-424">Because we added the LoginView to the master page, it can appear in every page on our site.</span></span> <span data-ttu-id="f26ce-425">ただし、ある可能性があります web ページにこのメッセージを表示するはありません。</span><span class="sxs-lookup"><span data-stu-id="f26ce-425">However, there may be web pages where we don't want to show this message.</span></span> <span data-ttu-id="f26ce-426">このような 1 つのページでは、ログイン ページへのリンクように見える場所にあるため、ログイン ページです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-426">One such page is the login page, since a link to the login page seems out of place there.</span></span> <span data-ttu-id="f26ce-427">マスター ページで ContentPlaceHolder の LoginView コントロールに配置しましたので、コンテンツ ページで、この既定のマークアップを無効にできます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-427">Since we placed the LoginView control in a ContentPlaceHolder in the master page, we can override this default markup in our content page.</span></span> <span data-ttu-id="f26ce-428">Login.aspx を開き、デザイナーに移動します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-428">Open Login.aspx and go to the Designer.</span></span> <span data-ttu-id="f26ce-429">コンテンツ コントロールを明示的に定義されていますされませんのででマスター ページで LoginContent ContentPlaceHolder の Login.aspx、ログイン ページは、このプレース ホルダーのマスター ページの既定のマークアップが表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-429">Since we have not explicitly defined a Content control in Login.aspx for the LoginContent ContentPlaceHolder in the master page, the login page will show the master page's default markup for this ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-430">確認できますこの – デザイナーを通じて LoginContent ContentPlaceHolder (LoginView コントロール) の既定のマークアップを示しています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-430">You can see this through the Designer – the LoginContent ContentPlaceHolder shows the default markup (the LoginView control).</span></span>


<span data-ttu-id="f26ce-431">[![マスター ページの LoginContent ContentPlaceHolder のログイン ページがコンテンツにある既定値を示します](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-431">[![The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span></span>

<span data-ttu-id="f26ce-432">**図 16**: ログイン ページは、マスター ページの LoginContent ContentPlaceHolder のコンテンツの既定の表示 ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image34.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-432">**Figure 16**: The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image34.png))</span></span>


<span data-ttu-id="f26ce-433">LoginContent ContentPlaceHolder の既定のマークアップをオーバーライドするには、デザイナー内の領域を右クリックし、コンテキスト メニューからカスタム コンテンツの作成のオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-433">To override the default markup for the LoginContent ContentPlaceHolder, simply right-click on the region in the Designer and choose the Create Custom Content option from the context menu.</span></span> <span data-ttu-id="f26ce-434">(Visual Studio 2008、プレース ホルダーを使用してが含まれる場合、スマート タグを選択すると、同じオプションを提供します)。ページのマークアップにされ、新しいコンテンツ コントロールが追加されますをこのページのカスタム コンテンツを定義できます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-434">(When using Visual Studio 2008 the ContentPlaceHolder includes a smart tag that, when selected, offers the same option.) This adds a new Content control to the page's markup and thereby allows us to define custom content for this page.</span></span> <span data-ttu-id="f26ce-435">「ログインしてください...」、ここでは、カスタム メッセージを追加することも、みましょうだけ空白のままにすることができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-435">You could add a custom message here, such as "Please log in…", but let's just leave this blank.</span></span>

> [!NOTE]
> <span data-ttu-id="f26ce-436">Visual Studio 2005 では、空を作成カスタム コンテンツを作成する ASP.NET ページにコントロールのコンテンツします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-436">In Visual Studio 2005, creating custom content creates an empty Content control in the ASP.NET page.</span></span> <span data-ttu-id="f26ce-437">Visual Studio 2008 では、ただし、カスタム コンテンツを作成するコピー、マスター ページの既定のコンテンツを新しく作成されたコンテンツ コントロールにします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-437">In Visual Studio 2008, however, creating custom content copies the master page's default content into the newly created Content control.</span></span> <span data-ttu-id="f26ce-438">Visual Studio 2008 を使用している場合、新しいコンテンツ コントロールを作成した後を確認してくださいマスター ページからコピーされたコンテンツをクリアするには</span><span class="sxs-lookup"><span data-stu-id="f26ce-438">If you are using Visual Studio 2008, then, after creating the new Content control make sure to clear out the content copied over from the master page.</span></span>


<span data-ttu-id="f26ce-439">図 17 では、この変更を行った後、ブラウザーからアクセスしたときの Login.aspx ページを示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-439">Figure 17 shows the Login.aspx page when visited from a browser after making this change.</span></span> <span data-ttu-id="f26ce-440">しない「こんにちは、よそ者」はまたは"こそ*ユーザー名*"左側のナビゲーションでメッセージ&lt;div&gt;は Default.aspx にアクセスするとします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-440">Note that there is no "Hello, stranger" or "Welcome back, *username*" message in the left navigation &lt;div&gt; as there is when visiting Default.aspx.</span></span>


<span data-ttu-id="f26ce-441">[![ログイン ページには、既定の LoginContent プレース ホルダーのマークアップが非表示になります](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-441">[![The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span></span>

<span data-ttu-id="f26ce-442">**図 17**: ログイン ページには、既定の LoginContent ContentPlaceHolder のマークアップが非表示になります ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image37.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-442">**Figure 17**: The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image37.png))</span></span>


## <a name="step-5-logging-out"></a><span data-ttu-id="f26ce-443">手順 5: ログアウト</span><span class="sxs-lookup"><span data-stu-id="f26ce-443">Step 5: Logging Out</span></span>

<span data-ttu-id="f26ce-444">手順 3 では、サイトへのユーザーのログインのログイン ページを構築しましたが、あるユーザーがログアウトする方法について。内のユーザーをログインするためのメソッドに加え、FormsAuthentication クラスも用意されています、 [SignOut メソッド](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-444">In Step 3 we looked at building a login page to log a user in to the site, but we have yet to see how to log a user out. In addition to methods for logging a user in, the FormsAuthentication class also provides a [SignOut method](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span></span> <span data-ttu-id="f26ce-445">SignOut メソッドでは、それによってサイトからユーザーをログイン フォーム認証チケットは、単に破棄します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-445">The SignOut method simply destroys the forms authentication ticket, thereby logging the user out of the site.</span></span>

<span data-ttu-id="f26ce-446">ログアウト リンクは、このような一般的な機能を提供する ASP.NET には、ユーザーがログアウトする設計にコントロールが含まれています。[LoginStatus コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx)"Login"linkbutton コントロールまたはユーザーの認証の状態に応じて、"Logout"LinkButton が表示されます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-446">Offering a log out link is such a common feature that ASP.NET includes a control specifically designed to log a user out. The [LoginStatus control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) displays either a "Login" LinkButton or a "Logout" LinkButton, depending on the user's authentication status.</span></span> <span data-ttu-id="f26ce-447">"Logout"LinkButton が認証されたユーザーに表示されますが、匿名ユーザーは、"Login"LinkButton がレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-447">A "Login" LinkButton is rendered for anonymous users, whereas a "Logout" LinkButton is displayed to authenticated users.</span></span> <span data-ttu-id="f26ce-448">"Login"と"Logout"Linkbutton のテキストは、LoginStatus を使用して構成できる LoginText および LogoutText プロパティ。</span><span class="sxs-lookup"><span data-stu-id="f26ce-448">The text for the "Login" and "Logout" LinkButtons can be configured via the LoginStatus's LoginText and LogoutText properties.</span></span>

<span data-ttu-id="f26ce-449">ログイン ページにリダイレクトを発行元となる、ポストバックを発生させる"Login"LinkButton をクリックします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-449">Clicking the "Login" LinkButton causes a postback, from which a redirect is issued to the login page.</span></span> <span data-ttu-id="f26ce-450">"Logout"LinkButton をクリックし、LoginStatus コントロール FormsAuthentication.SignOff メソッドの呼び出しをページにユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-450">Clicking the "Logout" LinkButton causes the LoginStatus control to invoke the FormsAuthentication.SignOff method and then redirects the user to a page.</span></span> <span data-ttu-id="f26ce-451">ログオンしているページは LogoutAction プロパティは、次の 3 つの値のいずれかに割り当てることができますに依存する無効なユーザーがリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-451">The page the logged off user is redirected to depends on the LogoutAction property, which can be assigned to one of the three following values:</span></span>

- <span data-ttu-id="f26ce-452">既定の更新だけ訪問したページにユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-452">Refresh – the default; redirects the user to the page they were just visiting.</span></span> <span data-ttu-id="f26ce-453">だけ訪問したページが、FormsAuthenticationModule は自動的に匿名ユーザーは、許可しない場合は、ログイン ページに、ユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-453">If the page they were just visiting does not allow anonymous users, then the FormsAuthenticationModule will automatically redirect the user to the login page.</span></span>

<span data-ttu-id="f26ce-454">ここで、リダイレクトが実行される理由が気ができます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-454">You may be curious as to why a redirect is performed here.</span></span> <span data-ttu-id="f26ce-455">場合は、ユーザーが、同じページに保持する理由の明示的なリダイレクトが必要でしょうか。</span><span class="sxs-lookup"><span data-stu-id="f26ce-455">If the user wants to remain on the same page, why the need for the explicit redirect?</span></span> <span data-ttu-id="f26ce-456">理由は、「ログオフ」LinkButton がクリックされたときに、ユーザーがあるフォーム認証チケットのクッキーのコレクションであるためにです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-456">The reason is because when the "Logoff" LinkButton is clicked, the user still has the forms authentication ticket in their cookies collection.</span></span> <span data-ttu-id="f26ce-457">そのため、認証された要求のポストバック要求です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-457">Consequently, the postback request is an authenticated request.</span></span> <span data-ttu-id="f26ce-458">LoginStatus コントロールが、サインアウト メソッドを呼び出しますが、FormsAuthenticationModule がユーザーを認証した後に発生します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-458">The LoginStatus control calls the SignOut method, but that happens after the FormsAuthenticationModule has authenticated the user.</span></span> <span data-ttu-id="f26ce-459">そのため、明示的なリダイレクトは、ページを再要求するブラウザーをによりします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-459">Therefore, an explicit redirect causes the browser to re-request the page.</span></span> <span data-ttu-id="f26ce-460">ブラウザー ページを再要求するまでは、フォーム認証チケットが削除され、そのため、受信要求は匿名です。</span><span class="sxs-lookup"><span data-stu-id="f26ce-460">By the time the browser re-requests the page, the forms authentication ticket has been removed and therefore the incoming request is anonymous.</span></span>

- <span data-ttu-id="f26ce-461">リダイレクト – ユーザーは、LoginStatus の LogoutPageUrl プロパティで指定された URL にリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-461">Redirect – the user is redirected to the URL specified by the LoginStatus's LogoutPageUrl property.</span></span>
- <span data-ttu-id="f26ce-462">RedirectToLoginPage – ユーザーは、ログイン ページにリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-462">RedirectToLoginPage – the user is redirected to the login page.</span></span>

<span data-ttu-id="f26ce-463">みましょうマスター ページに、LoginStatus コントロールを追加し署名したことを確認するメッセージを表示するページにユーザーに送信するリダイレクト オプションを使用するように構成します。まず Logout.aspx をという名前のルート ディレクトリで、ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-463">Let's add a LoginStatus control to the master page and configure it to use the Redirect option to send the user to a page that displays a message confirming that they have been signed out. Start by creating a page in the root directory named Logout.aspx.</span></span> <span data-ttu-id="f26ce-464">このページを関連付ける Site.master マスター ページを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="f26ce-464">Don't forget to associate this page with the Site.master master page.</span></span> <span data-ttu-id="f26ce-465">次に、出力が記録されたことをユーザーに説明するページのマークアップにメッセージを入力します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-465">Next, enter a message in the page's markup explaining to the user that they have been logged out.</span></span>

<span data-ttu-id="f26ce-466">次に、Site.master マスター ページに戻るし、LoginContent プレース ホルダーで、LoginView の下に、LoginStatus コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-466">Next, return to the Site.master master page and add a LoginStatus control beneath the LoginView in the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="f26ce-467">リダイレクトに LoginStatus コントロールの LogoutAction プロパティとその LogoutPageUrl プロパティを設定"~/Logout.aspx"。</span><span class="sxs-lookup"><span data-stu-id="f26ce-467">Set the LoginStatus control's LogoutAction property to Redirect and its LogoutPageUrl property to "~/Logout.aspx".</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample12.aspx)]

<span data-ttu-id="f26ce-468">LoginStatus が LoginView コントロールの外側にあるため、匿名、認証済みの両方のユーザーに表示されますが、[ok] ため、"Login"や"Logout"LinkButton、LoginStatus が正しく表示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-468">Since the LoginStatus is outside of the LoginView control, it will appear for both anonymous and authenticated users, but that's OK because the LoginStatus will correctly display a "Login" or "Logout" LinkButton.</span></span> <span data-ttu-id="f26ce-469">LoginStatus コントロールを追加すると、AnonymousTemplate 内の「ログで」ハイパーリンクが余分なので削除します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-469">With the addition of the LoginStatus control, the "Log In" HyperLink in the AnonymousTemplate is superfluous, so remove it.</span></span>

<span data-ttu-id="f26ce-470">図 18 は、Jisun にアクセスしたときに、Default.aspx を示します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-470">Figure 18 shows Default.aspx when Jisun visits.</span></span> <span data-ttu-id="f26ce-471">左側の列が「、お帰りなさい Jisun」ログアウトへのリンクと共にメッセージを表示することに注意してください。ログアウト LinkButton をクリックするとポストバックが発生する、Jisun が、システムでは、サインアウトおよび Logout.aspx にリダイレクトさせます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-471">Note that the left column displays the message, "Welcome back, Jisun" along with a link to log out. Clicking the log out LinkButton causes a postback, signs Jisun out of the system, and then redirects her to Logout.aspx.</span></span> <span data-ttu-id="f26ce-472">図 19 に示すように達した Logout.aspx の Jisun 時間で彼女署名済みであるため匿名。</span><span class="sxs-lookup"><span data-stu-id="f26ce-472">As Figure 19 shows, by the time Jisun reaches Logout.aspx she has already been signed out and is therefore anonymous.</span></span> <span data-ttu-id="f26ce-473">左側の列がテキストを表示するそのため、「ようこそ、よそ者」と、ログイン ページへのリンク。</span><span class="sxs-lookup"><span data-stu-id="f26ce-473">Consequently, the left column shows the text "Welcome, stranger" and a link to the login page.</span></span>


<span data-ttu-id="f26ce-474">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-474">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span></span>

<span data-ttu-id="f26ce-475">**図 18**: Default.aspx の表示「、お帰りなさい Jisun」"Logout"LinkButton と共に ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image40.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-475">**Figure 18**: Default.aspx Shows "Welcome Back, Jisun" Along with a "Logout" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image40.png))</span></span>


<span data-ttu-id="f26ce-476">[![Logout.aspx 示します](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="f26ce-476">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span></span>

<span data-ttu-id="f26ce-477">**図 19**: Logout.aspx を示しています「ようこそ、よそ者」と"Login"LinkButton ([フルサイズの画像を表示する をクリックします](an-overview-of-forms-authentication-cs/_static/image43.png))。</span><span class="sxs-lookup"><span data-stu-id="f26ce-477">**Figure 19**: Logout.aspx Shows "Welcome, stranger" Along with a "Login" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image43.png))</span></span>


> [!NOTE]
> <span data-ttu-id="f26ce-478">(手順 4. で Login.aspx に対して実行した) など、マスター ページの LoginContent ContentPlaceHolder を非表示にする Logout.aspx ページをカスタマイズすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-478">I encourage you to customize the Logout.aspx page to hide the master page's LoginContent ContentPlaceHolder (like we did for Login.aspx in Step 4).</span></span> <span data-ttu-id="f26ce-479">"Login"LinkButton が、LoginStatus コントロールによって表示されるためです (下にある 1 つ「こんにちは、よそ者」)、ReturnUrl クエリ文字列パラメーターで、現在の URL を渡して、ログイン ページにユーザーを送信します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-479">The reason is because the "Login" LinkButton rendered by the LoginStatus control (the one beneath "Hello, stranger") sends the user to the login page passing the current URL in the ReturnUrl querystring parameter.</span></span> <span data-ttu-id="f26ce-480">つまりがログアウトしたユーザーは、この LoginStatus の"Login"linkbutton コントロールと、ログをクリックするは、Logout.aspx で、ユーザーが混乱することが簡単に戻るがリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="f26ce-480">In short, if a user who has logged out clicks this LoginStatus's "Login" LinkButton, and then logs in, they will be redirected back to Logout.aspx, which could easily confuse the user.</span></span>


## <a name="summary"></a><span data-ttu-id="f26ce-481">まとめ</span><span class="sxs-lookup"><span data-stu-id="f26ce-481">Summary</span></span>

<span data-ttu-id="f26ce-482">このチュートリアルではを調べる場合は、フォーム認証ワークフローの使用を開始し、ASP.NET アプリケーションでフォーム認証の実装にします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-482">In this tutorial we started with an examination of the forms authentication workflow and then turned to implementing forms authentication in an ASP.NET application.</span></span> <span data-ttu-id="f26ce-483">フォーム認証の 2 つの役割を持つ、FormsAuthenticationModule で電源が: フォーム認証チケットに基づくユーザーを識別して、承認されていないユーザーをログイン ページにリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="f26ce-483">Forms authentication is powered by the FormsAuthenticationModule, which has two responsibilities: identifying users based on their forms authentication ticket, and redirecting unauthorized users to the login page.</span></span>

<span data-ttu-id="f26ce-484">.NET Framework の FormsAuthentication クラスには、作成、検査、およびフォーム認証チケットを削除するためのメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-484">The .NET Framework's FormsAuthentication class includes methods for creating, inspecting, and removing forms authentication tickets.</span></span> <span data-ttu-id="f26ce-485">Request.IsAuthenticated プロパティとユーザー オブジェクト、要求が認証されたかどうかと、ユーザーの id に関する情報を決定するため追加のプログラムによるサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-485">The Request.IsAuthenticated property and User object provide additional programmatic support for determining whether a request is authenticated and information about the user's identity.</span></span> <span data-ttu-id="f26ce-486">ログインに関連する多くの一般的なタスクを実行するため、コーディングは不要のクイック方法を開発者に提供し、LoginView、LoginStatus、LoginName Web コントロールもあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-486">There are also the LoginView, LoginStatus, and LoginName Web controls, which give developers a quick, code-free way for performing many common login-related tasks.</span></span> <span data-ttu-id="f26ce-487">今後のチュートリアルでは、さらに詳しく説明内のログインに関連する Web コントロールやこれらを究明します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-487">We will examine these and other login-related Web controls in greater detail in future tutorials.</span></span>

<span data-ttu-id="f26ce-488">このチュートリアルでは、フォーム認証の大まかな概要を提供します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-488">This tutorial provided a cursory overview of forms authentication.</span></span> <span data-ttu-id="f26ce-489">さまざまな構成オプションを確認をどの cookieless フォーム認証チケットの動作を見る、か ASP.NET でフォーム認証チケットの内容を保護する方法の詳細されませんでした。</span><span class="sxs-lookup"><span data-stu-id="f26ce-489">We did not examine the assorted configuration options, look at how cookieless forms authentication tickets work, or explore how ASP.NET protects the contents of the forms authentication ticket.</span></span> <span data-ttu-id="f26ce-490">これらのトピックと詳細を説明します、[次のチュートリアル](forms-authentication-configuration-and-advanced-topics-cs.md)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-490">We will discuss these topics and more in the [next tutorial](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span>

<span data-ttu-id="f26ce-491">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="f26ce-491">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="f26ce-492">関連項目</span><span class="sxs-lookup"><span data-stu-id="f26ce-492">Further Reading</span></span>

<span data-ttu-id="f26ce-493">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f26ce-493">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="f26ce-494">IIS6 と iis 7 のセキュリティの変更</span><span class="sxs-lookup"><span data-stu-id="f26ce-494">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="f26ce-495">ログインの ASP.NET コントロール</span><span class="sxs-lookup"><span data-stu-id="f26ce-495">Login ASP.NET Controls</span></span>](https://msdn.microsoft.com/library/d51ttbhx.aspx)
- <span data-ttu-id="f26ce-496">[Professional ASP.NET 2.0 のセキュリティ、メンバーシップ、およびロール管理](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html)(ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="f26ce-496">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="f26ce-497">`<authentication>`要素</span><span class="sxs-lookup"><span data-stu-id="f26ce-497">The `<authentication>` Element</span></span>](https://msdn.microsoft.com/library/532aee0e.aspx)
- [<span data-ttu-id="f26ce-498">`<forms>`要素 `<authentication>`</span><span class="sxs-lookup"><span data-stu-id="f26ce-498">The `<forms>` Element for `<authentication>`</span></span>](https://msdn.microsoft.com/library/1d3t3c61.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="f26ce-499">このチュートリアルに含まれるトピックのビデオ トレーニング</span><span class="sxs-lookup"><span data-stu-id="f26ce-499">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="f26ce-500">ASP.NET で基本フォーム認証を使用する</span><span class="sxs-lookup"><span data-stu-id="f26ce-500">Using Basic Forms Authentication in ASP.NET</span></span>](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md)

## <a name="about-the-author"></a><span data-ttu-id="f26ce-501">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="f26ce-501">About the Author</span></span>

<span data-ttu-id="f26ce-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックおよびの創設者の著者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、Microsoft Web テクノロジと 1998 年から携わっています。</span><span class="sxs-lookup"><span data-stu-id="f26ce-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f26ce-503">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-503">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f26ce-504">最新の著書は[ *Sams 教える自分で ASP.NET 2.0 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-504">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f26ce-505">彼に到達できる[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f26ce-505">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f26ce-506">彼のブログにあるでまたは[ http://ScottOnWriting.NET](http://ScottOnWriting.NET)します。</span><span class="sxs-lookup"><span data-stu-id="f26ce-506">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f26ce-507">特別に感謝しています.</span><span class="sxs-lookup"><span data-stu-id="f26ce-507">Special Thanks To…</span></span>

<span data-ttu-id="f26ce-508">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="f26ce-508">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f26ce-509">このチュートリアルでは、潜在顧客レビュー担当者が、このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="f26ce-509">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f26ce-510">このチュートリアルでは、潜在顧客レビュー担当者には、Alicja Maziarz、John の Suru Teresa Murphy などがあります。</span><span class="sxs-lookup"><span data-stu-id="f26ce-510">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="f26ce-511">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="f26ce-511">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f26ce-512">場合は、筆者に[mitchell@4GuysFromRolla.comします。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f26ce-512">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f26ce-513">[前へ](security-basics-and-asp-net-support-cs.md)
> [次へ](forms-authentication-configuration-and-advanced-topics-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f26ce-513">[Previous](security-basics-and-asp-net-support-cs.md)
[Next](forms-authentication-configuration-and-advanced-topics-cs.md)</span></span>
