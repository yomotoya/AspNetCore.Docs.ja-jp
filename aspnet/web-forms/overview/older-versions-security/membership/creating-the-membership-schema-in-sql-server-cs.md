---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: SQL Server (c#) でメンバーシップ スキーマの作成 |Microsoft Docs
author: rick-anderson
description: このチュートリアルでは、を使用するには、データベースに必要なスキーマを追加するための手法を調べることで開始します。 次に、私たち wi.
ms.author: aspnetcontent
ms.date: 01/18/2008
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: c28e9735884586c43be4cf25fb2a3e5fa597832c
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37816653"
---
<a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="d87dc-104">SQL Server (c#) でメンバーシップ スキーマの作成</span><span class="sxs-lookup"><span data-stu-id="d87dc-104">Creating the Membership Schema in SQL Server (C#)</span></span>
====================
<span data-ttu-id="d87dc-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d87dc-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d87dc-106">[コードのダウンロード](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="d87dc-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="d87dc-107">このチュートリアルでは、を使用するには、データベースに必要なスキーマを追加するための手法を調べることで開始します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="d87dc-108">次に、スキーマ内のキー テーブルの確認はされ、目的と重要性について説明します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="d87dc-109">このチュートリアルでは、ASP.NET アプリケーションのメンバーシップ フレームワークが使用するプロバイダーを確認する方法を見てで終わります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>


## <a name="introduction"></a><span data-ttu-id="d87dc-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="d87dc-110">Introduction</span></span>

<span data-ttu-id="d87dc-111">Web サイトの訪問者を識別するためにフォーム認証を使用して 2 つの前のチュートリアル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="d87dc-112">フォーム認証のフレームワークでは、ユーザー web サイトにログインして、認証チケットを使用して、ページの訪問者の間でそれらを記憶する開発者が簡単です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="d87dc-113">`FormsAuthentication`クラスには、チケットを生成して、訪問者の cookie への追加のメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="d87dc-114">`FormsAuthenticationModule`すべての着信要求を調べ、有効な認証チケットを使用して、それらを作成し、関連付けます、`GenericPrincipal`と`FormsIdentity`現在の要求を持つオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="d87dc-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="d87dc-115">フォーム認証は、単にし、ユーザーの id を確認するには、そのチケットを解析、後続の要求にログインするときに、訪問者に認証チケットを付与するメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="d87dc-116">ユーザー アカウントをサポートするために web アプリケーションの場合も、ユーザー ストアを実装し、資格情報の検証、新しいユーザーは、および無数の他のユーザー アカウントに関連するタスクを登録する機能を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="d87dc-117">ASP.NET 2.0 では、前に、開発者は、これらすべてのユーザー アカウントに関連するタスクを実装するために巻き込までした。</span><span class="sxs-lookup"><span data-stu-id="d87dc-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="d87dc-118">さいわいなことに、ASP.NET チームはこの欠点を認識し、ASP.NET 2.0 メンバーシップ フレームワークを導入します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="d87dc-119">メンバーシップ フレームワークとは、中核となるユーザー アカウントに関連するタスクを実行するためのプログラム インターフェイスを提供する .NET Framework のクラスのセットです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="d87dc-120">このフレームワークが上に構築される、[プロバイダー モデル](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)、標準化された API にカスタマイズした実装をプラグインできます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="d87dc-121">説明したように、 <a id="Tutorial1"> </a> [*セキュリティの基礎と ASP.NET のサポート*](../introduction/security-basics-and-asp-net-support-cs.md)チュートリアルでは、2 つの組み込みのメンバーシップ プロバイダーが .NET Framework が付属しています: [ `ActiveDirectoryMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx)[ `SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="d87dc-122">その名のとおり、`SqlMembershipProvider`ユーザー ストアとして Microsoft SQL Server データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="d87dc-123">アプリケーションでこのプロバイダーを使用するには、ストアとして使用するには、どのようなデータベース プロバイダーに指示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="d87dc-124">ご想像のとおり、`SqlMembershipProvider`が特定のデータベース テーブル、ビュー、およびストアド プロシージャ、ユーザー ストア データベースが必要です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="d87dc-125">この予期されるスキーマを選択したデータベースに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="d87dc-126">このチュートリアルで使用するには、データベースに必要なスキーマを追加するための手法を調べることでは、`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-127">次に、スキーマ内のキー テーブルの確認はされ、目的と重要性について説明します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="d87dc-128">このチュートリアルでは、ASP.NET アプリケーションのメンバーシップ フレームワークが使用するプロバイダーを確認する方法を見てで終わります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="d87dc-129">それでは、始めましょう!</span><span class="sxs-lookup"><span data-stu-id="d87dc-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="d87dc-130">手順 1: ユーザー ストアに配置する場所を決定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="d87dc-131">ASP.NET アプリケーションのデータは通常、データベース内のテーブルの数値で格納します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="d87dc-132">実装する場合、`SqlMembershipProvider`データベース スキーマがアプリケーション データと同じデータベースまたは別のデータベース メンバーシップ スキーマを配置するかどうかを決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="d87dc-133">アプリケーション データと同じデータベースで次の理由でメンバーシップ スキーマを検索することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="d87dc-134">**保守容易性**データが 1 つのデータベースでカプセル化されたアプリケーションが簡単に理解、保守、および 2 つの独立したデータベースを持つアプリケーションよりもデプロイします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="d87dc-135">**リレーショナル整合性**アプリケーションがそれをテーブルとして、同じデータベース内のメンバーシップに関連するテーブルを配置することによりを確立できる[外部キー制約](http://en.wikipedia.org/wiki/Foreign_key)の主キーの間で、メンバーシップに関連するテーブルと関連するアプリケーションのテーブル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="d87dc-136">個別のデータベースにユーザー ストアとアプリケーション データを分離することのみ合理的それぞれ別個のデータベースを使用して、、共通のユーザー ストアを共有する必要があります複数のアプリケーションがある場合です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="d87dc-137">データベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-137">Creating a Database</span></span>

<span data-ttu-id="d87dc-138">アプリケーションが 2 番目のチュートリアルでは、データベースがまだ必要ありませんのでを構築してきました。</span><span class="sxs-lookup"><span data-stu-id="d87dc-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="d87dc-139">必要がありますいずれかのようになりました、ただし、ユーザー ストアの。</span><span class="sxs-lookup"><span data-stu-id="d87dc-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="d87dc-140">それでは 1 つ作成し、によって必要なスキーマにそれを追加、`SqlMembershipProvider`プロバイダー (手順 2 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="d87dc-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-141">このチュートリアル シリーズ全体では、使用、 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) 、アプリケーション テーブルを格納するデータベースと`SqlMembershipProvider`スキーマ。</span><span class="sxs-lookup"><span data-stu-id="d87dc-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="d87dc-142">この決定が 2 つの理由: 最初に、により、コスト - 無料 - Express Edition は SQL Server 2005; の強みで最もアクセス可能なバージョンSQL Server 2005 Express Edition データベースを配置して、web アプリケーションの直接の第 2 に、`App_Data`フォルダー、特別なセットアップ指示せず、再デプロイして、データベースをパッケージ化し、web アプリケーションはまとめて 1 つの ZIP ファイルに簡単になりますまたは、構成オプション。</span><span class="sxs-lookup"><span data-stu-id="d87dc-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="d87dc-143">非-Express Edition のバージョンの SQL Server を使用して作業を進めるにする場合もかまいません。</span><span class="sxs-lookup"><span data-stu-id="d87dc-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="d87dc-144">手順はほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-144">The steps are virtually identical.</span></span> <span data-ttu-id="d87dc-145">`SqlMembershipProvider`スキーマは任意のバージョンの Microsoft SQL Server 2000 を使用し、セットアップします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>


<span data-ttu-id="d87dc-146">ソリューション エクスプ ローラーを右クリックし、`App_Data`フォルダーと新しい項目の追加を選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="d87dc-147">(表示されない場合、`App_Data`プロジェクトのフォルダーにソリューション エクスプ ローラーでプロジェクトを右クリックし、ASP.NET フォルダーの追加 を選択および選択`App_Data`)。という名前の新しい SQL データベースを追加することも、新しい項目の追加 ダイアログ ボックスから`SecurityTutorials.mdf`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="d87dc-148">このチュートリアルでは追加、`SqlMembershipProvider`スキーマがこのデータベースには追加作成後のチュートリアルで、アプリケーションのデータをキャプチャするテーブル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>


<span data-ttu-id="d87dc-149">[![App_Data フォルダーに SecurityTutorials.mdf Database という名前の新しい SQL データベースを追加します。](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="d87dc-150">**図 1**: 追加する新しい SQL データベースの名前付き`SecurityTutorials.mdf`データベースを`App_Data`フォルダー ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>


<span data-ttu-id="d87dc-151">データベースを追加する、`App_Data`フォルダーが自動的に追加、データベース エクスプ ローラー ビュー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="d87dc-152">(非-Express Edition バージョンの Visual Studio では、データベース エクスプ ローラー呼びますサーバー エクスプ ローラー。)データベース エクスプ ローラーに移動し、単に追加された順に展開`SecurityTutorials`データベース。</span><span class="sxs-lookup"><span data-stu-id="d87dc-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="d87dc-153">画面で [データベース エクスプ ローラーが表示されない場合表示] メニューに移動し、データベース エクスプ ローラーを選択または Ctrl + Alt + S をヒットします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="d87dc-154">図 2 に示すよう、`SecurityTutorials`データベースが空でないテーブル、ビューがありませんおよびなしのストアド プロシージャが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>


<span data-ttu-id="d87dc-155">[![SecurityTutorials データベースは空です。](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="d87dc-156">**図 2**:`SecurityTutorials`データベースは現在空 ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="d87dc-157">手順 2: 追加、`SqlMembershipProvider`データベースにスキーマ</span><span class="sxs-lookup"><span data-stu-id="d87dc-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="d87dc-158">`SqlMembershipProvider`一連のテーブル、ビュー、およびストアド プロシージャ、ユーザー ストア データベースにインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="d87dc-159">使用して、これらの必要なデータベース オブジェクトを追加することができます、 [ `aspnet_regsql.exe`ツール](https://msdn.microsoft.com/library/ms229862.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="d87dc-160">このファイルにある、`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-161">`aspnet_regsql.exe`ツールには、コマンドラインの機能と、グラフィカル ユーザー インターフェイスの両方が用意されています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="d87dc-162">グラフィカル インターフェイスはよりユーザー フレンドリなとこのチュートリアルで説明されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="d87dc-163">コマンド ライン インターフェイスときに便利ですが追加、`SqlMembershipProvider`を自動化する必要があるスキーマ、またはスクリプトのテスト シナリオを自動化ビルドのようにします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>


<span data-ttu-id="d87dc-164">`aspnet_regsql.exe`ツールを使用して追加または削除*ASP.NET アプリケーション サービス*指定された SQL Server データベースにします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="d87dc-165">ASP.NET アプリケーション サービスのスキーマを網羅する、`SqlMembershipProvider`と`SqlRoleProvider`、他の ASP.NET 2.0 フレームワークの SQL ベースのプロバイダーのスキーマとします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="d87dc-166">情報の 2 つのビットを提供する必要があります、`aspnet_regsql.exe`ツール。</span><span class="sxs-lookup"><span data-stu-id="d87dc-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="d87dc-167">追加またはアプリケーションのサービスを削除するかどうかと</span><span class="sxs-lookup"><span data-stu-id="d87dc-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="d87dc-168">データベースを追加またはアプリケーションのサービス スキーマを削除します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="d87dc-169">使用するには、データベースの入力を求める、`aspnet_regsql.exe`ツールでは、セキュリティ資格情報、データベースに接続するために、データベースが存在するサーバーの名前とデータベース名を指定するよう求められます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="d87dc-170">非 Express エディションの SQL Server を使用している場合は、同じ情報を ASP.NET web ページを使用してデータベースを使用する場合、接続文字列を指定する必要があります、この情報を既に知っておくべき。</span><span class="sxs-lookup"><span data-stu-id="d87dc-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="d87dc-171">SQL Server 2005 Express Edition データベースを使用する場合は、サーバーとデータベース名を決定する、`App_Data`フォルダーは、少し複雑です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="d87dc-172">次のセクションでは、SQL Server 2005 Express Edition データベース サーバーとデータベース名を指定するための簡単な方法を調べ、`App_Data`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="d87dc-173">SQL Server 2005 Express Edition を自由に、インストールに進んでを使用していない場合、アプリケーションのサービス セクション。</span><span class="sxs-lookup"><span data-stu-id="d87dc-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theappdatafolder"></a><span data-ttu-id="d87dc-174">サーバーとデータベースの SQL Server 2005 Express Edition データベースの名前を決定する、`App_Data`フォルダー</span><span class="sxs-lookup"><span data-stu-id="d87dc-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="d87dc-175">使用するには、`aspnet_regsql.exe`ツールがサーバーとデータベース名を把握する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="d87dc-176">サーバー名が`localhost\InstanceName`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="d87dc-177">最も可能性の高い、 *InstanceName*は`SQLExpress`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="d87dc-178">ただし、手動で SQL Server 2005 Express Edition をインストールした場合 (つまり、インストールしていないことに自動的に Visual Studio のインストール中に)、別のインスタンス名が選択されている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="d87dc-179">データベース名が決定する少し複雑になります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="d87dc-180">内のデータベース、`App_Data`フォルダーが含まれるデータベース名を通常がある、[グローバル一意識別子](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)と共に、データベース ファイルへのパス。</span><span class="sxs-lookup"><span data-stu-id="d87dc-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="d87dc-181">を通じてアプリケーションのサービス スキーマを追加するにはこのデータベース名を確認する必要があります`aspnet_regsql.exe`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="d87dc-182">データベース名を確認する最も簡単な方法では、SQL Server Management Studio を調査します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="d87dc-183">SQL Server Management Studio は、SQL Server 2005 のデータベースを管理するためのグラフィカル インターフェイスを提供しますが、Express エディションの SQL Server 2005 では含まれません。</span><span class="sxs-lookup"><span data-stu-id="d87dc-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="d87dc-184">良い知らせは[ダウンロードできます](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)無料 Express エディションの SQL Server Management Studio。</span><span class="sxs-lookup"><span data-stu-id="d87dc-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-185">デスクトップにインストールされている SQL Server 2005 の非-Express Edition のバージョンもいる場合、完全なバージョンの Management Studio がインストールされている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="d87dc-186">Express Edition を以下に示すとおり、同じ手順を次に、データベース名を判断するのに完全なバージョンを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>


<span data-ttu-id="d87dc-187">データベース ファイル上の Visual Studio によって課されるすべてのロックが閉じられていることを確認する Visual Studio を閉じることで開始します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="d87dc-188">次に、SQL Server Management Studio を起動しに接続、 `localhost\InstanceName` SQL Server 2005 Express Edition のデータベース。</span><span class="sxs-lookup"><span data-stu-id="d87dc-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="d87dc-189">インスタンス名は、前述のように、可能性がありますが、`SQLExpress`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="d87dc-190">認証オプションでは、Windows 認証を選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-190">For the Authentication option, select Windows Authentication.</span></span>


<span data-ttu-id="d87dc-191">[![SQL Server 2005 Express Edition のインスタンスに接続します。](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="d87dc-192">**図 3**: SQL Server 2005 Express Edition インスタンスへの接続 ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>


<span data-ttu-id="d87dc-193">SQL Server 2005 Express Edition のインスタンスに接続したら、Management Studio には、データベース、セキュリティ設定、サーバー オブジェクト、およびなどのフォルダーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="d87dc-194">データベース タブを展開する場合が表示されますが、`SecurityTutorials.mdf`データベースが*いない*最初にデータベースをアタッチする必要があります - データベース インスタンスに登録します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="d87dc-195">データベース フォルダーを右クリックし、コンテキスト メニューから接続を選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="d87dc-196">これにより、データベースのアタッチ ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="d87dc-197">ここでは、[追加] ボタンをクリックして、参照、`SecurityTutorials.mdf`データベース、および [ok] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="d87dc-198">図 4 の後、データベースのアタッチ ダイアログ ボックスを示しています、`SecurityTutorials.mdf`データベースが選択されています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="d87dc-199">図 5 は、データベースが正常にアタッチされた後に、Management Studio のオブジェクト エクスプ ローラーを示します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>


<span data-ttu-id="d87dc-200">[![SecurityTutorials.mdf データベースをアタッチします。](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="d87dc-201">**図 4**: アタッチ、`SecurityTutorials.mdf`データベース ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>


<span data-ttu-id="d87dc-202">[![SecurityTutorials.mdf データベースが、データベース フォルダーに表示します。](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span></span>

<span data-ttu-id="d87dc-203">**図 5**:`SecurityTutorials.mdf`データベース フォルダーにデータベースが表示されます ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>


<span data-ttu-id="d87dc-204">図 5 に示すよう、`SecurityTutorials.mdf`データベースではなく abstruse 名前が付いています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="d87dc-205">変更してみましょうを覚えやすい (および簡単な形式) の名前。</span><span class="sxs-lookup"><span data-stu-id="d87dc-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="d87dc-206">データベースを右クリックし、名前の変更をコンテキスト メニューから選択、および名前を変更`SecurityTutorialsDatabase`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="d87dc-207">ファイル名は変更されません、データベース名だけを使用して SQL Server を識別します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>


<span data-ttu-id="d87dc-208">[![SecurityTutorialsDatabase にデータベースの名前変更します。](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span></span>

<span data-ttu-id="d87dc-209">**図 6**: データベースの名前を変更`SecurityTutorialsDatabase`([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>


<span data-ttu-id="d87dc-210">この時点でのサーバーとデータベースの名前がわかって、`SecurityTutorials.mdf`データベース ファイル:`localhost\InstanceName`と`SecurityTutorialsDatabase`、それぞれします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="d87dc-211">アプリケーション サービスをインストールする準備ができました、`aspnet_regsql.exe`ツール。</span><span class="sxs-lookup"><span data-stu-id="d87dc-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="d87dc-212">アプリケーション サービスをインストールします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-212">Installing the Application Services</span></span>

<span data-ttu-id="d87dc-213">起動する、`aspnet_regsql.exe`ツールで、[スタート] メニューに移動し、実行を選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="d87dc-214">入力`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe`テキスト ボックスに [ok] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="d87dc-215">ダブルクリック、適切なフォルダーをドリルダウンして、Windows エクスプ ローラーを使用する代わりに、`aspnet_regsql.exe`ファイル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="d87dc-216">どちらの方法では、同じ結果が net されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-216">Either approach will net the same results.</span></span>

<span data-ttu-id="d87dc-217">実行している、`aspnet_regsql.exe`コマンドライン引数を使用せずにツールが ASP.NET SQL Server セットアップ ウィザードのグラフィカル ユーザー インターフェイスを起動します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="d87dc-218">ウィザードでは、簡単に追加または指定したデータベースでの ASP.NET アプリケーション サービスを削除できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="d87dc-219">図 7 に示すように、ウィザードの最初の画面では、ツールの目的について説明します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>


<span data-ttu-id="d87dc-220">[![ASP.NET SQL Server セットアップ ウィザードによりを使用してメンバーシップ スキーマを追加するには](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span></span>

<span data-ttu-id="d87dc-221">**図 7**: ASP.NET SQL Server セットアップ ウィザードを使用してメンバーシップ スキーマを追加する ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>


<span data-ttu-id="d87dc-222">ウィザードの 2 番目の手順は、アプリケーション サービスを追加または削除するかどうかを私たちを要求します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="d87dc-223">テーブル、ビュー、および必要なストアド プロシージャを追加するので、 `SqlMembershipProvider`、SQL Server の構成アプリケーション サービスのオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="d87dc-224">後で、このスキーマをデータベースから削除する場合は、このウィザードを再実行が、代わりに既存のデータベース オプションのアプリケーション サービスの情報を削除を選択します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>


<span data-ttu-id="d87dc-225">[![選択、SQL Server アプリケーション サービスのオプションを構成](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span></span>

<span data-ttu-id="d87dc-226">**図 8**: SQL Server の構成をアプリケーションのサービス オプションの選択 ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>


<span data-ttu-id="d87dc-227">3 番目の手順は、データベースについては、メッセージが表示されます。 サーバー名、認証情報、およびデータベース名。</span><span class="sxs-lookup"><span data-stu-id="d87dc-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="d87dc-228">このチュートリアルに従っている必要し、追加したかどうか、`SecurityTutorials.mdf`データベースを`App_Data`に接続されている`localhost\InstanceName`、名前を変更する`SecurityTutorialsDatabase`、次の値を使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="d87dc-229">サーバー: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="d87dc-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="d87dc-230">Windows 認証</span><span class="sxs-lookup"><span data-stu-id="d87dc-230">Windows authentication</span></span>
- <span data-ttu-id="d87dc-231">データベース: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="d87dc-231">Database: `SecurityTutorialsDatabase`</span></span>


<span data-ttu-id="d87dc-232">[![データベースの情報を入力します。](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span></span>

<span data-ttu-id="d87dc-233">**図 9**: データベースの情報を入力します ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>


<span data-ttu-id="d87dc-234">データベースの情報を入力した後、[次へ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-234">After entering the database information, click Next.</span></span> <span data-ttu-id="d87dc-235">最後の手順では、実行される手順をまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="d87dc-236">次に、アプリケーション サービスをインストールし、ウィザードを完了し、[完了] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-237">Management Studio を使用してデータベースをアタッチし、データベース ファイルの名前を変更した場合、データベースをデタッチおよび Management Studio を閉じて、Visual Studio をもう一度開くことを確認します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="d87dc-238">デタッチするには、`SecurityTutorialsDatabase`データベース、データベース名を右クリックして、タスク メニューからデタッチします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>


<span data-ttu-id="d87dc-239">ウィザードの完了には、Visual Studio に戻り、データベース エクスプ ローラーに移動します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="d87dc-240">[テーブル] フォルダーを展開します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-240">Expand the Tables folder.</span></span> <span data-ttu-id="d87dc-241">一連のプレフィックスで始まる名前のテーブルを表示する必要があります`aspnet_`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="d87dc-242">同様に、さまざまなビューとストアド プロシージャは、ビューとストアド プロシージャのフォルダーの下で確認できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="d87dc-243">これらのデータベース オブジェクトは、アプリケーションのサービス スキーマを構成します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="d87dc-244">手順 3 でのメンバーシップと役割に固有のデータベース オブジェクトを見ていきます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>


<span data-ttu-id="d87dc-245">[![さまざまなテーブル、ビュー、およびストアド プロシージャがデータベースに追加されました](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span></span>

<span data-ttu-id="d87dc-246">**図 10**: する各種のテーブル、ビュー、およびストアド プロシージャがデータベースに追加されました ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d87dc-247">`aspnet_regsql.exe`ツールのグラフィカル ユーザー インターフェイスは、アプリケーション全体のサービス スキーマをインストールします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="d87dc-248">実行するときに、`aspnet_regsql.exe`コマンドラインからどのような特定のアプリケーション サービスをインストール (または削除) のコンポーネントを指定できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="d87dc-249">そのため、テーブルだけを追加する場合は、ビュー、およびストアド プロシージャのために必要な`SqlMembershipProvider`と`SqlRoleProvider`実行プロバイダー`aspnet_regsql.exe`コマンドラインから。</span><span class="sxs-lookup"><span data-stu-id="d87dc-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="d87dc-250">または、手動で実行できます、適切な T-SQL のサブセットで使用されるスクリプトを作成する`aspnet_regsql.exe`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="d87dc-251">これらのスクリプトにある、`WINDIR%\Microsoft.Net\Framework\v2.0.50727\`のような名前のフォルダー `InstallCommon.sql`、`InstallMembership.sql`、`InstallRoles.sql`、 `InstallProfile.sql`、`InstallSqlState.sql`など。</span><span class="sxs-lookup"><span data-stu-id="d87dc-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>


<span data-ttu-id="d87dc-252">この時点で必要なデータベース オブジェクトを作成しましたが、`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-253">ただし、あとに使用することをメンバーシップ フレームワークに指示する、 `SqlMembershipProvider` (versus、たとえば、 `ActiveDirectoryMembershipProvider`) して、`SqlMembershipProvider`を使用する必要があります、`SecurityTutorials`データベース。</span><span class="sxs-lookup"><span data-stu-id="d87dc-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="d87dc-254">使用するには、どのようなプロバイダーを指定する方法と手順 4. で選択したプロバイダーの設定をカスタマイズする方法に注目します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="d87dc-255">まずは、作成されたデータベース オブジェクトについて詳しく説明してみましょう。</span><span class="sxs-lookup"><span data-stu-id="d87dc-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="d87dc-256">手順 3: を見て、スキーマの中核となるテーブル</span><span class="sxs-lookup"><span data-stu-id="d87dc-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="d87dc-257">ASP.NET アプリケーションのメンバーシップとロールのフレームワークを使用する場合、実装の詳細は、プロバイダーによってカプセル化されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="d87dc-258">これらのフレームワークを使用して、.NET Framework のインターフェイスはチュートリアルで将来`Membership`と`Roles`クラス。</span><span class="sxs-lookup"><span data-stu-id="d87dc-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="d87dc-259">これらの高度な Api を使用する場合は、どのようなクエリの実行によってどのようなテーブルが変更などの低レベルの詳細自分たちについて懸念する必要はありません、`SqlMembershipProvider`と`SqlRoleProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="d87dc-260">そのため、手順 2. で作成されたデータベース スキーマを調査することがなくメンバーシップとロールのフレームワークを使用しましたでした自信を持って。</span><span class="sxs-lookup"><span data-stu-id="d87dc-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="d87dc-261">ただし、アプリケーション データを格納するテーブルを作成するときにユーザーまたはロールに関連するエンティティを作成することがあります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="d87dc-262">理解することが役立ちます、`SqlMembershipProvider`と`SqlRoleProvider`スキーマの外部の確立時にアプリケーション データのテーブルと手順 2. で作成されたこれらのテーブル間の制約のキーします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="d87dc-263">さらに、特定のまれな状況で、ユーザーとやり取りする必要があります、ロールがデータベース レベルで直接格納されます (使用せず、`Membership`または`Roles`クラス)。</span><span class="sxs-lookup"><span data-stu-id="d87dc-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="d87dc-264">アプリケーションへのユーザー ストアのパーティション分割</span><span class="sxs-lookup"><span data-stu-id="d87dc-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="d87dc-265">メンバーシップとロールのフレームワークでは、1 つのユーザーおよびロール ストアは、多数の異なるアプリケーション間で共有できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="d87dc-266">ロールのメンバーシップまたはフレームワークを使用する ASP.NET アプリケーションでは、使用するには、どのようなアプリケーション パーティションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="d87dc-267">つまり、複数の web アプリケーションでは、同じユーザーおよびロール ストアを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="d87dc-268">図 11 は 3 つのアプリケーションにパーティション分割すると、ユーザーとロールのストアを示しています。 HRSite、CustomerSite、および SalesSite します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="d87dc-269">これら 3 つの web アプリケーションをそれぞれ独自の一意のユーザーとロールをまだ同じデータベース テーブルで、ユーザー アカウントとロール情報を物理的に格納すべて。</span><span class="sxs-lookup"><span data-stu-id="d87dc-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>


<span data-ttu-id="d87dc-270">[![ユーザー アカウントは、複数のアプリケーションでパーティション分割することがあります。](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="d87dc-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span></span>

<span data-ttu-id="d87dc-271">**図 11**: ユーザー アカウントがするパーティション分割されて間で複数のアプリケーション ([フルサイズの画像を表示する をクリックします](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))。</span><span class="sxs-lookup"><span data-stu-id="d87dc-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>


<span data-ttu-id="d87dc-272">`aspnet_Applications`テーブルは、これらのパーティションを定義します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="d87dc-273">ユーザー アカウント情報を格納するデータベースを使用する各アプリケーションは、このテーブル内の行によって表されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="d87dc-274">`aspnet_Applications`テーブルには 4 つの列: `ApplicationId`、 `ApplicationName`、 `LoweredApplicationName`、および`Description`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> <span data-ttu-id="d87dc-275">`ApplicationId` 種類は[ `uniqueidentifier` ](https://msdn.microsoft.com/library/ms187942.aspx)テーブルの主キー`ApplicationName`アプリケーションごとに一意のわかりやすい名前を提供します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-275">`ApplicationId` is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="d87dc-276">メンバーシップと役割に関連するテーブルにリンクして、`ApplicationId`フィールドに`aspnet_Applications`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="d87dc-277">たとえば、`aspnet_Users`テーブルで、ユーザー アカウントごとのレコードが含まれているが、 `ApplicationId` 。 外部キー フィールド以外も同上、`aspnet_Roles`テーブル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="d87dc-278">`ApplicationId`これらのテーブル内のフィールドは、アプリケーション パーティションのユーザー アカウントを指定しますまたは、ロールが所属します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="d87dc-279">ユーザー アカウント情報を格納します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-279">Storing User Account Information</span></span>

<span data-ttu-id="d87dc-280">ユーザー アカウント情報が 2 つのテーブルに格納されています:`aspnet_Users`と`aspnet_Membership`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="d87dc-281">`aspnet_Users`の不可欠なユーザー アカウント情報を保持するフィールドがテーブルに含まれています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="d87dc-282">最も関連する 3 つの列は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="d87dc-283">`UserId` 主キー (と型の`uniqueidentifier`)。</span><span class="sxs-lookup"><span data-stu-id="d87dc-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="d87dc-284">`UserName` 種類は`nvarchar(256)`になり、このパスワードをユーザーの資格情報をします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="d87dc-285">(ユーザーのパスワードは保存される、`aspnet_Membership`テーブルです)。`ApplicationId`で特定のアプリケーションにユーザー アカウントをリンク`aspnet_Applications`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="d87dc-286">ある複合[`UNIQUE`制約](https://msdn.microsoft.com/library/ms191166.aspx)上、`UserName`と`ApplicationId`列。</span><span class="sxs-lookup"><span data-stu-id="d87dc-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="d87dc-287">こうことで、特定のアプリケーションは各ユーザー名が一意でまだこれは、同じ`UserName`さまざまなアプリケーションで使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="d87dc-288">`aspnet_Membership`テーブルには、ユーザーのパスワード、電子メール アドレス、最後のログイン日と時間、およびなどのように、追加のユーザー アカウント情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="d87dc-289">内のレコードは一対一で対応、`aspnet_Users`と`aspnet_Membership`テーブル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="d87dc-290">このリレーションシップのことを確認して、`UserId`フィールドに`aspnet_Membership`テーブルの主キーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="d87dc-291">ように、`aspnet_Users`テーブル`aspnet_Membership`が含まれています、`ApplicationId`特定のアプリケーション パーティションにこの情報に結合するフィールド。</span><span class="sxs-lookup"><span data-stu-id="d87dc-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="d87dc-292">パスワードをセキュリティで保護します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-292">Securing Passwords</span></span>

<span data-ttu-id="d87dc-293">パスワードの情報が格納されている、`aspnet_Membership`テーブル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="d87dc-294">`SqlMembershipProvider`により、次の 3 つの手法の 1 つを使用してデータベースに格納するためのパスワード。</span><span class="sxs-lookup"><span data-stu-id="d87dc-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="d87dc-295">**クリア**-パスワードがプレーン テキストとしてデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="d87dc-296">このオプションを使用はお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-296">I strongly discourage using this option.</span></span> <span data-ttu-id="d87dc-297">ハッカーがバック ドアまたは - データベースへのアクセスを持つ不満を抱いている従業員を検索することで、データベースが侵害された場合は、すべて 1 つのユーザーの資格情報はれることがありますは。</span><span class="sxs-lookup"><span data-stu-id="d87dc-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="d87dc-298">**ハッシュ**-パスワードが一方向のハッシュ アルゴリズムおよびランダムに生成された salt 値を使用してハッシュされます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="d87dc-299">(Salt) と共にこのハッシュ値は、データベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="d87dc-300">**暗号化された**-パスワードの暗号化バージョンは、データベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="d87dc-301">使用されるパスワード ストレージ手法によって異なります、`SqlMembershipProvider`で指定された設定`Web.config`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="d87dc-302">カスタマイズに注目するは、`SqlMembershipProvider`手順 4. で設定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="d87dc-303">既定の動作では、パスワードのハッシュを格納します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="d87dc-304">パスワードを格納する列は`Password`、 `PasswordFormat`、および`PasswordSalt`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="d87dc-305">`PasswordFormat` 型のフィールドである`int`値を持つが、パスワードを格納するために使用される手法を示します: オフの場合は 0; Hashed の 1; 2 を暗号化します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="d87dc-306">`PasswordSalt` 使用されています。 パスワード ストレージ手法に関係なく、ランダムに生成された文字列が割り当てられています。値`PasswordSalt`パスワードのハッシュを計算する場合にのみ使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="d87dc-307">最後に、`Password`実際のパスワード データを含む列、プレーン テキスト パスワード、パスワード、または暗号化されたパスワードのハッシュは、します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="d87dc-308">表 1 は、何これら 3 つの列のようになります、さまざまなストレージ手法の MySecret パスワードを格納する場合を示しています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="d87dc-309">.</span><span class="sxs-lookup"><span data-stu-id="d87dc-309">.</span></span>

| <span data-ttu-id="d87dc-310">**ストレージ手法&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="d87dc-311">**パスワード&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="d87dc-312">**PasswordFormat&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="d87dc-313">**PasswordSalt&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d87dc-314">Clear</span><span class="sxs-lookup"><span data-stu-id="d87dc-314">Clear</span></span> | <span data-ttu-id="d87dc-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="d87dc-315">MySecret!</span></span> | <span data-ttu-id="d87dc-316">0</span><span class="sxs-lookup"><span data-stu-id="d87dc-316">0</span></span> | <span data-ttu-id="d87dc-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="d87dc-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="d87dc-318">ハッシュ</span><span class="sxs-lookup"><span data-stu-id="d87dc-318">Hashed</span></span> | <span data-ttu-id="d87dc-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="d87dc-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="d87dc-320">1</span><span class="sxs-lookup"><span data-stu-id="d87dc-320">1</span></span> | <span data-ttu-id="d87dc-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="d87dc-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="d87dc-322">暗号化</span><span class="sxs-lookup"><span data-stu-id="d87dc-322">Encrypted</span></span> | <span data-ttu-id="d87dc-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="d87dc-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="d87dc-324">2</span><span class="sxs-lookup"><span data-stu-id="d87dc-324">2</span></span> | <span data-ttu-id="d87dc-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="d87dc-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="d87dc-326">**表 1.**: パスワード MySecret を格納するときに、パスワードに関連するフィールドの値の例です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-327">特定の暗号化またはハッシュのアルゴリズムで使用される、`SqlMembershipProvider`の設定によって決まりますが、`<machineKey>`要素。</span><span class="sxs-lookup"><span data-stu-id="d87dc-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="d87dc-328">手順 3 では、この構成要素を説明した、 <a id="Tutorial3"> </a> [*フォーム認証の構成と高度なトピック*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>


### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="d87dc-329">ロールとロールの関連付けを格納します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="d87dc-330">ロール フレームワークでは、ロールのセットを定義し、どのようなユーザー ロールに属しているを指定できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="d87dc-331">この情報は 2 つのテーブルを使用して、データベースのキャプチャ:`aspnet_Roles`と`aspnet_UsersInRoles`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="d87dc-332">内の各レコード、`aspnet_Roles`テーブルは、特定のアプリケーション ロールを表します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="d87dc-333">ほぼ同じように、 `aspnet_Users` 、テーブル、`aspnet_Roles`ディスカッションに関連する 3 つの列をテーブルには。</span><span class="sxs-lookup"><span data-stu-id="d87dc-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="d87dc-334">`RoleId` 主キー (と型の`uniqueidentifier`)。</span><span class="sxs-lookup"><span data-stu-id="d87dc-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="d87dc-335">`RoleName` は `nvarchar(256)` 型です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="d87dc-336">`ApplicationId`で特定のアプリケーションにユーザー アカウントをリンク`aspnet_Applications`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="d87dc-337">複合`UNIQUE`の制約、`RoleName`と`ApplicationId`列の場合、特定のアプリケーションで各ロール名が一意であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="d87dc-338">`aspnet_UsersInRoles`テーブルは、ユーザーとロール間のマッピングとして機能します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="d87dc-339">-2 つの列がある`UserId`と`RoleId`-複合主キーを構成しているとします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="d87dc-340">手順 4: プロバイダーを指定して、その設定のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="d87dc-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="d87dc-341">すべてのメンバーシップとロールのフレームワークなどのプロバイダー モデルをサポートするフレームワークの自体の実装の詳細がないし、代わりにプロバイダー クラスには、その責任を委任します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="d87dc-342">場合は、メンバーシップ フレームワーク、`Membership`クラスは、ユーザー アカウントを管理するための API を定義しますが、任意のユーザー ストアと直接やり取りしません。</span><span class="sxs-lookup"><span data-stu-id="d87dc-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="d87dc-343">代わりに、`Membership`クラスのメソッドの手に要求の構成済みのプロバイダーを使用する、`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-344">内のメソッドのいずれかを呼び出すときに、`Membership`クラス、メンバーシップ フレームワークを認識する方法への呼び出しの委任、`SqlMembershipProvider`でしょうか。</span><span class="sxs-lookup"><span data-stu-id="d87dc-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="d87dc-345">`Membership`クラスには、 [ `Providers`プロパティ](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx)メンバーシップ フレームワークによってすべての使用可能な登録済みのプロバイダー クラスへの参照を格納しています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="d87dc-346">登録されている各プロバイダーは、関連付けられている名前と種類をが。</span><span class="sxs-lookup"><span data-stu-id="d87dc-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="d87dc-347">名前で特定のプロバイダーを参照する人が読みやすい方法を提供する、`Providers`型は、プロバイダー クラスを識別中に、コレクション。</span><span class="sxs-lookup"><span data-stu-id="d87dc-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="d87dc-348">さらに、各登録済みのプロバイダーは、構成設定を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="d87dc-349">メンバーシップ フレームワークの構成設定を含める`passwordFormat`と`requiresUniqueEmail`、多数あります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="d87dc-350">によって使用される構成設定の完全な一覧については、テーブル 2 を参照してください、`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="d87dc-351">`Providers`プロパティの内容は、web アプリケーションの構成の設定で指定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="d87dc-352">既定では、すべての web アプリケーションがあるという名前のプロバイダー`AspNetSqlMembershipProvider`型の`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-353">この既定のメンバーシップ プロバイダーが登録されている`machine.config`(ある`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span><span class="sxs-lookup"><span data-stu-id="d87dc-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="d87dc-354">上記に示すマークアップとして、 [ `<membership>`要素](https://msdn.microsoft.com/library/1b9hw62f.aspx)中にメンバーシップ フレームワークの構成設定を定義、 [ `<providers>`子要素](https://msdn.microsoft.com/library/6d4936ht.aspx)登録されているを指定しますプロバイダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="d87dc-355">追加することがありますまたはを使用して削除されたプロバイダー、 [ `<add>` ](https://msdn.microsoft.com/library/whae3t94.aspx)または[ `<remove>` ](https://msdn.microsoft.com/library/aykw9a6d.aspx)要素は使用して、 [ `<clear>` ](https://msdn.microsoft.com/library/t062y6yc.aspx)現在すべてを削除する要素登録済みのプロバイダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="d87dc-356">上記に示すマークアップとして`machine.config`という名前のプロバイダーを追加します。`AspNetSqlMembershipProvider`型の`SqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="d87dc-357">加え、`name`と`type`、属性、`<add>`要素には、さまざまな構成設定の値を定義する属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="d87dc-358">表 2 は、使用可能な一覧`SqlMembershipProvider`のそれぞれの説明と共に、特定の構成設定。</span><span class="sxs-lookup"><span data-stu-id="d87dc-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-359">表 2 に記載されているすべての既定値で定義された既定値を参照してください、`SqlMembershipProvider`クラス。</span><span class="sxs-lookup"><span data-stu-id="d87dc-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="d87dc-360">注意してくださいで構成設定はすべて`AspNetSqlMembershipProvider`の既定値に対応して、`SqlMembershipProvider`クラス。</span><span class="sxs-lookup"><span data-stu-id="d87dc-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="d87dc-361">たとえば、メンバーシップ プロバイダーに、指定されていない場合、`requiresUniqueEmail`の既定値を true に設定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="d87dc-362">ただし、`AspNetSqlMembershipProvider`の値を明示的に指定して、この既定値をオーバーライド`false`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>


| <span data-ttu-id="d87dc-363">**設定&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="d87dc-364">**説明&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="d87dc-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="d87dc-365">メンバーシップ フレームワークにより、複数のアプリケーション パーティションに分割する 1 人のユーザー ストアのことを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="d87dc-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="d87dc-366">この設定は、メンバーシップ プロバイダーによって使用されているアプリケーション パーティションの名前を示します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="d87dc-367">かどうかはこの値が明示的に指定されていない、アプリケーションの仮想ルート パスの値に、実行時に、設定されています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="d87dc-368">SQL コマンドのタイムアウト値を秒単位で指定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="d87dc-369">既定値は、30 です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="d87dc-370">内の接続文字列の名前、`<connectionStrings>`ユーザー ストア データベースへの接続に使用する要素。</span><span class="sxs-lookup"><span data-stu-id="d87dc-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="d87dc-371">この値が必要です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="d87dc-372">登録済みのプロバイダーのわかりやすい説明を提供します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="d87dc-373">ユーザーが忘れたパスワードを取得可能性があるかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="d87dc-374">既定値は `false` です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="d87dc-375">ユーザーが自分のパスワードをリセットできるかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="d87dc-376">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="d87dc-377">中に、指定した特定のユーザーに対して発生する失敗したログイン試行の最大数`passwordAttemptWindow`ユーザーがロックアウトされるまでにします。既定値は 5 です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="d87dc-378">ユーザーのパスワードで使用する必要があります英数字以外の文字の最小数。</span><span class="sxs-lookup"><span data-stu-id="d87dc-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="d87dc-379">この値は 0 と 128; で指定する必要があります。既定では 1 です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="d87dc-380">パスワードに必要な文字の最小数。</span><span class="sxs-lookup"><span data-stu-id="d87dc-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="d87dc-381">この値は 0 と 128; で指定する必要があります。既定値は、7 です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="d87dc-382">登録済みのプロバイダーの名前。</span><span class="sxs-lookup"><span data-stu-id="d87dc-382">The name of the registered provider.</span></span> <span data-ttu-id="d87dc-383">この値が必要です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="d87dc-384">分単位では、ログイン試行を追跡できませんでした。</span><span class="sxs-lookup"><span data-stu-id="d87dc-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="d87dc-385">ユーザーが無効なログイン資格情報を提供している場合`maxInvalidPasswordAttempts`時刻では、これは、ウィンドウを指定すると、ロックアウトされます。既定値は 10 です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="d87dc-386">パスワードのストレージ形式: `Clear`、 `Hashed`、または`Encrypted`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="d87dc-387">既定値は `Hashed` です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="d87dc-388">指定した場合、この正規表現が自分のパスワードを変更する場合、または新しいアカウントを作成するときに、ユーザーの選択したパスワードの強度を評価するために使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="d87dc-389">既定値は空の文字列です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="d87dc-390">彼のセキュリティの質問を取得または自分のパスワードをリセットする際にユーザーが回答する必要があるかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="d87dc-391">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="d87dc-392">特定のアプリケーション パーティション内のすべてのユーザー アカウントが一意の電子メール アドレスが必要かどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="d87dc-393">既定値は `true` です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="d87dc-394">プロバイダーの種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-394">Specifies the type of the provider.</span></span> <span data-ttu-id="d87dc-395">この値が必要です。</span><span class="sxs-lookup"><span data-stu-id="d87dc-395">This value is required.</span></span> |

<span data-ttu-id="d87dc-396">**表 2.**: メンバーシップと`SqlMembershipProvider`構成設定</span><span class="sxs-lookup"><span data-stu-id="d87dc-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="d87dc-397">ほかに`AspNetSqlMembershipProvider`のようなマークアップを追加して、アプリケーションごとにその他のメンバーシップ プロバイダーを登録することがあります、`Web.config`ファイル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-398">同じ方法でロール フレームワークの動作: で、既定の登録済みのロール プロバイダーがある`machine.config`でのアプリケーションによるごとに登録されているプロバイダーをカスタマイズすることが、`Web.config`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="d87dc-399">今後のチュートリアルでは、ロールのフレームワークとその構成マークアップの詳細についてを究明します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>


### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="d87dc-400">カスタマイズ、`SqlMembershipProvider`設定</span><span class="sxs-lookup"><span data-stu-id="d87dc-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="d87dc-401">既定の`SqlMembershipProvider`(`AspNetSqlMembershipProvider`) がその`connectionStringName`属性に設定`LocalSqlServer`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="d87dc-402">ように、`AspNetSqlMembershipProvider`プロバイダー、接続文字列名`LocalSqlServer`で定義されている`machine.config`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="d87dc-403">この接続文字列がデータベースにある SQL 2005 Express Edition を定義して、ご覧のとおり |DataDirectory|aspnetdb.mdf します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf�.</span></span> <span data-ttu-id="d87dc-404">文字列 |DataDirectory | は実行時 をポイントするように変換されます、`~/App_Data/`ディレクトリ、そのため、データベースのパス |変換されます DataDirectory|aspnetdb.mdf" `~/App_Data` /`aspnet.mdf`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-404">The string |DataDirectory|� is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="d87dc-405">アプリケーションのでは、メンバーシップ プロバイダー情報お指定しなかったかどうか`Web.config`ファイル、アプリケーションは、登録されている既定のメンバーシップ プロバイダーを使用して`AspNetSqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-406">場合、`~/App_Data/aspnet.mdf`データベースが存在しないか、ASP.NET ランタイムに自動的にそれを作成し、アプリケーションのサービス スキーマを追加します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="d87dc-407">ただし、使用するたく、`aspnet.mdf`を使用する代わりに、データベースでは、`SecurityTutorials.mdf`手順 2. で作成したデータベース。</span><span class="sxs-lookup"><span data-stu-id="d87dc-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="d87dc-408">この変更は、2 つの方法のいずれかで実行できます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="d87dc-409"><strong>値を指定、</strong><strong>`LocalSqlServer`</strong><strong>接続文字列名を</strong><strong>`Web.config`</strong><strong>します。</strong></span><span class="sxs-lookup"><span data-stu-id="d87dc-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="d87dc-410">上書きすることで、`LocalSqlServer`の接続文字列名値`Web.config`、登録されている既定のメンバーシップ プロバイダーを使用します (`AspNetSqlMembershipProvider`) で正しく動作させることが、`SecurityTutorials.mdf`データベース。</span><span class="sxs-lookup"><span data-stu-id="d87dc-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="d87dc-411">この方法は、コンテンツで指定された構成設定を使用する場合は問題ありません。`AspNetSqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-412">この手法の詳細については、次を参照してください。 [Scott Guthrie](https://weblogs.asp.net/scottgu/)のブログ投稿「[使用して SQL Server 2000 または SQL Server 2005 に ASP.NET 2.0 アプリケーション サービスを構成する](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="d87dc-413"><strong>型の新しい登録済みプロバイダーの追加</strong><strong>`SqlMembershipProvider`</strong><strong>構成とその</strong><strong>`connectionStringName`</strong><strong>をポイントする設定</strong><strong>`SecurityTutorials.mdf`</strong><strong>データベース。</strong></span><span class="sxs-lookup"><span data-stu-id="d87dc-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="d87dc-414">この方法は、データベース接続文字列だけでなく他の構成プロパティをカスタマイズするシナリオで役立ちます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="d87dc-415">自分のプロジェクトでは常に、その柔軟性と読みやすさのためこの方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="d87dc-416">参照する新しい登録済みのプロバイダーを追加するため、`SecurityTutorials.mdf`データベースでは、まず必要があります内の適切な接続文字列値を追加する、`<connectionStrings>`セクション`Web.config`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="d87dc-417">次のマークアップは、という名前の新しい接続文字列を追加します。`SecurityTutorialsConnectionString`を参照する SQL Server 2005 Express Edition`SecurityTutorials.mdf`データベースに、`App_Data`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="d87dc-418">別のデータベース ファイルを使用している場合は、必要に応じて、接続文字列を更新します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="d87dc-419">正しい接続文字列を形成する詳細についてを参照してください[ConnectionStrings.com](http://www.connectionstrings.com/)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="d87dc-420">次のメンバーシップ構成マークアップを次に、追加、`Web.config`ファイル。</span><span class="sxs-lookup"><span data-stu-id="d87dc-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="d87dc-421">このマークアップは、という名前の新しいプロバイダーを登録します。`SecurityTutorialsSqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="d87dc-422">登録するだけでなく、`SecurityTutorialsSqlMembershipProvider`プロバイダーは、上記のマークアップを定義、`SecurityTutorialsSqlMembershipProvider`既定のプロバイダーとして (を使用して、`defaultProvider`属性、`<membership>`要素)。</span><span class="sxs-lookup"><span data-stu-id="d87dc-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="d87dc-423">メンバーシップ フレームワークに登録されている複数のプロバイダーを使用できることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="d87dc-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="d87dc-424">`AspNetSqlMembershipProvider`の最初のプロバイダーとして登録されて`machine.config`、それ以外の場合に指定しない限り、既定のプロバイダーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="d87dc-425">現在、アプリケーションには 2 つの登録済みプロバイダー:`AspNetSqlMembershipProvider`と`SecurityTutorialsSqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-426">登録する前に、ただし、`SecurityTutorialsSqlMembershipProvider`すべて以前クリアがでしたプロバイダーの登録済みプロバイダーを追加して、 [ `<clear />`要素](https://msdn.microsoft.com/library/t062y6yc.aspx)する直前に、`<add>`要素。</span><span class="sxs-lookup"><span data-stu-id="d87dc-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="d87dc-427">これはクリア、 `AspNetSqlMembershipProvider` 、登録されているプロバイダーの一覧からことを意味、`SecurityTutorialsSqlMembershipProvider`のみの登録済みのメンバーシップ プロバイダーになります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="d87dc-428">このアプローチを使用したかどうかは、マークすることは必要はありません、`SecurityTutorialsSqlMembershipProvider`既定のプロバイダーとしてためことが唯一の登録済みのメンバーシップ プロバイダー。</span><span class="sxs-lookup"><span data-stu-id="d87dc-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="d87dc-429">使用しての詳細については`<clear />`を参照してください[Using`<clear />`と追加のプロバイダー](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="d87dc-430">なお、`SecurityTutorialsSqlMembershipProvider`の`connectionStringName`、単に追加された参照の設定`SecurityTutorialsConnectionString`接続文字列名、およびその`applicationName`SecurityTutorials の値に設定が設定されています。</span><span class="sxs-lookup"><span data-stu-id="d87dc-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="d87dc-431">さらに、`requiresUniqueEmail`設定に設定されている`true`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="d87dc-432">その他のすべての構成オプションの値と同じ`AspNetSqlMembershipProvider`します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="d87dc-433">自由にする場合は、ここでは、構成変更を加えます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="d87dc-434">たとえば、または 7 ではなく、8 文字に、パスワードの長さを増やすことで、1 つではなく 2 つの英数字以外の文字を要求することで、パスワードの強度を強化でした。</span><span class="sxs-lookup"><span data-stu-id="d87dc-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="d87dc-435">メンバーシップ フレームワークにより、複数のアプリケーション パーティションに分割する 1 人のユーザー ストアのことを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="d87dc-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="d87dc-436">メンバーシップ プロバイダーの`applicationName`設定は、ユーザー ストアを使用する場合、プロバイダーを使用して、どのようなアプリケーションを示します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="d87dc-437">値を明示的に設定することが重要では、`applicationName`構成設定のため場合、`applicationName`が実行時に、web アプリケーションの仮想ルートのパスに割り当てられていることを明示的に設定されていません。</span><span class="sxs-lookup"><span data-stu-id="d87dc-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="d87dc-438">正常に機能しますが、アプリケーションの仮想ルートのパスが変更されない限り、アプリケーションを別のパスに移動する場合、`applicationName`設定が変更されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="d87dc-439">この場合、別のアプリケーション パーティションの操作に使用されていたよりも、メンバーシップ プロバイダーが開始されます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="d87dc-440">別のアプリケーション パーティションに移動する前に作成されたユーザー アカウントが存在し、それらのユーザーがサイトにログインできなくなります。</span><span class="sxs-lookup"><span data-stu-id="d87dc-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="d87dc-441">この問題の詳細な議論については、次を参照してください。[は常に設定、`applicationName`プロパティときに構成する ASP.NET 2.0 メンバーシップとその他のプロバイダー](https://weblogs.asp.net/scottgu/443634)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>


## <a name="summary"></a><span data-ttu-id="d87dc-442">まとめ</span><span class="sxs-lookup"><span data-stu-id="d87dc-442">Summary</span></span>

<span data-ttu-id="d87dc-443">この時点で、構成されたアプリケーション サービスでのデータベースがある (`SecurityTutorials.mdf`) メンバーシップ フレームワークを使用するように、web アプリケーションを構成し、`SecurityTutorialsSqlMembershipProvider`プロバイダーを登録します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="d87dc-444">この登録済みのプロバイダーが型`SqlMembershipProvider`ありその`connectionStringName`適切な接続文字列に設定 (`SecurityTutorialsConnectionString`) とその`applicationName`値が明示的に設定します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="d87dc-445">これで、アプリケーションからメンバーシップ フレームワークを使用する準備が整いました。</span><span class="sxs-lookup"><span data-stu-id="d87dc-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="d87dc-446">次のチュートリアルでは、新しいユーザー アカウントを作成する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="d87dc-447">次のことは、ユーザー ベースの承認を実行して、データベースに追加のユーザー関連情報を格納する、ユーザーの認証をについて学びます。</span><span class="sxs-lookup"><span data-stu-id="d87dc-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="d87dc-448">満足のプログラミングです。</span><span class="sxs-lookup"><span data-stu-id="d87dc-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="d87dc-449">関連項目</span><span class="sxs-lookup"><span data-stu-id="d87dc-449">Further Reading</span></span>

<span data-ttu-id="d87dc-450">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d87dc-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d87dc-451">常に設定、`applicationName`プロパティ ASP.NET 2.0 を構成するときにメンバーシップとその他のプロバイダー</span><span class="sxs-lookup"><span data-stu-id="d87dc-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="d87dc-452">アプリケーション サービスを使用して SQL Server 2000 または SQL Server 2005 の ASP.NET 2.0 を構成します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="d87dc-453">SQL Server Management Studio Express Edition をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="d87dc-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="d87dc-454">ASP.NET 2.0 を調べて s メンバーシップ、ロール、およびプロファイル</span><span class="sxs-lookup"><span data-stu-id="d87dc-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="d87dc-455">`<add>` Membership の Providers の要素</span><span class="sxs-lookup"><span data-stu-id="d87dc-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="d87dc-456">`<membership>`要素</span><span class="sxs-lookup"><span data-stu-id="d87dc-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="d87dc-457">`<providers>`メンバーシップ要素</span><span class="sxs-lookup"><span data-stu-id="d87dc-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="d87dc-458">使用して`<clear />`プロバイダーを追加する場合</span><span class="sxs-lookup"><span data-stu-id="d87dc-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="d87dc-459">直接操作、 `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="d87dc-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="d87dc-460">このチュートリアルに含まれるトピックのビデオ トレーニング</span><span class="sxs-lookup"><span data-stu-id="d87dc-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="d87dc-461">ASP.NET メンバーシップについて理解する</span><span class="sxs-lookup"><span data-stu-id="d87dc-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="d87dc-462">メンバーシップ スキーマと連動するように SQL を構成する</span><span class="sxs-lookup"><span data-stu-id="d87dc-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="d87dc-463">既定のメンバーシップ スキーマのメンバーシップ設定を変更する</span><span class="sxs-lookup"><span data-stu-id="d87dc-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="d87dc-464">執筆者紹介</span><span class="sxs-lookup"><span data-stu-id="d87dc-464">About the Author</span></span>

<span data-ttu-id="d87dc-465">Scott Mitchell、複数の受け取ります書籍の著者と、4GuysFromRolla.com の創設者では、1998 年から、Microsoft Web テクノロジに取り組んできました。</span><span class="sxs-lookup"><span data-stu-id="d87dc-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d87dc-466">Scott は、フリーのコンサルタント、トレーナー、およびライターとして動作します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d87dc-467">最新の著書は *[Sams 教える自分で ASP.NET 2.0 24 時間以内に](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="d87dc-468">Scott に到達できる[ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com)または彼のブログ[ http://ScottOnWriting.NET](http://scottonwriting.net/)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="d87dc-469">特別なに感謝します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-469">Special Thanks To</span></span>

<span data-ttu-id="d87dc-470">このチュートリアル シリーズは、多くの便利なレビュー担当者によってレビューされました。</span><span class="sxs-lookup"><span data-stu-id="d87dc-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d87dc-471">このチュートリアルでは、潜在顧客レビュー担当者は、Alicja Maziarz でした。</span><span class="sxs-lookup"><span data-stu-id="d87dc-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="d87dc-472">今後、MSDN の記事を確認したいですか。</span><span class="sxs-lookup"><span data-stu-id="d87dc-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d87dc-473">場合は、筆者に[ mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com)します。</span><span class="sxs-lookup"><span data-stu-id="d87dc-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="d87dc-474">次へ</span><span class="sxs-lookup"><span data-stu-id="d87dc-474">Next</span></span>](creating-user-accounts-cs.md)
