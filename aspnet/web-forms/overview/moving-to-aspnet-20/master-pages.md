---
uid: web-forms/overview/moving-to-aspnet-20/master-pages
title: マスター ページの |Microsoft Docs
author: microsoft
description: 成功した Web サイトの主なコンポーネントの 1 つは、一貫したルック アンド フィールです。 Asp.net 1.x では、開発者で、ページの一般的な elem のレプリケーションにユーザー コントロールが使用される.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2005
ms.topic: article
ms.assetid: 9c0cce4d-efd9-4c14-b0e8-a1a140abb3f4
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/master-pages
msc.type: authoredcontent
ms.openlocfilehash: b31627fec45f153f5832afa6e317f2dd2b296d02
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2018
ms.locfileid: "37382622"
---
<a name="master-pages"></a>マスター ページ
====================
によって[Microsoft](https://github.com/microsoft)

> 成功した Web サイトの主なコンポーネントの 1 つは、一貫したルック アンド フィールです。 Asp.net 1.x では、開発者で、Web アプリケーション全体で共通のページ要素をレプリケートするユーザー コントロールが使用されます。 有効な解決策ですが確かに、ユーザー コントロールを使用する欠点があります。 たとえば、ユーザー コントロールの位置の変更は、サイト全体で複数のページへの変更が必要です。 ユーザー コントロールはもページに挿入される後、デザイン ビューでレンダリングされません。


成功した Web サイトの主なコンポーネントの 1 つは、一貫したルック アンド フィールです。 Asp.net 1.x では、開発者で、Web アプリケーション全体で共通のページ要素をレプリケートするユーザー コントロールが使用されます。 有効な解決策ですが確かに、ユーザー コントロールを使用する欠点があります。 たとえば、ユーザー コントロールの位置の変更は、サイト全体で複数のページへの変更が必要です。 ユーザー コントロールはもページに挿入される後、デザイン ビューでレンダリングされません。

ASP.NET 2.0 ではマスター ページとすると、一貫したルック アンド フィールを維持するための手段としてすぐにわかります、マスター ページは、ユーザー コントロールのメソッドより大幅に改善を表します。

## <a name="why-master-pages"></a>なぜマスター ページでしょうか。

疑問で ASP.NET 2.0 マスター ページが必要な理由です。 結局のところ、Web サイト開発者既に使用しているユーザー コントロールで ASP.NET 1.x のページ間のコンテンツ領域を共有します。 実際には、いくつかの理由がなぜユーザー コントロールは、一般的なレイアウトを作成するために、最適のソリューションがあります。

ユーザー コントロールでは、ページ レイアウトを実際には定義はありません。 代わりに、レイアウトと、ページの一部の機能を定義します。 ユーザー コントロールのソリューションの管理の容易性をかなり難しくなりますので、これらの 2 つの違いが重要です。 たとえば、ページ上のユーザー コントロールの位置を変更する場合は、ユーザー コントロールが表示される実際のページを編集する必要があります。 これが正常にいくつかのページのみがあるが、大規模なサイトですぐにサイト管理悪夢のような場合です。

ユーザー コントロールを使用する一般的なレイアウトを定義するためのもう 1 つは ASP.NET 自体のアーキテクチャを基盤とします。 ユーザー コントロールのパブリック メンバーが変更された場合、すべてのユーザー コントロールを使用するページを再コンパイルが必要です。 さらに、再度 JIT とは、最初のページにアクセスし、ASP.NET がされます。 これは、もう一度、非スケーラブル アーキテクチャと大規模なサイトのサイト管理の問題を生成します。

これらの問題 (とさらに多く) の両方は、ASP.NET 2.0 のマスター ページで適切に対処できます。

## <a name="how-master-pages-work"></a>マスター ページの動作

マスター ページは、他のページのテンプレートに似ています。 (メニューの罫線など) は、他のページで共有されるページの要素は、マスター ページに追加されます。 新しいページがサイトに追加されると、マスター ページに関連付けることができます。 マスター ページに関連付けられているページが呼び出され、**コンテンツ ページ**します。 既定では、コンテンツ ページからマスター ページの外観には移動します。 ただし、マスター ページを作成するときに、[コンテンツ] ページは、独自のコンテンツを置き換えることができるページの部分を定義できます。 これらの部分は、ASP.NET 2.0 で導入された新しいコントロールを使用して定義されます。**ContentPlaceHolder**コントロール。

マスター ページは、任意の数のプレース ホルダー コントロール (またはまったく) を含めることができます。内のコンテンツ ページで、プレース ホルダー コントロールからコンテンツが表示される**コンテンツ**コントロール、ASP.NET 2.0 のもう 1 つの新しいコントロール。 既定では、独自のコンテンツを提供できるように、コンテンツ ページのコンテンツ コントロールが空です。 コンテンツ コントロール内のマスター ページからコンテンツを使用する場合は後でこのモジュールに表示されるようにします。 コンテンツ コントロールは、コンテンツ コントロールの ContentPlaceHolderID 属性を使用してプレース ホルダー コントロールにマップされます。 マスター ページに mainBody と呼ばれるプレース ホルダー コントロールにコンテンツ コントロールをマップに次のコード。

[!code-aspx[Main](master-pages/samples/sample1.aspx)]

> [!NOTE]
> ユーザーが他のページの基本クラスとしてマスター ページについて説明しますを聞くことが多くの場合。 これが実際にはありません。 マスター ページとコンテンツのページ間のリレーションシップは、継承のいずれかではありません。


**図 1**表示 Visual Studio 2005 でマスター ページと関連付けられているコンテンツ ページを示しています。 マスター ページと、対応するプレース ホルダー コントロールを確認できますコンテンツ ページのコントロールのコンテンツします。 ContentPlaceHolder 外にあるマスター ページ コンテンツが表示されますが、[コンテンツ] ページでグレーに注意してください。 [コンテンツ] ページで、プレース ホルダー内部のコンテンツのみをそれことができます。 マスター ページから送信されるその他のすべてのコンテンツは変更できません。


![マスター ページとその関連するコンテンツ ページ](master-pages/_static/image1.jpg)

**図 1**: マスター ページとその関連するコンテンツ ページ


## <a name="creating-a-master-page"></a>マスター ページを作成します。

新しいマスター ページを作成します。

1. Visual Studio 2005 を開き、新しい Web サイトを作成します。
2. 新しいファイルをクリックして、ファイルします。
3. ように、新しい項目の追加 ダイアログ ボックスから Master ファイルを選択**図 2**します。
4. [追加] をクリックします。


![新しいマスター ページを作成します。](master-pages/_static/image2.jpg)

**図 2**: 新しいマスター ページを作成します。


マスター ページのファイル拡張子は<em>.master</em>します。 これは、通常のページからマスター ページとは異なる方法のいずれかです。 代わりに、その他の主な違いは、@Pageディレクティブ、マスター ページには、@Masterディレクティブ。 先ほど作成した、コードをレビューしてページをソース ビューにマスターの切り替え。

新しいマスター ページは、既定では、1 つのプレース ホルダー コントロールがあります。 ほとんどの場合、方一般的なページ要素をまず作成し、プレース ホルダー コントロールを挿入するカスタム コンテンツが必要な場合。 その場合は、開発者は、既定のプレース ホルダー コントロールを削除して、ページが作成されると、新しい値を挿入する必要があります。 ContentPlaceHolder のコントロールがサイズ変更ハンドルが表示されることは事実に関係なくサイズ変更可能ではありません。 ContentPlaceHolder のコントロールのサイズが 1 つの例外が含まれている内容に基づいて、自動的にブロック要素内のプレース ホルダー コントロールなどのテーブル セルに配置する場合は、要素のサイズに応じてサイズがします。

## <a name="lab-1-working-with-master-pages"></a>ラボ 1 マスター ページの操作

この演習では、新しいマスター ページを作成し、次の 3 つのプレース ホルダー コントロールを定義します。 新しいコンテンツ ページを作成し、少なくとも 1 つのプレース ホルダー コントロールからのコンテンツを置き換えるはします。

1. マスター ページを作成し、プレース ホルダー コントロールを挿入します。 

    1. 前述のように、新しいマスター ページを作成します。
    2. 既定のプレース ホルダー コントロールを削除します。
    3. コントロールの上位影付きの枠線をクリックして、プレース ホルダー コントロールを選択し、キーボードの DEL キーを押すことによってこれを削除します。
    4. 使用して新しいテーブルを挿入、*ヘッダーと側*テンプレート 3 の図に示すようにします。 テーブル全体がデザイナーで表示されるよう、幅と高さを 90% に変更します。


![](master-pages/_static/image3.jpg)

**図 3**


1. テーブルの各セルにカーソルを配置し、設定、 *valign*プロパティを*上部*します。
2. ツールボックスからテーブル (ヘッダー セルです。) の先頭のセルにプレース ホルダー コントロールを挿入します。
3. このプレース ホルダー コントロールを挿入すると、図 4 に示すようにページ全体ではほとんどの行の高さはかかることがわかります。 不要は、この時点でについて注意します。


![空の領域は、プレース ホルダーとして同じセルで、します。](master-pages/_static/image1.gif)

**図 4**: 空の領域は、プレース ホルダーとして同じセルで、


1. その他の 2 つのセルで、プレース ホルダー コントロールを配置します。 他のコントロールのプレース ホルダーが挿入されると、テーブルのセルのサイズ期待どおりにする必要があります。 ページに表示するページのようになります**図 5**します。


![ContentPlaceHolder のすべてのコントロールを使用してマスターします。 ヘッダー セルのセルの高さがそのでする必要がありますになったことに注意してください。](master-pages/_static/image2.gif)

**図 5**: ContentPlaceHolder のすべてのコントロールを使用して、マスターです。 ヘッダー セルのセルの高さがそのでする必要がありますになったことに注意してください。


1. それぞれの 3 つのプレース ホルダー コントロールには、好みのテキストを入力します。
2. Exercise1.master としてマスター ページを保存します。
3. 新しい Web フォームを作成し、exercise1.master マスター ページと関連付けます。
4. ファイルの Visual Studio 2005 で、新しいファイルを選択します。
5. 選択**Web フォーム**新しい項目の追加 ダイアログ ボックス。
6. 図 6 に示すように、マスター ページを選択チェック ボックスをオンすることを確認します。


![新しいコンテンツ ページを追加します。](master-pages/_static/image3.gif)

**図 6**: 新しいコンテンツ ページを追加します。


1. [追加] をクリックします。
2. Exercise1.master の選択でマスター ページのダイアログを選択図 7 に示すようにします。
3. 新しいコンテンツ ページを追加するには、[ok] をクリックします。

マスター ページ上の各プレース ホルダー コントロールのコンテンツ コントロールを 1 つに、Visual Studio で新しいコンテンツ ページが表示されます。 既定では、独自のコンテンツを追加することで、コンテンツ コントロールが空です。 マスター ページの ContentPlaceHolder のコントロールのコンテンツを使用すると、単にスマート タグ記号 (コントロールの右上隅にある小さな黒い矢印) をクリックし、選択*マスター コンテンツを既定の*ように、スマート タグから**図 8**します。 メニュー項目が変更にこれを行うときに*カスタム コンテンツの作成*です。 クリックすると、その時点では、その特定のコンテンツ コントロールのカスタム コンテンツを定義することができます、マスター ページからコンテンツを削除します。


![既定のマスター ページのコンテンツのコンテンツ コントロールの設定](master-pages/_static/image4.gif)

**図 7**: コンテンツ コントロールをマスター ページのコンテンツを既定に設定します。


## <a name="connecting-master-page-and-content-pages"></a>マスター ページとコンテンツ ページに接続します。

マスター ページとコンテンツのページ間の関連付けは、4 つの方法のいずれかで構成できます。

- <strong>MasterPageFile</strong>の属性、@Pageディレクティブ
- 設定、 **Page.MasterPageFile**コード内のプロパティ。
- **&lt;ページ&gt;** アプリケーション構成ファイル (web.config で、アプリケーションのルート フォルダー) 内の要素
- **&lt;ページ&gt;** サブフォルダー構成ファイル (web.config のサブフォルダー) 内の要素

## <a name="masterpagefile-attribute"></a>MasterPageFile 属性

MasterPageFile 属性を簡単に特定の ASP.NET ページにマスター ページを適用します。 オンにすると、マスター ページを適用するために使用するメソッドも、**マスター ページの選択**するチェック ボックスは、演習 1 ででした。

## <a name="setting-pagemasterpagefile-in-code"></a>コードで Page.MasterPageFile の設定

コードの MasterPageFile プロパティの設定によっては、実行時にコンテンツを特定のマスター ページを適用できます。 これは、ユーザー ロールまたはその他のいくつかの条件に基づいて、特定のマスター ページを適用する必要がある場合に便利です。 PreInit メソッドでは、MasterPageFile プロパティを設定する必要があります。 PreInit メソッドの後に設定されている場合、InvalidOperationException がスローされます。 このプロパティが設定されているページには、コンテンツの必要があります。 ページのコントロールがトップレベル コントロールとしてコントロール。 それ以外の場合、MasterPageFile プロパティが設定されている場合、HttpException がスローされます。

## <a name="using-the-ltpagesgt-element"></a>使用して、&lt;ページ&gt;要素

MasterPageFile 属性に設定して、ページのマスター ページを構成することができます、&lt;ページ&gt;web.config ファイルの要素。 このメソッドを使用する場合は、アプリケーションの構造内の下位の web.config ファイルがこの設定をオーバーライドできることに留意してください。 任意の MasterPageFile 属性で設定を@Pageディレクティブは、この設定をオーバーライドしても。 使用して、&lt;ページ&gt;要素により、簡単に作成、<em>マスター</em>マスター ページを特定のフォルダーまたはファイルに必要な場合にオーバーライドできます。

## <a name="properties-in-master-pages"></a>マスター ページのプロパティ

マスター ページは、これらのプロパティをマスター ページ内で公開するだけで、プロパティを公開できます。 たとえば、次のコードでは、SomeProperty という名前のプロパティを定義します。

[!code-csharp[Main](master-pages/samples/sample2.cs)]

[コンテンツ] ページから SomeProperty プロパティにアクセスするにマスターを使用する必要がありますプロパティようになります。

[!code-csharp[Main](master-pages/samples/sample3.cs)]

## <a name="nesting-master-pages"></a>入れ子のマスター ページ

マスター ページは、大規模な Web アプリケーション間で共通のルック アンド フィールを確保するための最適なソリューションです。 ただし、大規模なサイトの共有、共通のインターフェイスの特定の部分を他の部分を共有する別のインターフェイスが珍しくないです。 そのに対処するには、複数のマスター ページは、完全なソリューションです。 ただし、まだは取り扱いませんファクトの大規模なアプリケーションは、すべてのページ間で共有される特定のコンポーネント (たとえばメニュー) など、特定のセクションでは、サイトの間だけで共有されるその他のコンポーネントがある可能性があります。 そのような状況は、入れ子になったマスター ページは、必要を適切に入力します。 で説明したようにマスター ページとコンテンツ ページの標準のマスター ページで構成されます。 入れ子になったマスター ページの状況では、2 つのマスター ページです。親マスターと子マスターします。 子のマスター ページは、[コンテンツ] ページでも、そのマスタは親マスター ページ。

次の一般的なマスター ページのコードに示します。

[!code-aspx[Main](master-pages/samples/sample4.aspx)]

入れ子になったマスターの場合、親マスターになります。 別のマスター ページは、このページを使用して、そのマスター ページとしては、そのコードは次のようになります。

[!code-aspx[Main](master-pages/samples/sample5.aspx)]

このシナリオで子マスターも親マスターのコンテンツ ページに注意してください。 すべての子マスターのコンテンツは、親のプレース ホルダー コントロールからそのコンテンツを取得するコンテンツ コントロールの内部が表示されます。

> [!NOTE]
> デザイナー サポートは、入れ子になったマスター ページをご利用いただけません。 入れ子になったマスターの使用を開発する場合は、ソース ビューを使用する必要があります。


このビデオでは、入れ子になったマスター ページを使用してチュートリアルを説明します。


![](master-pages/_static/image1.png)


[開いているビデオを全画面](master-pages/_static/nested1.wmv)


![マスター ページの選択](master-pages/_static/image4.jpg)

**図 8**: マスター ページの選択
