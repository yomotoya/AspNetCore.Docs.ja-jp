---
uid: mvc/overview/older-versions-1/views/passing-data-to-view-master-pages-cs
title: ビュー マスター ページ (c#) にデータを渡す |Microsoft Docs
author: microsoft
description: このチュートリアルの目的では、ビューのマスター ページのコント ローラーからデータを渡す方法について説明します。 データ ビューの m を渡すための 2 つの方法を説明しています.
ms.author: aspnetcontent
ms.date: 10/16/2008
ms.assetid: 5fee879b-8bde-42a9-a434-60ba6b1cf747
msc.legacyurl: /mvc/overview/older-versions-1/views/passing-data-to-view-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: bd2d3e85ac518a066d72541d40ab87543b1a70d1
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2018
ms.locfileid: "37818983"
---
<a name="passing-data-to-view-master-pages-c"></a>ビュー マスター ページ (c#) にデータを渡す
====================
によって[Microsoft](https://github.com/microsoft)

[PDF のダウンロード](http://download.microsoft.com/download/e/f/3/ef3f2ff6-7424-48f7-bdaa-180ef64c3490/ASPNET_MVC_Tutorial_13_CS.pdf)

> このチュートリアルの目的では、ビューのマスター ページのコント ローラーからデータを渡す方法について説明します。 ビュー マスター ページにデータを渡すための 2 つの方法を説明します。 最初に、保守が困難なアプリケーションで結果の簡単なソリューションについて説明します。 次に、少しより保守性の高いアプリケーションで結果が、多くの初期作業を必要とするより良いソリューションを確認します。


## <a name="passing-data-to-view-master-pages"></a>ビュー マスター ページにデータを渡す

このチュートリアルの目的では、ビューのマスター ページのコント ローラーからデータを渡す方法について説明します。 ビュー マスター ページにデータを渡すための 2 つの方法を説明します。 最初に、保守が困難なアプリケーションで結果の簡単なソリューションについて説明します。 次に、少しより保守性の高いアプリケーションで結果が、多くの初期作業を必要とするより良いソリューションを確認します。

### <a name="the-problem"></a>問題を

映画データベース アプリケーションを作成して、アプリケーション内の各ページでムービーのカテゴリの一覧を表示することを想像してみてください (図 1 参照)。 さらに、ムービーのカテゴリの一覧がデータベース テーブルに格納されていることに想像してください。 その場合は、合理的をデータベースからカテゴリを取得し、ビュー マスター ページ内のムービーのカテゴリの一覧を表示します。


[![ビュー マスター ページでムービーのカテゴリを表示します。](passing-data-to-view-master-pages-cs/_static/image2.png)](passing-data-to-view-master-pages-cs/_static/image1.png)

**図 01**: ビュー マスター ページでムービーのカテゴリの表示 ([フルサイズの画像を表示する をクリックします](passing-data-to-view-master-pages-cs/_static/image3.png))。


ここで問題があります。 マスター ページでムービーのカテゴリの一覧を取得する方法 マスター ページで、モデル クラスのメソッドを直接呼び出すたくなります。 つまり、することは避けて、マスター ページの右データベースからデータを取得するためのコードが含まれます。 ただし、データベースにアクセスする MVC コント ローラーをバイパスすると、MVC アプリケーションを構築するための主な利点の 1 つである懸念事項の明確な分離が違反していました。

MVC アプリケーションでは、MVC コント ローラーによって処理される MVC ビューと MVC モデルの間のすべての操作をします。 この懸念事項の分離は、保守、融通性、およびテストが容易なアプリケーションで発生します。

MVC アプリケーションでは、コント ローラーのアクションによってビュー マスター ページを含むビューに渡されるすべてのデータをビューに渡す必要があります。 さらに、データの表示を活用して、データを渡す必要があります。 このチュートリアルの残りの部分では、ビュー マスター ページ ビュー データを渡すことの 2 つの方法は説明します。

### <a name="the-simple-solution"></a>単純なソリューション

ビュー マスター ページに、コント ローラーからビューのデータを渡す最も単純なソリューションから始めましょう。 最も単純なソリューションでは、各コント ローラー アクションでマスター ページのビュー データを渡します。

リスト 1 で、コント ローラーを検討してください。 という名前の 2 つのアクションを公開`Index()`と`Details()`します。 `Index()`アクション メソッドは、映画データベース テーブルのすべてのムービーを返します。 `Details()`アクション メソッドが特定の映画カテゴリのすべてのムービーを返します。

**1 – を一覧表示します。 `Controllers\HomeController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample1.cs)]

Index() と Details() アクションの両方がデータを表示する 2 つの項目を追加することに注意してください。 Index() アクションは、2 つのキーを追加します: カテゴリや映画します。 カテゴリ キーは、ビュー マスター ページで表示される映画カテゴリの一覧を表します。 映画のキーは、インデックスの表示 ページで表示するムービーのリストを表します。

Details() アクションには、カテゴリや映画をという名前の 2 つのキーも追加します。 カテゴリ キーは、もう一度、ビュー マスター ページで表示される映画カテゴリの一覧を表します。 映画キーは、詳細ビュー ページで表示される特定のカテゴリにムービーのリストを表します (図 2 参照)。


[![詳細ビュー](passing-data-to-view-master-pages-cs/_static/image5.png)](passing-data-to-view-master-pages-cs/_static/image4.png)

**図 02**: 詳細の表示 ([フルサイズの画像を表示する をクリックします](passing-data-to-view-master-pages-cs/_static/image6.png))。


インデックス ビューは、リスト 2 に含まれています。 データの表示で映画項目によって表されるムービーのリストが反復だけです。

**2 – を一覧表示します。 `Views\Home\Index.aspx`**

[!code-aspx[Main](passing-data-to-view-master-pages-cs/samples/sample2.aspx)]

ビュー マスター ページは、リスト 3 に含まれています。 ビュー マスター ページは、反復処理し、すべてのデータの表示から、カテゴリ アイテムによって表される映画カテゴリを表示します。

**3 – を一覧表示します。 `Views\Shared\Site.master`**

[!code-aspx[Main](passing-data-to-view-master-pages-cs/samples/sample3.aspx)]

すべてのデータは、ビュー データをビューとビュー マスター ページに渡されます。 マスター ページにデータを渡すための適切な方法です。

そのため、このソリューションに問題が何ですか。 問題は、このソリューションに DRY (Don't Repeat Yourself) 原則に違反していることです。 各コント ローラー アクションには、非常に同じデータを表示するムービーのカテゴリのリストを追加する必要があります。 アプリケーション内に重複するコードを持つによってアプリケーションの管理、調整、および変更をはるかに難しくなります。

### <a name="the-good-solution"></a>最適なソリューション

このセクションでは、コント ローラー アクションからビュー マスター ページにデータを渡すことに、代替、およびより優れた、ソリューションを調べます。 各コント ローラー アクションでマスター ページの映画カテゴリを追加する代わりにカテゴリを追加、ムービー データを表示する 1 回だけ。 ビュー マスター ページで使用されるすべてのビュー データは、アプリケーションのコント ローラーに追加されます。

ApplicationController クラスは、リスト 4 に含まれます。

**4 – を一覧表示します。 `Controllers\ApplicationController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample4.cs)]

リスト 4 アプリケーションのコント ローラーについて注意すべき 3 つの点があります。 最初に、クラスは、基本の System.Web.Mvc.Controller クラスから継承されているにも注意してください。 アプリケーションのコント ローラーは、コント ローラー クラスです。

次に、アプリケーションのコント ローラー クラスが抽象クラスであるに注意してください。 抽象クラスは、クラスを具象クラスで実装する必要があります。 アプリケーションのコント ローラーは、抽象クラスであるため、クラスで直接定義されているすべてのメソッドを呼び出しませんことはできません。 アプリケーション クラスを直接起動すると、リソースが見つからないエラー メッセージが表示されます。

第 3 に、アプリケーション コント ローラーにデータを表示するムービーのカテゴリの一覧を追加するコンス トラクターが含まれていることを確認します。 アプリケーションのコント ローラーから継承するすべてのコント ローラー クラスは、アプリケーションのコント ローラーのコンス トラクターを自動的に呼び出します。 アプリケーションのコント ローラーから継承する任意のコント ローラーには、任意のアクションを呼び出す、たびに、ムービーのカテゴリは自動的にビュー データに含まれます。

リスト 5 で、Movies コント ローラーは、アプリケーションのコント ローラーから継承します。

**5 – を一覧表示します。 `Controllers\MoviesController.cs`**

[!code-csharp[Main](passing-data-to-view-master-pages-cs/samples/sample5.cs)]

前のセクションで説明した Home コント ローラーと同様、Movies コント ローラーという 2 つのアクション メソッドを公開する`Index()`と`Details()`します。 いずれかでデータを表示するビュー マスター ページで表示される映画カテゴリの一覧が通知の追加、`Index()`または`Details()`メソッド。 Movies コント ローラーは、アプリケーションのコント ローラーから継承、するため、データを自動的に表示するムービーのカテゴリの一覧が追加されます。

ビュー マスター ページのビュー データを追加するには、このソリューションに DRY (Don't Repeat Yourself) 原則に違反していないことに注意してください。 1 つの場所にデータを表示するムービーのカテゴリの一覧を追加するコードが含まれている: アプリケーションのコント ローラーのコンス トラクター。

### <a name="summary"></a>まとめ

このチュートリアルでは、データの表示をコント ローラーからビュー マスター ページに渡す 2 つの方法について説明します。 最初に、アプローチの保守が困難ですが、単純なを調査します。 最初のセクションでは、アプリケーションで各すべてコント ローラーのアクションにビュー マスター ページのビュー データを追加する方法を説明しました。 という結論に達しました DRY (Don't Repeat Yourself) 原則に違反しているために、不適切なアプローチがこのことです。

次に、データを表示するビュー マスター ページで必要なデータを追加する量により良い方法を確認します。 各コント ローラー アクションで、ビュー データを追加する代わりに、アプリケーションのコント ローラー内では、ビュー データを 1 回だけを追加しました。 そうすることをビュー マスター ページ、ASP.NET MVC アプリケーションでデータを渡すときに重複するコードを回避できます。

> [!div class="step-by-step"]
> [前へ](creating-page-layouts-with-view-master-pages-cs.md)
> [次へ](asp-net-mvc-views-overview-vb.md)
